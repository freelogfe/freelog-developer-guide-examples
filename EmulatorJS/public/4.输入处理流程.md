graph TD A[键盘事件 keyChange] --> B[检查控制设置] B --> C[处理特殊按键(NES X/Y 连发)] C --> D[模拟输入 simulateInput] E[手柄事件 gamepadEvent] --> F[检查手柄配置] F --> G[处理特殊按键(NES X/Y 连发)] G --> H[模拟输入 simulateInput] I[触摸事件] --> J[虚拟手柄处理] J --> K[触摸输入映射] K --> L[模拟输入 simulateInput]
