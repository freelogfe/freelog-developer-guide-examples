"use strict";(self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[]).push([[365],{5365:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var i=a(5436),n=a(2689),r=a(9753),s=a(6132),l=(0,i.pM)({__name:"DepTree",props:{treeData:{}},emits:["select"],setup(e,{emit:t}){const a=e,r=t,s=(e,t)=>{t.node.parent&&r("select",t)};return(e,t)=>{const r=(0,i.g2)("a-tree");return a.treeData?.length?((0,i.uX)(),(0,i.Wv)(r,{key:0,"tree-data":a.treeData,onSelect:s,defaultExpandAll:!0,autoExpandParent:!0},{title:(0,i.k6)((({title:e})=>[(0,i.eW)((0,n.v_)(e),1)])),_:1},8,["tree-data"])):(0,i.Q3)("",!0)}}});const c=l;var d=c;const u={class:"home p-40 y-auto h-100x"},o={class:"h-80 over-h cur-pointer"},h=["src"],p=(0,i.Lk)("div",{class:"f-title-3 m-20"},"点击卡片展示依赖树",-1),v={class:"w-100x flex-column-center over-h"},b={key:0,class:"f-title-3"},m=["src"],x={class:"w-100x flex-column-center h-300 over-h mt-30"},k=(0,i.Lk)("span",{class:"f-title-3"},"依赖信息",-1),f={class:"mt-20"};var g=(0,i.pM)({__name:"ExhibitSub",setup(e){const t=(0,s.KR)(""),a=(0,s.KR)([]),l=(0,s.KR)(""),c=(0,s.KR)([]),g=async e=>{t.value=await r.Kb.getExhibitDepFileStream(e.node.exhibitId,{parentNid:e.node.parent.node.nid,subArticleId:e.node.resourceId,returnUrl:!0}),r.Kb.getExhibitDepInfo(e.node.exhibitId,{articleNids:e.node.parent.node.nid}).then((e=>{l.value=JSON.stringify(e.data?.data)}))},I=async e=>{r.Kb.getExhibitDepTree(e.exhibitId,{maxDeep:10}).then((t=>{const i={...t.data.data[0],exhibitId:e.exhibitId};function n(t,a){t?.length&&t.forEach((t=>{const i={...t,title:t.resourceName,key:t.resourceId,exhibitId:e.exhibitId};a.children=a.children||[],a.children.push(i),n(i.dependencies,i)}))}i.title=i.resourceName,i.key=i.resourceId,n(t.data.data[0].dependencies,i),a.value=[i]}))};return r.Kb.getExhibitListByPaging({skip:0,limit:20,articleResourceTypes:"图片"}).then((e=>{c.value=e.data.data.dataList.filter((e=>"收费图片"!=e.exhibitName))})),(e,r)=>{const s=(0,i.g2)("a-card"),_=(0,i.g2)("a-list-item"),y=(0,i.g2)("a-list");return(0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(y,{grid:{gutter:16,column:4},"data-source":c.value},{renderItem:(0,i.k6)((({item:e})=>[(0,i.bF)(_,null,{default:(0,i.k6)((()=>[(0,i.bF)(s,{title:e.exhibitName,onClick:t=>I(e)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",o,[(0,i.Lk)("img",{class:"h-100x",src:e.coverImages[0],alt:""},null,8,h)])])),_:2},1032,["title","onClick"])])),_:2},1024)])),_:1},8,["data-source"]),p,(0,i.bF)(d,{treeData:a.value,onSelect:g},null,8,["treeData"]),(0,i.Lk)("div",v,[t.value?((0,i.uX)(),(0,i.CE)("img",{key:1,src:t.value,alt:"",class:"w-100x"},null,8,m)):((0,i.uX)(),(0,i.CE)("span",b,"点击子节点展示图片"))]),(0,i.Lk)("div",x,[k,(0,i.Lk)("div",f,(0,n.v_)(l.value),1)])])}}});const I=g;var _=I}}]);
//# sourceMappingURL=365.bbdedbcb.js.map