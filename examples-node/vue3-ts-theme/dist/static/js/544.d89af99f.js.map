{"version":3,"file":"static/js/544.d89af99f.js","mappings":"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","sources":["webpack://vue3-ts-theme-/./src/views/user/UserLogin.vue?ce1e","webpack://vue3-ts-theme-/./src/views/user/UserLogin.vue","webpack://vue3-ts-theme-/./src/views/user/UserLogin.vue?7fea"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"home p-40\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"text-align-left f-title-3 mr-10 mb-10\" }, \"当前用户：\", -1)\nconst _hoisted_3 = { class: \"text-align-left pl-40 mb-10\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"f-title-3 mr-10\" }, \"用户名: \", -1)\nconst _hoisted_5 = { class: \"f-title-4\" }\nconst _hoisted_6 = { class: \"text-align-left pl-40 mb-30\" }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"f-title-3 mr-10\" }, \"账号: \", -1)\nconst _hoisted_8 = { class: \"f-title-4\" }\nconst _hoisted_9 = { class: \"mt-20 mb-40\" }\nconst _hoisted_10 = { class: \"mt-20\" }\n\nimport { userStore } from \"@/stores/user\";\r\nimport { createVNode, ref } from \"vue\";\r\nimport { ExclamationCircleOutlined } from \"@ant-design/icons-vue\";\r\n\r\nimport { freelogApp } from \"freelog-runtime\";\r\nimport { Modal } from \"ant-design-vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'UserLogin',\n  setup(__props) {\n\r\nconst isUserChange = ref(false);\r\nconst openOnUserChange = ref(false);\r\nconst store = userStore();\r\nconst login = () => {\r\n  freelogApp.callLogin(() => {\r\n    store.setUserInfo(freelogApp.getCurrentUser());\r\n    // freelogApp.reload()\r\n  });\r\n};\r\nconst checkIsUserChange = () => {\r\n  isUserChange.value = freelogApp.isUserChange();\r\n};\r\nfreelogApp.onLogin(() => {\r\n  console.log(\"login\");\r\n});\r\nconst loginOut = () => {\r\n  freelogApp.callLoginOut();\r\n};\r\nconst onUserChange = () => {\r\n  openOnUserChange.value = true;\r\n  // 监听其余页面切换用户\r\n  freelogApp.onUserChange(() => {\r\n    Modal.warning({\r\n      title: \"将立刻刷新\",\r\n      icon: createVNode(ExclamationCircleOutlined),\r\n      content: \"已在其余页签退出或登录其余账号！\",\r\n      okText: \"确认\",\r\n      onOk() {\r\n        // 主题才有资格整个网页reload，也可以由主题放权给插件\r\n        freelogApp.reload();\r\n      },\r\n    });\r\n  });\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (!_unref(store).userInfo)\n      ? (_openBlock(), _createBlock(_component_a_button, {\n          key: 0,\n          type: \"primary\",\n          onClick: login\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"登录一下吧\")\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    (_unref(store).userInfo)\n      ? (_openBlock(), _createBlock(_component_a_button, {\n          key: 1,\n          type: \"primary\",\n          onClick: loginOut\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"退出登录\")\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _hoisted_4,\n      _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_unref(store).userInfo?.username), 1)\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _hoisted_7,\n      _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_unref(store).userInfo?.username), 1)\n    ]),\n    _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: checkIsUserChange\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"检查是否用户变化\")\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_9, _toDisplayString(isUserChange.value ? \"用户变化请刷新页面\" : \"用户未变化\"), 1),\n    _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: onUserChange\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"开启监听页面切换后用户变化\")\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_10, _toDisplayString(openOnUserChange.value ? \"已开启\" : \"未开启\"), 1)\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"home p-40\">\r\n    <a-button type=\"primary\" v-if=\"!store.userInfo\" @click=\"login\"\r\n      >登录一下吧</a-button\r\n    >\r\n    <a-button type=\"primary\" v-if=\"store.userInfo\" @click=\"loginOut\"\r\n      >退出登录</a-button\r\n    >\r\n    <div class=\"text-align-left f-title-3 mr-10 mb-10\">当前用户：</div>\r\n    <div class=\"text-align-left pl-40 mb-10\">\r\n      <span class=\"f-title-3 mr-10\">用户名: </span>\r\n      <span class=\"f-title-4\">{{ store.userInfo?.username }}</span>\r\n    </div>\r\n    <div class=\"text-align-left pl-40 mb-30\">\r\n      <span class=\"f-title-3 mr-10\">账号: </span>\r\n      <span class=\"f-title-4\">{{ store.userInfo?.username }}</span>\r\n    </div>\r\n    <a-button type=\"primary\" @click=\"checkIsUserChange\"\r\n      >检查是否用户变化</a-button\r\n    >\r\n    <div class=\"mt-20 mb-40\">{{ isUserChange ? \"用户变化请刷新页面\" : \"用户未变化\" }}</div>\r\n\r\n    <a-button type=\"primary\" @click=\"onUserChange\"\r\n      >开启监听页面切换后用户变化</a-button\r\n    >\r\n    <div class=\"mt-20\">{{ openOnUserChange ? \"已开启\" : \"未开启\" }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { userStore } from \"@/stores/user\";\r\nimport { createVNode, ref } from \"vue\";\r\nimport { ExclamationCircleOutlined } from \"@ant-design/icons-vue\";\r\n\r\nimport { freelogApp } from \"freelog-runtime\";\r\nimport { Modal } from \"ant-design-vue\";\r\nconst isUserChange = ref(false);\r\nconst openOnUserChange = ref(false);\r\nconst store = userStore();\r\nconst login = () => {\r\n  freelogApp.callLogin(() => {\r\n    store.setUserInfo(freelogApp.getCurrentUser());\r\n    // freelogApp.reload()\r\n  });\r\n};\r\nconst checkIsUserChange = () => {\r\n  isUserChange.value = freelogApp.isUserChange();\r\n};\r\nfreelogApp.onLogin(() => {\r\n  console.log(\"login\");\r\n});\r\nconst loginOut = () => {\r\n  freelogApp.callLoginOut();\r\n};\r\nconst onUserChange = () => {\r\n  openOnUserChange.value = true;\r\n  // 监听其余页面切换用户\r\n  freelogApp.onUserChange(() => {\r\n    Modal.warning({\r\n      title: \"将立刻刷新\",\r\n      icon: createVNode(ExclamationCircleOutlined),\r\n      content: \"已在其余页签退出或登录其余账号！\",\r\n      okText: \"确认\",\r\n      onOk() {\r\n        // 主题才有资格整个网页reload，也可以由主题放权给插件\r\n        freelogApp.reload();\r\n      },\r\n    });\r\n  });\r\n};\r\n</script>\r\n","import script from \"./UserLogin.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./UserLogin.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_defineComponent","__name","setup","__props","isUserChange","ref","openOnUserChange","store","userStore","login","freelogApp","callLogin","setUserInfo","getCurrentUser","checkIsUserChange","value","onLogin","console","log","loginOut","callLoginOut","onUserChange","Modal","warning","title","icon","createVNode","ExclamationCircleOutlined","content","okText","onOk","reload","_ctx","_cache","_component_a_button","_resolveComponent","_openBlock","_createElementBlock","_unref","userInfo","_createCommentVNode","_createBlock","key","type","onClick","default","_withCtx","_createTextVNode","_","_toDisplayString","username","_createVNode","__exports__"],"sourceRoot":""}