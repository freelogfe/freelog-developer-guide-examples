"use strict";(self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[]).push([[344],{1344:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});a(7697);var i=a(9832),n=a(7661),r=a(5103),l=a(4016),s=(0,i.pM)({__name:"DepTree",props:{treeData:{}},emits:["select"],setup(e,{emit:t}){const a=e,r=t,l=(e,t)=>{t.node.parent&&r("select",t)};return(e,t)=>{const r=(0,i.g2)("a-tree");return a.treeData?.length?((0,i.uX)(),(0,i.Wv)(r,{key:0,"tree-data":a.treeData,onSelect:l,defaultExpandAll:!0,autoExpandParent:!0},{title:(0,i.k6)((({title:e})=>[(0,i.eW)((0,n.v_)(e),1)])),_:1},8,["tree-data"])):(0,i.Q3)("",!0)}}});const c=s;var d=c;const o={class:"home p-40 y-auto h-100x"},u={class:"h-80 over-h cur-pointer"},p=["src"],h=(0,i.Lk)("div",{class:"f-title-3 m-20"},"点击卡片展示依赖树",-1),v={class:"w-100x flex-column-center over-h"},b={key:0,class:"f-title-3"},m=["src"],f={class:"w-100x flex-column-center h-300 over-h mt-30"},x=(0,i.Lk)("span",{class:"f-title-3"},"依赖信息",-1),k={class:"mt-20"};var g=(0,i.pM)({__name:"ExhibitSub",setup(e){const t=(0,l.KR)(""),a=(0,l.KR)([]),s=(0,l.KR)(""),c=(0,l.KR)([]),g=async e=>{t.value=await r.Kb.getExhibitDepFileStream(e.node.exhibitId,{parentNid:e.node.parentNid,subArticleId:e.node.articleId,returnUrl:!0}),console.log(e,t.value),r.Kb.getExhibitDepInfo(e.node.exhibitId,{articleNids:e.node.parent.node.nid}).then((e=>{s.value=JSON.stringify(e.data.data)}))},E=async e=>{r.Kb.getExhibitInfo(e.exhibitId,{isLoadVersionProperty:1}).then((t=>{let i={};const n=t.data.data.versionInfo.dependencyTree,r=[];n.forEach((t=>{const a={...t,title:t.articleName,key:t.articleId,children:[],parentNid:t.parentNid,exhibitId:e.exhibitId,nid:t.nid};1===t.deep?i=a:(r[t.deep-2]=r[t.deep]||[],r[t.deep-2].push(a))})),r.forEach(((e,t)=>{1===t&&(i.children=[...e]),e.forEach((e=>{r[t+1]&&r[t+1].forEach((t=>{t.parentNid===e.nid&&(e.children=[...e.children,t])}))}))})),console.log(i,r),a.value=[i]}))};return r.Kb.getExhibitListByPaging({skip:0,limit:20,articleResourceTypes:"图片",isLoadVersionProperty:1}).then((e=>{c.value=e.data.data.dataList.filter((e=>"收费图片"!=e.exhibitName))})),(e,r)=>{const l=(0,i.g2)("a-card"),y=(0,i.g2)("a-list-item"),I=(0,i.g2)("a-list");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(I,{grid:{gutter:16,column:4},"data-source":c.value},{renderItem:(0,i.k6)((({item:e})=>[(0,i.bF)(y,null,{default:(0,i.k6)((()=>[(0,i.bF)(l,{title:e.exhibitName,onClick:t=>E(e)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",u,[(0,i.Lk)("img",{class:"h-100x",src:e.coverImages[0],alt:""},null,8,p)])])),_:2},1032,["title","onClick"])])),_:2},1024)])),_:1},8,["data-source"]),h,(0,i.bF)(d,{treeData:a.value,onSelect:g},null,8,["treeData"]),(0,i.Lk)("div",v,[t.value?((0,i.uX)(),(0,i.CE)("img",{key:1,src:t.value,alt:"",class:"w-100x"},null,8,m)):((0,i.uX)(),(0,i.CE)("span",b,"点击子节点展示图片"))]),(0,i.Lk)("div",f,[x,(0,i.Lk)("div",k,(0,n.v_)(s.value),1)])])}}});const E=g;var y=E}}]);
//# sourceMappingURL=344.6daa9573.js.map