{"version":3,"file":"static/js/868.1d708a51.js","mappings":"wOAGA,MAAMA,EAAa,CAAEC,MAAO,6BACtBC,EAAa,CAAED,MAAO,IACtBE,EAAa,CAAEF,MAAO,2BACtBG,EAAa,CAAC,OACdC,EAAa,CAAEJ,MAAO,gDACtBK,EAAa,CACjBC,IAAK,EACLN,MAAO,aAEHO,EAAa,CAAC,OACdC,EAAa,CAAER,MAAO,gDACtBS,GAA0BC,EAAAA,EAAAA,IAAoB,OAAQ,CAAEV,MAAO,aAAe,QAAS,GAiB7F,OAA4BW,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,eACRC,KAAAA,CAAMC,GCYR,MAAMC,GAAOC,EAAAA,EAAAA,IAAI,IACXC,GAASD,EAAAA,EAAAA,IAAI,IACbE,GAAcF,EAAAA,EAAAA,IAAS,IACvBG,GAAQC,EAAAA,EAAAA,MACdC,QAAQC,IAAIH,EAAMI,OAAQ,MAC1B,MAAMC,EAAUA,KACd,MAAMC,EAAMC,EAAAA,GAAWC,YACrBC,KAAKC,MAAMX,EAAYY,OAAOC,UAC9B,WAEFV,QAAQC,IAAIG,EAAKG,KAAKC,MAAMX,EAAYY,QACxC,IAAIE,EAAWC,SAASC,cAAc,YACtCD,SAASE,KAAKC,YAAYJ,GAC1BA,EAASF,MAAQL,EACjBO,EAASK,SACTL,EAASM,QACTL,SAASM,YAAY,QACrBN,SAASE,KAAKK,YAAYR,GAC1BS,EAAAA,GAAQC,QAAQ,cAAc,EAEhChB,EAAAA,GACGiB,uBAAuB,CACtBC,KAAM,EACNC,MAAO,GACPC,qBAAsB,OAEvBC,MAAMC,IACL,MAAMC,EAAaD,EAAIjC,KAAKA,KAAKmC,SAASC,KAAKC,GACtCA,EAAKrB,YAEdL,EAAAA,GACG2B,mBAAmB,CAClBJ,WAAYA,EAAWK,KAAK,OAE7BP,MAAMC,IACLjC,EAAKe,MAAQkB,EAAIjC,KAAKA,KAAKwC,QACxBH,GAA0C,QAApBA,EAAKI,aAC7B,GACD,IAGR,MAAMC,EAAOC,UACXzC,EAAOa,YAAcJ,EAAAA,GAAWiC,qBAAqB5B,EAAW,CAC9D6B,WAAW,IAEblC,EAAAA,GAAWmC,eAAe9B,GAAWgB,MAAMC,IACzC9B,EAAYY,MAAQF,KAAKkC,UAAUd,EAAIjC,KAAKA,KAAK,GACjD,EDJJ,OCMII,EAAMI,OAAOwC,IACfN,EAAKtC,EAAMI,OAAOwC,IDPb,CAACC,EAAUC,KAChB,MAAMC,GAAoBC,EAAAA,EAAAA,IAAkB,UACtCC,GAAyBD,EAAAA,EAAAA,IAAkB,eAC3CE,GAAoBF,EAAAA,EAAAA,IAAkB,UACtCG,GAAsBH,EAAAA,EAAAA,IAAkB,YAE9C,OAAQI,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOzE,EAAY,EAC3DW,EAAAA,EAAAA,IAAoB,MAAOT,EAAY,EACrCwE,EAAAA,EAAAA,IAAaJ,EAAmB,CAC9BK,KAAM,CAAEC,OAAQ,GAAIC,OAAQ,GAC5B,cAAe7D,EAAKe,OACnB,CACD+C,YAAYC,EAAAA,EAAAA,KAAS,EAAG1B,UAAW,EACjCqB,EAAAA,EAAAA,IAAaL,EAAwB,KAAM,CACzCW,SAASD,EAAAA,EAAAA,KAAS,IAAM,EACtBL,EAAAA,EAAAA,IAAaP,EAAmB,CAC9Bc,MAAO5B,EAAKI,YACZyB,QAAUC,GAAiBzB,EAAKL,EAAKrB,YACpC,CACDgD,SAASD,EAAAA,EAAAA,KAAS,IAAM,EACtBpE,EAAAA,EAAAA,IAAoB,MAAOR,EAAY,EACrCQ,EAAAA,EAAAA,IAAoB,MAAO,CACzBV,MAAO,SACPmF,IAAK/B,EAAKgC,YAAY,GACtBC,IAAK,IACJ,KAAM,EAAGlF,QAGhBmF,EAAG,GACF,KAAM,CAAC,QAAS,eAErBA,EAAG,GACF,SAELA,EAAG,GACF,EAAG,CAAC,kBAERrE,EAAOa,QACHyC,EAAAA,EAAAA,OAAcgB,EAAAA,EAAAA,IAAajB,EAAqB,CAC/ChE,IAAK,EACLkF,KAAM,UACNxF,MAAO,QACPiF,QAASzD,GACR,CACDuD,SAASD,EAAAA,EAAAA,KAAS,IAAM,EACtBW,EAAAA,EAAAA,IAAiB,kBAEnBH,EAAG,MAELI,EAAAA,EAAAA,IAAoB,IAAI,IAC5BhF,EAAAA,EAAAA,IAAoB,MAAON,EAAY,CACnCa,EAAOa,QAEJyC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CACxClE,IAAK,EACL6E,IAAKlE,EAAOa,MACZuD,IAAK,GACLrF,MAAO,UACN,KAAM,EAAGO,MANXgE,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQnE,EAAY,mBAQ7DK,EAAAA,EAAAA,IAAoB,MAAOF,EAAY,CACrCC,GACAC,EAAAA,EAAAA,IAAoB,MAAO,MAAMiF,EAAAA,EAAAA,IAAiBzE,EAAYY,OAAQ,MAExE,CAEJ,IEvJA,MAAM8D,EAAc,EAEpB,O","sources":["webpack://vue3-ts-theme-/./src/views/user/ShareExhibit.vue?2e1f","webpack://vue3-ts-theme-/./src/views/user/ShareExhibit.vue","webpack://vue3-ts-theme-/./src/views/user/ShareExhibit.vue?0a39"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-40 w-100x h-100x y-auto\" }\nconst _hoisted_2 = { class: \"\" }\nconst _hoisted_3 = { class: \"h-80 over-h cur-pointer\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"w-100x flex-column-center h-300 over-h mt-30\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"f-title-3\"\n}\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = { class: \"w-100x flex-column-center h-300 over-h mt-30\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"f-title-3\" }, \"展品信息\", -1)\n\nimport { useRoute } from \"vue-router\";\r\nimport {\r\n  freelogApp,\r\n  GetExhibitListByPagingResult,\r\n  ExhibitInfo,\r\n  GetExhibitListByIdResult,\r\n} from \"freelog-runtime\";\r\nimport { ref } from \"vue\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\ninterface DataItem {\r\n  exhibitName: string;\r\n  exhibitTitle: string;\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ShareExhibit',\n  setup(__props) {\n\r\nconst data = ref([] as DataItem[]);\r\nconst imgUrl = ref(\"\");\r\nconst exhibitInfo = ref<any>(\"\");\r\nconst route = useRoute();\r\nconsole.log(route.params, 3333);\r\nconst copyUrl = () => {\r\n  const url = freelogApp.getShareUrl(\r\n    JSON.parse(exhibitInfo.value).exhibitId,\r\n    \"content\"\r\n  );\r\n  console.log(url, JSON.parse(exhibitInfo.value));\r\n  let inputDom = document.createElement(\"textarea\"); // js创建一个文本框\r\n  document.body.appendChild(inputDom); //将文本框暂时创建到实例里面\r\n  inputDom.value = url; //将需要复制的内容赋值到创建的文本框中\r\n  inputDom.select(); //选中文本框中的内容\r\n  inputDom.focus();\r\n  document.execCommand(\"copy\"); //执行复制操作\r\n  document.body.removeChild(inputDom); //最后移出\r\n  message.success(\"复制成功，快去分享吧！\");\r\n};\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"图片\",\r\n  })\r\n  .then((res: GetExhibitListByPagingResult) => {\r\n    const exhibitIds = res.data.data.dataList.map((item: ExhibitInfo) => {\r\n      return item.exhibitId;\r\n    });\r\n    freelogApp\r\n      .getExhibitListById({\r\n        exhibitIds: exhibitIds.join(\",\"),\r\n      })\r\n      .then((res: GetExhibitListByIdResult) => {\r\n        data.value = res.data.data.filter(\r\n          (item: ExhibitInfo) => item.exhibitName != \"收费图片\"\r\n        );\r\n      });\r\n  });\r\n\r\nconst show = async (exhibitId: string) => {\r\n  imgUrl.value = await freelogApp.getExhibitFileStream(exhibitId, {\r\n    returnUrl: true,\r\n  });\r\n  freelogApp.getExhibitInfo(exhibitId).then((res) => {\r\n    exhibitInfo.value = JSON.stringify(res.data.data);\r\n  });\r\n};\r\nif (route.params.id) {\r\n  show(route.params.id as string);\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_list_item = _resolveComponent(\"a-list-item\")!\n  const _component_a_list = _resolveComponent(\"a-list\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_a_list, {\n        grid: { gutter: 16, column: 4 },\n        \"data-source\": data.value\n      }, {\n        renderItem: _withCtx(({ item }) => [\n          _createVNode(_component_a_list_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_card, {\n                title: item.exhibitName,\n                onClick: ($event: any) => (show(item.exhibitId))\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"img\", {\n                      class: \"h-100x\",\n                      src: item.coverImages[0],\n                      alt: \"\"\n                    }, null, 8, _hoisted_4)\n                  ])\n                ]),\n                _: 2\n              }, 1032, [\"title\", \"onClick\"])\n            ]),\n            _: 2\n          }, 1024)\n        ]),\n        _: 1\n      }, 8, [\"data-source\"])\n    ]),\n    (imgUrl.value)\n      ? (_openBlock(), _createBlock(_component_a_button, {\n          key: 0,\n          type: \"primary\",\n          class: \"mt-20\",\n          onClick: copyUrl\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"复制当前图片的分享链接\")\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_5, [\n      (!imgUrl.value)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"点击上面图片可在这展示\"))\n        : (_openBlock(), _createElementBlock(\"img\", {\n            key: 1,\n            src: imgUrl.value,\n            alt: \"\",\n            class: \"h-100x\"\n          }, null, 8, _hoisted_7))\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _hoisted_9,\n      _createElementVNode(\"div\", null, _toDisplayString(exhibitInfo.value), 1)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"p-40 w-100x h-100x y-auto\">\r\n    <div class=\"\">\r\n      <a-list :grid=\"{ gutter: 16, column: 4 }\" :data-source=\"data\">\r\n        <template #renderItem=\"{ item }\">\r\n          <a-list-item>\r\n            <a-card :title=\"item.exhibitName\" @click=\"show(item.exhibitId)\">\r\n              <div class=\"h-80 over-h cur-pointer\">\r\n                <img class=\"h-100x\" :src=\"item.coverImages[0]\" alt=\"\" />\r\n              </div>\r\n            </a-card>\r\n          </a-list-item>\r\n        </template>\r\n      </a-list>\r\n    </div>\r\n    <a-button type=\"primary\" class=\"mt-20\" v-if=\"imgUrl\" @click=\"copyUrl\"\r\n      >复制当前图片的分享链接</a-button\r\n    >\r\n\r\n    <div class=\"w-100x flex-column-center h-300 over-h mt-30\">\r\n      <span v-if=\"!imgUrl\" class=\"f-title-3\">点击上面图片可在这展示</span>\r\n      <img :src=\"imgUrl\" alt=\"\" v-else class=\"h-100x\" />\r\n    </div>\r\n    <div class=\"w-100x flex-column-center h-300 over-h mt-30\">\r\n      <span class=\"f-title-3\">展品信息</span>\r\n      <div>{{ exhibitInfo }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useRoute } from \"vue-router\";\r\nimport {\r\n  freelogApp,\r\n  GetExhibitListByPagingResult,\r\n  ExhibitInfo,\r\n  GetExhibitListByIdResult,\r\n} from \"freelog-runtime\";\r\nimport { ref } from \"vue\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\ninterface DataItem {\r\n  exhibitName: string;\r\n  exhibitTitle: string;\r\n}\r\nconst data = ref([] as DataItem[]);\r\nconst imgUrl = ref(\"\");\r\nconst exhibitInfo = ref<any>(\"\");\r\nconst route = useRoute();\r\nconsole.log(route.params, 3333);\r\nconst copyUrl = () => {\r\n  const url = freelogApp.getShareUrl(\r\n    JSON.parse(exhibitInfo.value).exhibitId,\r\n    \"content\"\r\n  );\r\n  console.log(url, JSON.parse(exhibitInfo.value));\r\n  let inputDom = document.createElement(\"textarea\"); // js创建一个文本框\r\n  document.body.appendChild(inputDom); //将文本框暂时创建到实例里面\r\n  inputDom.value = url; //将需要复制的内容赋值到创建的文本框中\r\n  inputDom.select(); //选中文本框中的内容\r\n  inputDom.focus();\r\n  document.execCommand(\"copy\"); //执行复制操作\r\n  document.body.removeChild(inputDom); //最后移出\r\n  message.success(\"复制成功，快去分享吧！\");\r\n};\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"图片\",\r\n  })\r\n  .then((res: GetExhibitListByPagingResult) => {\r\n    const exhibitIds = res.data.data.dataList.map((item: ExhibitInfo) => {\r\n      return item.exhibitId;\r\n    });\r\n    freelogApp\r\n      .getExhibitListById({\r\n        exhibitIds: exhibitIds.join(\",\"),\r\n      })\r\n      .then((res: GetExhibitListByIdResult) => {\r\n        data.value = res.data.data.filter(\r\n          (item: ExhibitInfo) => item.exhibitName != \"收费图片\"\r\n        );\r\n      });\r\n  });\r\n\r\nconst show = async (exhibitId: string) => {\r\n  imgUrl.value = await freelogApp.getExhibitFileStream(exhibitId, {\r\n    returnUrl: true,\r\n  });\r\n  freelogApp.getExhibitInfo(exhibitId).then((res) => {\r\n    exhibitInfo.value = JSON.stringify(res.data.data);\r\n  });\r\n};\r\nif (route.params.id) {\r\n  show(route.params.id as string);\r\n}\r\n</script>\r\n","import script from \"./ShareExhibit.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ShareExhibit.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","key","_hoisted_7","_hoisted_8","_hoisted_9","_createElementVNode","_defineComponent","__name","setup","__props","data","ref","imgUrl","exhibitInfo","route","useRoute","console","log","params","copyUrl","url","freelogApp","getShareUrl","JSON","parse","value","exhibitId","inputDom","document","createElement","body","appendChild","select","focus","execCommand","removeChild","message","success","getExhibitListByPaging","skip","limit","articleResourceTypes","then","res","exhibitIds","dataList","map","item","getExhibitListById","join","filter","exhibitName","show","async","getExhibitFileStream","returnUrl","getExhibitInfo","stringify","id","_ctx","_cache","_component_a_card","_resolveComponent","_component_a_list_item","_component_a_list","_component_a_button","_openBlock","_createElementBlock","_createVNode","grid","gutter","column","renderItem","_withCtx","default","title","onClick","$event","src","coverImages","alt","_","_createBlock","type","_createTextVNode","_createCommentVNode","_toDisplayString","__exports__"],"sourceRoot":""}