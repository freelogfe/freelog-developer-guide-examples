{"version":3,"file":"static/js/69.7e17b16a.js","mappings":"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","sources":["webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitData.vue?56c7","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitData.vue","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitData.vue?19b9"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-40 w-100x h-100x y-auto\" }\nconst _hoisted_2 = { class: \"\" }\nconst _hoisted_3 = { class: \"h-80 over-h\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { id: \"freelog-game\" }, null, -1)\n\nimport {\r\n  freelogApp,\r\n  ExhibitInfo,\r\n  WidgetController,\r\n  GetExhibitListByPagingResult,\r\n} from \"freelog-runtime\";\r\nimport { ref, onBeforeUnmount } from \"vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ExhibitData',\n  setup(__props) {\n\r\nconst exhibitWidgetApi = ref({} as any);\r\n\r\nlet exhibitWidget: WidgetController = {} as WidgetController;\r\n\r\nconst data = ref([] as ExhibitInfo[]);\r\nconst gameUrl = ref(\"\");\r\nconst gameName = ref(\"\");\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"nesrom,红白机\",\r\n  })\r\n  .then(async (res: GetExhibitListByPagingResult) => {\r\n    data.value = res.data.data.dataList;\r\n    gameName.value = data.value[0].exhibitName;\r\n    gameUrl.value = await freelogApp.getExhibitFileStream(\r\n      data.value[0].exhibitId,\r\n      {\r\n        returnUrl: true,\r\n      }\r\n    );\r\n    console.log(gameUrl.value, gameName.value);\r\n    mountExhibitWidget(gameUrl.value, gameName.value);\r\n  });\r\nconst show = async (data: ExhibitInfo) => {\r\n  gameName.value = data.exhibitName;\r\n  gameUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\r\n    returnUrl: true,\r\n  });\r\n  exhibitWidgetApi.value.startGame(gameUrl.value, gameName.value);\r\n};\r\n// 离开记得卸载插件喔\r\nonBeforeUnmount(() => {\r\n  exhibitWidget?.unmount();\r\n});\r\nconst mountExhibitWidget = async (url: string, name: string) => {\r\n  const res: GetExhibitListByPagingResult =\r\n    await freelogApp.getExhibitListByPaging({\r\n      articleResourceTypes: \"插件\",\r\n      isLoadVersionProperty: 1,\r\n    });\r\n  const widgets = res.data.data.dataList;\r\n  widgets.forEach(async (widget: ExhibitInfo) => {\r\n    if (widget.exhibitName === \"nes-widget\") {\r\n      // widget.exhibitId = widget.exhibitId + '111'\r\n      exhibitWidget = await freelogApp.mountExhibitWidget({\r\n        exhibitId: widget.exhibitId,\r\n        container: document.getElementById(\"freelog-game\") as HTMLElement, // 必传，自定义一个让插件挂载的div容器\r\n        renderWidgetOptions: {\r\n          data: {\r\n            defaultGameUrl: url,\r\n            defaultGameName: name,\r\n            registerApi: (api: any) => {\r\n              exhibitWidgetApi.value = api;\r\n            },\r\n          },\r\n        },\r\n        seq: undefined, // 如果要用多个同样的子插件需要传递序号，可以考虑与其余节点插件避免相同的序号, 注意用户数据是根据插件id+序号保存的。\r\n        widget_entry: \"https://localhost:8203\", // 本地url，dev模式下，可以使用本地url调试子插件\r\n      });\r\n    }\r\n  });\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_list_item = _resolveComponent(\"a-list-item\")!\n  const _component_a_list = _resolveComponent(\"a-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_a_list, {\n        grid: { gutter: 16, column: 4 },\n        \"data-source\": data.value\n      }, {\n        renderItem: _withCtx(({ item }) => [\n          _createVNode(_component_a_list_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_card, {\n                title: item.exhibitName,\n                onClick: ($event: any) => (show(item)),\n                class: _normalizeClass([item.exhibitName === gameName.value ? 'selected' : ''])\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"img\", {\n                      class: \"h-100x\",\n                      src: item.coverImages[0],\n                      alt: \"\"\n                    }, null, 8, _hoisted_4)\n                  ])\n                ]),\n                _: 2\n              }, 1032, [\"title\", \"onClick\", \"class\"])\n            ]),\n            _: 2\n          }, 1024)\n        ]),\n        _: 1\n      }, 8, [\"data-source\"])\n    ]),\n    _hoisted_5\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"p-40 w-100x h-100x y-auto\">\r\n    <div class=\"\">\r\n      <a-list :grid=\"{ gutter: 16, column: 4 }\" :data-source=\"data\">\r\n        <template #renderItem=\"{ item }\">\r\n          <a-list-item>\r\n            <a-card\r\n              :title=\"item.exhibitName\"\r\n              @click=\"show(item)\"\r\n              :class=\"[item.exhibitName === gameName ? 'selected' : '']\"\r\n            >\r\n              <div class=\"h-80 over-h\">\r\n                <img class=\"h-100x\" :src=\"item.coverImages[0]\" alt=\"\" />\r\n              </div>\r\n            </a-card>\r\n          </a-list-item>\r\n        </template>\r\n      </a-list>\r\n    </div>\r\n    <div id=\"freelog-game\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport {\r\n  freelogApp,\r\n  ExhibitInfo,\r\n  WidgetController,\r\n  GetExhibitListByPagingResult,\r\n} from \"freelog-runtime\";\r\nimport { ref, onBeforeUnmount } from \"vue\";\r\nconst exhibitWidgetApi = ref({} as any);\r\n\r\nlet exhibitWidget: WidgetController = {} as WidgetController;\r\n\r\nconst data = ref([] as ExhibitInfo[]);\r\nconst gameUrl = ref(\"\");\r\nconst gameName = ref(\"\");\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"nesrom,红白机\",\r\n  })\r\n  .then(async (res: GetExhibitListByPagingResult) => {\r\n    data.value = res.data.data.dataList;\r\n    gameName.value = data.value[0].exhibitName;\r\n    gameUrl.value = await freelogApp.getExhibitFileStream(\r\n      data.value[0].exhibitId,\r\n      {\r\n        returnUrl: true,\r\n      }\r\n    );\r\n    console.log(gameUrl.value, gameName.value);\r\n    mountExhibitWidget(gameUrl.value, gameName.value);\r\n  });\r\nconst show = async (data: ExhibitInfo) => {\r\n  gameName.value = data.exhibitName;\r\n  gameUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\r\n    returnUrl: true,\r\n  });\r\n  exhibitWidgetApi.value.startGame(gameUrl.value, gameName.value);\r\n};\r\n// 离开记得卸载插件喔\r\nonBeforeUnmount(() => {\r\n  exhibitWidget?.unmount();\r\n});\r\nconst mountExhibitWidget = async (url: string, name: string) => {\r\n  const res: GetExhibitListByPagingResult =\r\n    await freelogApp.getExhibitListByPaging({\r\n      articleResourceTypes: \"插件\",\r\n      isLoadVersionProperty: 1,\r\n    });\r\n  const widgets = res.data.data.dataList;\r\n  widgets.forEach(async (widget: ExhibitInfo) => {\r\n    if (widget.exhibitName === \"nes-widget\") {\r\n      // widget.exhibitId = widget.exhibitId + '111'\r\n      exhibitWidget = await freelogApp.mountExhibitWidget({\r\n        exhibitId: widget.exhibitId,\r\n        container: document.getElementById(\"freelog-game\") as HTMLElement, // 必传，自定义一个让插件挂载的div容器\r\n        renderWidgetOptions: {\r\n          data: {\r\n            defaultGameUrl: url,\r\n            defaultGameName: name,\r\n            registerApi: (api: any) => {\r\n              exhibitWidgetApi.value = api;\r\n            },\r\n          },\r\n        },\r\n        seq: undefined, // 如果要用多个同样的子插件需要传递序号，可以考虑与其余节点插件避免相同的序号, 注意用户数据是根据插件id+序号保存的。\r\n        widget_entry: \"https://localhost:8203\", // 本地url，dev模式下，可以使用本地url调试子插件\r\n      });\r\n    }\r\n  });\r\n};\r\n</script>\r\n<style>\r\n.selected {\r\n  background-color: lightblue;\r\n}\r\n</style>\r\n","import script from \"./ExhibitData.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ExhibitData.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ExhibitData.vue?vue&type=style&index=0&id=2a372305&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","id","_defineComponent","__name","setup","__props","exhibitWidgetApi","ref","exhibitWidget","data","gameUrl","gameName","freelogApp","getExhibitListByPaging","skip","limit","articleResourceTypes","then","async","value","res","dataList","exhibitName","getExhibitFileStream","exhibitId","returnUrl","console","log","mountExhibitWidget","show","startGame","onBeforeUnmount","unmount","url","name","isLoadVersionProperty","widgets","forEach","widget","container","document","getElementById","renderWidgetOptions","defaultGameUrl","defaultGameName","registerApi","api","seq","undefined","widget_entry","_ctx","_cache","_component_a_card","_resolveComponent","_component_a_list_item","_component_a_list","_openBlock","_createElementBlock","_createVNode","grid","gutter","column","renderItem","_withCtx","item","default","title","onClick","$event","_normalizeClass","src","coverImages","alt","_","__exports__"],"sourceRoot":""}