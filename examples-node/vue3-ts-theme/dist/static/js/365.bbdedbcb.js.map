{"version":3,"file":"static/js/365.bbdedbcb.js","mappings":"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","sources":["webpack://vue3-ts-theme-/./src/views/exhibit/_components/DepTree.vue?a5c7","webpack://vue3-ts-theme-/./src/views/exhibit/_components/DepTree.vue","webpack://vue3-ts-theme-/./src/views/exhibit/_components/DepTree.vue?68b5","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitSub.vue?8ffc","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitSub.vue","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitSub.vue?8141"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nimport type { TreeProps } from \"ant-design-vue\";\r\nimport { ref, watch } from \"vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'DepTree',\n  props: {\n    treeData: {}\n  },\n  emits: [\"select\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props;\r\nconst emit = __emit;\r\nconst onSelect = (key: any, info) => {\r\n  if (info.node.parent) {\r\n    emit(\"select\", info);\r\n  }\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_tree = _resolveComponent(\"a-tree\")!\n\n  return (props.treeData?.length)\n    ? (_openBlock(), _createBlock(_component_a_tree, {\n        key: 0,\n        \"tree-data\": props.treeData,\n        onSelect: onSelect,\n        defaultExpandAll: true,\n        autoExpandParent: true\n      }, {\n        title: _withCtx(({ title }) => [\n          _createTextVNode(_toDisplayString(title), 1)\n        ]),\n        _: 1\n      }, 8, [\"tree-data\"]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","<template>\r\n  <a-tree\r\n    :tree-data=\"props.treeData\"\r\n    @select=\"onSelect\"\r\n    :defaultExpandAll=\"true\"\r\n    :autoExpandParent=\"true\"\r\n    v-if=\"props.treeData?.length\"\r\n  >\r\n    <template #title=\"{ title }\">\r\n      {{ title }}\r\n    </template>\r\n  </a-tree>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport type { TreeProps } from \"ant-design-vue\";\r\nimport { ref, watch } from \"vue\";\r\nconst props = defineProps<{\r\n  treeData: TreeProps[\"treeData\"];\r\n}>();\r\nconst emit = defineEmits<{\r\n  select: [data: any]; // 具名元组语法\r\n}>();\r\nconst onSelect = (key: any, info) => {\r\n  if (info.node.parent) {\r\n    emit(\"select\", info);\r\n  }\r\n};\r\n</script>\r\n","import script from \"./DepTree.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./DepTree.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"home p-40 y-auto h-100x\" }\nconst _hoisted_2 = { class: \"h-80 over-h cur-pointer\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"f-title-3 m-20\" }, \"点击卡片展示依赖树\", -1)\nconst _hoisted_5 = { class: \"w-100x flex-column-center over-h\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"f-title-3\"\n}\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = { class: \"w-100x flex-column-center h-300 over-h mt-30\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"f-title-3\" }, \"依赖信息\", -1)\nconst _hoisted_10 = { class: \"mt-20\" }\n\nimport { freelogApp } from \"freelog-runtime\";\r\nimport { ref } from \"vue\";\r\nimport DepTree from \"./_components/DepTree.vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ExhibitSub',\n  setup(__props) {\n\r\nconst imgUrl = ref(\"\");\r\n\r\nconst treeData = ref([] as any[]);\r\nconst exhibitInfo = ref(\"\");\r\nconst data = ref([] as any[]);\r\nconst show = async (node: any) => {\r\n  // 顶级的展品id，当前资源的父资源的nid，当前资源的资源id\r\n  imgUrl.value = await freelogApp.getExhibitDepFileStream(node.node.exhibitId, {\r\n    parentNid: node.node.parent.node.nid,\r\n    subArticleId: node.node.resourceId,\r\n    returnUrl: true,\r\n  });\r\n  freelogApp\r\n    .getExhibitDepInfo(node.node.exhibitId, {\r\n      articleNids: node.node.parent.node.nid,\r\n    })\r\n    .then((res) => {\r\n      exhibitInfo.value = JSON.stringify(res.data?.data);\r\n    });\r\n};\r\nconst showTree = async (exhibit: any) => {\r\n  // exhibit.data.data.dataList.forEach((exhibit: any) => {\r\n  freelogApp\r\n    .getExhibitDepTree(exhibit.exhibitId, {\r\n      // isContainRootNode: false,\r\n      maxDeep: 10,\r\n    })\r\n    .then((res: any) => {\r\n      const obj = { ...res.data.data[0], exhibitId: exhibit.exhibitId };\r\n      obj.title = obj.resourceName;\r\n      obj.key = obj.resourceId;\r\n      function deep(data: any, top: any) {\r\n        if (data?.length) {\r\n          data.forEach((item: any) => {\r\n            const next = {\r\n              ...item,\r\n              title: item.resourceName,\r\n              key: item.resourceId,\r\n              exhibitId: exhibit.exhibitId,\r\n            };\r\n            top.children = top.children || [];\r\n            top.children.push(next);\r\n            deep(next.dependencies, next);\r\n          });\r\n        }\r\n      }\r\n      deep(res.data.data[0].dependencies, obj);\r\n      treeData.value = [obj];\r\n    });\r\n  // });\r\n};\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"图片\",\r\n  })\r\n  .then((res: any) => {\r\n    data.value = res.data.data.dataList.filter(\r\n      (item: any) => item.exhibitName != \"收费图片\"\r\n    );\r\n  });\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_list_item = _resolveComponent(\"a-list-item\")!\n  const _component_a_list = _resolveComponent(\"a-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_a_list, {\n      grid: { gutter: 16, column: 4 },\n      \"data-source\": data.value\n    }, {\n      renderItem: _withCtx(({ item }) => [\n        _createVNode(_component_a_list_item, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_a_card, {\n              title: item.exhibitName,\n              onClick: ($event: any) => (showTree(item))\n            }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_2, [\n                  _createElementVNode(\"img\", {\n                    class: \"h-100x\",\n                    src: item.coverImages[0],\n                    alt: \"\"\n                  }, null, 8, _hoisted_3)\n                ])\n              ]),\n              _: 2\n            }, 1032, [\"title\", \"onClick\"])\n          ]),\n          _: 2\n        }, 1024)\n      ]),\n      _: 1\n    }, 8, [\"data-source\"]),\n    _hoisted_4,\n    _createVNode(DepTree, {\n      treeData: treeData.value,\n      onSelect: show\n    }, null, 8, [\"treeData\"]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      (!imgUrl.value)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"点击子节点展示图片\"))\n        : (_openBlock(), _createElementBlock(\"img\", {\n            key: 1,\n            src: imgUrl.value,\n            alt: \"\",\n            class: \"w-100x\"\n          }, null, 8, _hoisted_7))\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _hoisted_9,\n      _createElementVNode(\"div\", _hoisted_10, _toDisplayString(exhibitInfo.value), 1)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"home p-40 y-auto h-100x\">\r\n    <a-list :grid=\"{ gutter: 16, column: 4 }\" :data-source=\"data\">\r\n      <template #renderItem=\"{ item }\">\r\n        <a-list-item>\r\n          <a-card :title=\"item.exhibitName\" @click=\"showTree(item)\">\r\n            <div class=\"h-80 over-h cur-pointer\">\r\n              <img class=\"h-100x\" :src=\"item.coverImages[0]\" alt=\"\" />\r\n            </div>\r\n          </a-card>\r\n        </a-list-item>\r\n      </template>\r\n    </a-list>\r\n    <div class=\"f-title-3 m-20\">点击卡片展示依赖树</div>\r\n    <DepTree :treeData=\"treeData\" @select=\"show\" />\r\n    <div class=\"w-100x flex-column-center over-h\">\r\n      <span v-if=\"!imgUrl\" class=\"f-title-3\">点击子节点展示图片</span>\r\n      <img :src=\"imgUrl\" alt=\"\" v-else class=\"w-100x\" />\r\n    </div>\r\n    <div class=\"w-100x flex-column-center h-300 over-h mt-30\">\r\n      <span class=\"f-title-3\">依赖信息</span>\r\n      <div class=\"mt-20\">{{ exhibitInfo }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { freelogApp } from \"freelog-runtime\";\r\nimport { ref } from \"vue\";\r\nimport DepTree from \"./_components/DepTree.vue\";\r\nconst imgUrl = ref(\"\");\r\n\r\nconst treeData = ref([] as any[]);\r\nconst exhibitInfo = ref(\"\");\r\nconst data = ref([] as any[]);\r\nconst show = async (node: any) => {\r\n  // 顶级的展品id，当前资源的父资源的nid，当前资源的资源id\r\n  imgUrl.value = await freelogApp.getExhibitDepFileStream(node.node.exhibitId, {\r\n    parentNid: node.node.parent.node.nid,\r\n    subArticleId: node.node.resourceId,\r\n    returnUrl: true,\r\n  });\r\n  freelogApp\r\n    .getExhibitDepInfo(node.node.exhibitId, {\r\n      articleNids: node.node.parent.node.nid,\r\n    })\r\n    .then((res) => {\r\n      exhibitInfo.value = JSON.stringify(res.data?.data);\r\n    });\r\n};\r\nconst showTree = async (exhibit: any) => {\r\n  // exhibit.data.data.dataList.forEach((exhibit: any) => {\r\n  freelogApp\r\n    .getExhibitDepTree(exhibit.exhibitId, {\r\n      // isContainRootNode: false,\r\n      maxDeep: 10,\r\n    })\r\n    .then((res: any) => {\r\n      const obj = { ...res.data.data[0], exhibitId: exhibit.exhibitId };\r\n      obj.title = obj.resourceName;\r\n      obj.key = obj.resourceId;\r\n      function deep(data: any, top: any) {\r\n        if (data?.length) {\r\n          data.forEach((item: any) => {\r\n            const next = {\r\n              ...item,\r\n              title: item.resourceName,\r\n              key: item.resourceId,\r\n              exhibitId: exhibit.exhibitId,\r\n            };\r\n            top.children = top.children || [];\r\n            top.children.push(next);\r\n            deep(next.dependencies, next);\r\n          });\r\n        }\r\n      }\r\n      deep(res.data.data[0].dependencies, obj);\r\n      treeData.value = [obj];\r\n    });\r\n  // });\r\n};\r\nfreelogApp\r\n  .getExhibitListByPaging({\r\n    skip: 0,\r\n    limit: 20,\r\n    articleResourceTypes: \"图片\",\r\n  })\r\n  .then((res: any) => {\r\n    data.value = res.data.data.dataList.filter(\r\n      (item: any) => item.exhibitName != \"收费图片\"\r\n    );\r\n  });\r\n</script>\r\n","import script from \"./ExhibitSub.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ExhibitSub.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_defineComponent","__name","props","treeData","emits","setup","__props","emit","__emit","onSelect","key","info","node","parent","_ctx","_cache","_component_a_tree","_resolveComponent","length","_openBlock","_createBlock","defaultExpandAll","autoExpandParent","title","_withCtx","_createTextVNode","_toDisplayString","_","_createCommentVNode","__exports__","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","imgUrl","ref","exhibitInfo","data","show","async","value","freelogApp","getExhibitDepFileStream","exhibitId","parentNid","nid","subArticleId","resourceId","returnUrl","getExhibitDepInfo","articleNids","then","res","JSON","stringify","showTree","getExhibitDepTree","exhibit","maxDeep","obj","deep","top","forEach","item","next","resourceName","children","push","dependencies","getExhibitListByPaging","skip","limit","articleResourceTypes","dataList","filter","exhibitName","_component_a_card","_component_a_list_item","_component_a_list","_createElementBlock","_createVNode","grid","gutter","column","renderItem","default","onClick","$event","src","coverImages","alt","DepTree"],"sourceRoot":""}