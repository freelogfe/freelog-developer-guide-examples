{"version":3,"file":"static/js/821.391f28b7.js","mappings":"0MAGA,MAAMA,EAAa,CAAEC,MAAO,6BACtBC,EAAa,CAAED,MAAO,IACtBE,EAAa,CAAEF,MAAO,eACtBG,EAAa,CAAC,OACdC,EAAa,CAAEJ,MAAO,gDACtBK,EAAa,CACjBC,IAAK,EACLN,MAAO,aAEHO,EAAa,CAAC,OASpB,OAA4B,QAAiB,CAC3CC,OAAQ,WACR,KAAAC,CAAMC,GCMR,MAAMC,GAAO,QAAI,IACXC,GAAS,QAAI,IAEnB,EAAAC,WAAA,uBAC0B,CACtBC,KAAM,EACNC,MAAO,GACPC,qBAAsB,OAEvBC,MAAMC,IACL,IAAIC,EAAM,GAEVD,EAAIP,KAAKA,KAAKS,SAASC,SAASC,IAC9BH,EAAII,KAAKD,EAAQE,UAAU,IAG7B,EAAAX,WAAA,qBAAgCM,EAAIM,KAAK,MAAMR,MAAMS,IACnDf,EAAKgB,MAAQT,EAAIP,KAAKA,KAAKS,SAASQ,KAAKC,IACvCH,EAAKf,KAAKA,KAAKmB,MAAMC,GACfA,EAAGP,YAAcK,EAAKL,YACxBK,EAAKH,KAAOK,GACL,KAIJF,IACP,GACF,IAEN,MAAMG,EAAOC,UACPtB,EAAKe,KAAKQ,OACZtB,EAAOe,YAAc,EAAAd,WAAA,qBAAgCF,EAAKa,UAAW,CACnEW,WAAW,IAIb,EAAAtB,WAAA,QACWF,EAAKa,UAAW,CACvBY,WAAW,IAEZnB,MAAKgB,UACAI,EAAOC,SAAW,EAAAzB,WAAA,qBACpBD,EAAOe,YAAc,EAAAd,WAAA,qBAAgCF,EAAKa,UAAW,CACnEW,WAAW,IAEd,GAEN,EDDH,MAAO,CAACI,EAAUC,KAChB,MAAMC,GAAoB,QAAkB,UACtCC,GAAyB,QAAkB,eAC3CC,GAAoB,QAAkB,UAE5C,OAAQ,WAAc,QAAoB,MAAO5C,EAAY,EAC3D,IAAA6C,GAAoB,MAAO3C,EAAY,EACrC,QAAa0C,EAAmB,CAC9BE,KAAM,CAAEC,OAAQ,GAAIC,OAAQ,GAC5B,cAAepC,EAAKgB,OACnB,CACDqB,YAAY,SAAS,EAAGnB,UAAW,EACjC,QAAaa,EAAwB,KAAM,CACzCO,SAAS,SAAS,IAAM,EACtB,QAAaR,EAAmB,CAC9BS,MAAOrB,EAAKsB,YACZC,QAAUC,GAAiBrB,EAAKH,IAC/B,CACDoB,SAAS,SAAS,IAAM,EACtB,IAAAL,GAAoB,MAAO1C,EAAY,EACrC,IAAA0C,GAAoB,MAAO,CACzB5C,MAAO,SACPsD,IAAKzB,EAAK0B,YAAY,GACtBC,IAAK,IACJ,KAAM,EAAGrD,QAGhByC,EAAG,GACF,KAAM,CAAC,QAAS,eAErBA,EAAG,GACF,SAELA,EAAG,GACF,EAAG,CAAC,mBAET,IAAAA,GAAoB,MAAOxC,EAAY,CACnCQ,EAAOe,QAEJ,WAAc,QAAoB,MAAO,CACxCrB,IAAK,EACLgD,IAAK1C,EAAOe,MACZ6B,IAAK,GACLxD,MAAO,UACN,KAAM,EAAGO,MANX,WAAc,QAAoB,OAAQF,EAAY,mBAQ7D,CAEJ,IExHA,MAAMoD,EAAc,EAEpB,O","sources":["webpack://vue3-ts-theme-[name]/./src/views/auth/AuthInfo.vue?2b13","webpack://vue3-ts-theme-[name]/./src/views/auth/AuthInfo.vue","webpack://vue3-ts-theme-[name]/./src/views/auth/AuthInfo.vue?a261"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-40 w-100x h-100x y-auto\" }\nconst _hoisted_2 = { class: \"\" }\nconst _hoisted_3 = { class: \"h-80 over-h\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"w-100x flex-column-center h-400 over-h mt-40\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"f-title-3\"\n}\nconst _hoisted_7 = [\"src\"]\n\nimport { freelogApp } from \"freelog-runtime\";\nimport { ref } from \"vue\";\ninterface DataItem {\n  exhibitName: string;\n  exhibitTitle: string;\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AuthInfo',\n  setup(__props) {\n\nconst data = ref([] as DataItem[]);\nconst imgUrl = ref(\"\");\n// 获取展品列表\nfreelogApp\n  .getExhibitListByPaging({\n    skip: 0,\n    limit: 20,\n    articleResourceTypes: \"图片\",\n  })\n  .then((res: any) => {\n    let arr = [] as string[];\n\n    res.data.data.dataList.forEach((element: any) => {\n      arr.push(element.exhibitId);\n    });\n    // 查询是否拥有授权\n    freelogApp.getExhibitAuthStatus(arr.join(\",\")).then((auth: any) => {\n      data.value = res.data.data.dataList.map((item: any) => {\n        auth.data.data.some((au: any) => {\n          if (au.exhibitId === item.exhibitId) {\n            item.auth = au;\n            return true;\n          }\n          return false;\n        });\n        return item;\n      });\n    });\n  });\nconst show = async (data: any) => {\n  if (data.auth.isAuth) {\n    imgUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\n      returnUrl: true,\n    });\n  } else {\n    // 没有授权\n    freelogApp\n      .addAuth(data.exhibitId, {\n        immediate: true,\n      })\n      .then(async (result: any) => {\n        if (result.status === freelogApp.resultType.SUCCESS) {\n          imgUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\n            returnUrl: true,\n          });\n        }\n      });\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_list_item = _resolveComponent(\"a-list-item\")!\n  const _component_a_list = _resolveComponent(\"a-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_a_list, {\n        grid: { gutter: 16, column: 4 },\n        \"data-source\": data.value\n      }, {\n        renderItem: _withCtx(({ item }) => [\n          _createVNode(_component_a_list_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_card, {\n                title: item.exhibitName,\n                onClick: ($event: any) => (show(item))\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"img\", {\n                      class: \"h-100x\",\n                      src: item.coverImages[0],\n                      alt: \"\"\n                    }, null, 8, _hoisted_4)\n                  ])\n                ]),\n                _: 2\n              }, 1032, [\"title\", \"onClick\"])\n            ]),\n            _: 2\n          }, 1024)\n        ]),\n        _: 1\n      }, 8, [\"data-source\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      (!imgUrl.value)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"点击上面图片可在这展示\"))\n        : (_openBlock(), _createElementBlock(\"img\", {\n            key: 1,\n            src: imgUrl.value,\n            alt: \"\",\n            class: \"h-100x\"\n          }, null, 8, _hoisted_7))\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"p-40 w-100x h-100x y-auto\">\n    <div class=\"\">\n      <a-list :grid=\"{ gutter: 16, column: 4 }\" :data-source=\"data\">\n        <template #renderItem=\"{ item }\">\n          <a-list-item>\n            <a-card :title=\"item.exhibitName\" @click=\"show(item)\">\n              <div class=\"h-80 over-h\">\n                <img class=\"h-100x\" :src=\"item.coverImages[0]\" alt=\"\" />\n              </div>\n            </a-card>\n          </a-list-item>\n        </template>\n      </a-list>\n    </div>\n    <div class=\"w-100x flex-column-center h-400 over-h mt-40\">\n      <span v-if=\"!imgUrl\" class=\"f-title-3\">点击上面图片可在这展示</span>\n      <img :src=\"imgUrl\" alt=\"\" v-else class=\"h-100x\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { freelogApp } from \"freelog-runtime\";\nimport { ref } from \"vue\";\ninterface DataItem {\n  exhibitName: string;\n  exhibitTitle: string;\n}\nconst data = ref([] as DataItem[]);\nconst imgUrl = ref(\"\");\n// 获取展品列表\nfreelogApp\n  .getExhibitListByPaging({\n    skip: 0,\n    limit: 20,\n    articleResourceTypes: \"图片\",\n  })\n  .then((res: any) => {\n    let arr = [] as string[];\n\n    res.data.data.dataList.forEach((element: any) => {\n      arr.push(element.exhibitId);\n    });\n    // 查询是否拥有授权\n    freelogApp.getExhibitAuthStatus(arr.join(\",\")).then((auth: any) => {\n      data.value = res.data.data.dataList.map((item: any) => {\n        auth.data.data.some((au: any) => {\n          if (au.exhibitId === item.exhibitId) {\n            item.auth = au;\n            return true;\n          }\n          return false;\n        });\n        return item;\n      });\n    });\n  });\nconst show = async (data: any) => {\n  if (data.auth.isAuth) {\n    imgUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\n      returnUrl: true,\n    });\n  } else {\n    // 没有授权\n    freelogApp\n      .addAuth(data.exhibitId, {\n        immediate: true,\n      })\n      .then(async (result: any) => {\n        if (result.status === freelogApp.resultType.SUCCESS) {\n          imgUrl.value = await freelogApp.getExhibitFileStream(data.exhibitId, {\n            returnUrl: true,\n          });\n        }\n      });\n  }\n};\n</script>\n","import script from \"./AuthInfo.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./AuthInfo.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","key","_hoisted_7","__name","setup","__props","data","imgUrl","freelogApp","skip","limit","articleResourceTypes","then","res","arr","dataList","forEach","element","push","exhibitId","join","auth","value","map","item","some","au","show","async","isAuth","returnUrl","immediate","result","status","_ctx","_cache","_component_a_card","_component_a_list_item","_component_a_list","_","grid","gutter","column","renderItem","default","title","exhibitName","onClick","$event","src","coverImages","alt","__exports__"],"sourceRoot":""}