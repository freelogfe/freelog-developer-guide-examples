{"version":3,"file":"static/js/243.5218dae9.js","mappings":"oNAGA,MAAMA,EAAa,CAAEC,MAAO,6BACtBC,EAAa,CAAED,MAAO,IACtBE,EAAa,CAAEF,MAAO,eACtBG,EAAa,CAAC,OACdC,GAA0BC,EAAAA,EAAAA,GAAoB,MAAO,CAAEC,GAAI,gBAAkB,MAAO,GAM1F,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,cACRC,MAAMC,GAER,IAAIC,EAAqB,KAEzB,MAAMC,GAAOC,EAAAA,EAAAA,IAAI,IACXC,GAAWD,EAAAA,EAAAA,IAAI,IACfE,GAASF,EAAAA,EAAAA,IAAI,IACnBG,EAAAA,WACGC,uBAAuB,CACtBC,KAAM,EACNC,MAAO,GACPC,qBAAsB,eAEvBC,MAAMC,IACLV,EAAKW,MAAQD,EAAIV,KAAKA,KAAKY,SAC3BV,EAASS,MAAQX,EAAKW,MAAM,GAAGE,YAC/BV,EAAOQ,MAAQX,EAAKW,MAAM,GAAGG,UAC7BC,GAAoB,IAExB,MAAMC,EAAOC,UACXf,EAASS,MAAQX,EAAKa,YACtBV,EAAOQ,MAAQX,EAAKc,UACpBf,EAAcmB,UACdnB,EAAcoB,eAAeV,MAAK,KAChCW,YAAW,KACTrB,EAAcsB,OAAO,GACpB,IAAI,GACP,GAGJC,EAAAA,EAAAA,KAAYL,gBACJlB,GAAemB,UAAS,IAEhC,MAAMH,EAAqBE,UACzB,MAAMP,QAAYN,EAAAA,WAAWC,uBAAuB,CAClDG,qBAAsB,KACtBe,sBAAuB,IAEnBC,EAAUd,EAAIV,KAAKA,KAAKY,SAC9Ba,QAAQC,IAAIF,GACZA,EAAQG,SAAQV,MAAOW,EAAaC,KACP,eAAvBD,EAAOf,cAETd,QAAsBK,EAAAA,WAAW0B,YAAY,CAC3CF,OAAQA,EACRG,UAAWC,SAASC,eAAe,gBACnCC,eAAgB,KAChBC,OAAQ,CAENC,QAASA,KACA,CACLlC,SAAUA,EAASS,MACnBR,OAAQA,EAAOQ,SAIrB0B,IAAK,O,GAIT,EAGJ,MAAO,CAACC,EAAUC,KAChB,MAAMC,GAAoBC,EAAAA,EAAAA,IAAkB,UACtCC,GAAyBD,EAAAA,EAAAA,IAAkB,eAC3CE,GAAoBF,EAAAA,EAAAA,IAAkB,UAE5C,OAAQG,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO1D,EAAY,EAC3DM,EAAAA,EAAAA,GAAoB,MAAOJ,EAAY,EACrCyD,EAAAA,EAAAA,IAAaH,EAAmB,CAC9BI,KAAM,CAAEC,OAAQ,GAAIC,OAAQ,GAC5B,cAAejD,EAAKW,OACnB,CACDuC,YAAYC,EAAAA,EAAAA,KAAS,EAAGC,UAAW,EACjCN,EAAAA,EAAAA,IAAaJ,EAAwB,KAAM,CACzCW,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBL,EAAAA,EAAAA,IAAaN,EAAmB,CAC9Bc,MAAOF,EAAKvC,YACZ0C,QAAUC,GAAiBxC,EAAKoC,GAChChE,OAAOqE,EAAAA,EAAAA,IAAgB,CAACL,EAAKvC,cAAgBX,EAASS,MAAQ,WAAa,MAC1E,CACD0C,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtB1D,EAAAA,EAAAA,GAAoB,MAAOH,EAAY,EACrCG,EAAAA,EAAAA,GAAoB,MAAO,CACzBL,MAAO,SACPsE,IAAKN,EAAKO,YAAY,GACtBC,IAAK,IACJ,KAAM,EAAGrE,QAGhBsE,EAAG,GACF,KAAM,CAAC,QAAS,UAAW,aAEhCA,EAAG,GACF,SAELA,EAAG,GACF,EAAG,CAAC,kBAETrE,GACA,CAEJ,ICjHA,MAAMsE,EAAc,EAEpB,O","sources":["webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitData.vue?4085","webpack://vue3-ts-theme-/./src/views/exhibit/ExhibitData.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"p-40 w-100x h-100x y-auto\" }\nconst _hoisted_2 = { class: \"\" }\nconst _hoisted_3 = { class: \"h-80 over-h\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { id: \"freelog-game\" }, null, -1)\n\nimport { freelogApp } from \"freelog-runtime\";\nimport { ref, onUnmounted } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ExhibitData',\n  setup(__props) {\n\nlet exhibitWidget: any = null;\n\nconst data = ref([] as any[]);\nconst gameName = ref(\"\");\nconst gameId = ref(\"\");\nfreelogApp\n  .getExhibitListByPaging({\n    skip: 0,\n    limit: 20,\n    articleResourceTypes: \"nesrom,红白机\",\n  })\n  .then((res: any) => {\n    data.value = res.data.data.dataList;\n    gameName.value = data.value[0].exhibitName;\n    gameId.value = data.value[0].exhibitId;\n    mountExhibitWidget();\n  });\nconst show = async (data: any) => {\n  gameName.value = data.exhibitName;\n  gameId.value = data.exhibitId;\n  exhibitWidget.unmount();\n  exhibitWidget.unmountPromise.then(() => {\n    setTimeout(() => {\n      exhibitWidget.mount();\n    }, 300);\n  });\n};\n// 离开记得卸载插件喔\nonUnmounted(async () => {\n  await exhibitWidget?.unmount();\n});\nconst mountExhibitWidget = async () => {\n  const res = await freelogApp.getExhibitListByPaging({\n    articleResourceTypes: \"插件\",\n    isLoadVersionProperty: 1,\n  });\n  const widgets = res.data.data.dataList;\n  console.log(widgets);\n  widgets.forEach(async (widget: any, index: number) => {\n    if (widget.exhibitName === \"nes-widget\") {\n      // widget.exhibitId = widget.exhibitId + '111'\n      exhibitWidget = await freelogApp.mountWidget({\n        widget: widget, // 必传，子插件数据\n        container: document.getElementById(\"freelog-game\"), // 必传，自定义一个让插件挂载的div容器\n        topExhibitData: null, // 必传，最外层展品数据（子孙插件都需要用）\n        config: {\n          // 传递给插件，让其自己获取展品内容\n          getGame: () => {\n            return {\n              gameName: gameName.value,\n              gameId: gameId.value,\n            };\n          },\n        }, // 传递给子插件配置数据，会合并到作品上的配置数据\n        seq: null, // 如果要用多个同样的子插件需要传递序号，可以考虑与其余节点插件避免相同的序号, 注意用户数据是根据插件id+序号保存的。\n        // widget_entry: \"https://localhost:8002\", // 本地url，dev模式下，可以使用本地url调试子插件\n      });\n    }\n  });\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_list_item = _resolveComponent(\"a-list-item\")!\n  const _component_a_list = _resolveComponent(\"a-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_a_list, {\n        grid: { gutter: 16, column: 4 },\n        \"data-source\": data.value\n      }, {\n        renderItem: _withCtx(({ item }) => [\n          _createVNode(_component_a_list_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_card, {\n                title: item.exhibitName,\n                onClick: ($event: any) => (show(item)),\n                class: _normalizeClass([item.exhibitName === gameName.value ? 'selected' : ''])\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"img\", {\n                      class: \"h-100x\",\n                      src: item.coverImages[0],\n                      alt: \"\"\n                    }, null, 8, _hoisted_4)\n                  ])\n                ]),\n                _: 2\n              }, 1032, [\"title\", \"onClick\", \"class\"])\n            ]),\n            _: 2\n          }, 1024)\n        ]),\n        _: 1\n      }, 8, [\"data-source\"])\n    ]),\n    _hoisted_5\n  ]))\n}\n}\n\n})","import script from \"./ExhibitData.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ExhibitData.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ExhibitData.vue?vue&type=style&index=0&id=c5fde280&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","id","_defineComponent","__name","setup","__props","exhibitWidget","data","ref","gameName","gameId","freelogApp","getExhibitListByPaging","skip","limit","articleResourceTypes","then","res","value","dataList","exhibitName","exhibitId","mountExhibitWidget","show","async","unmount","unmountPromise","setTimeout","mount","onUnmounted","isLoadVersionProperty","widgets","console","log","forEach","widget","index","mountWidget","container","document","getElementById","topExhibitData","config","getGame","seq","_ctx","_cache","_component_a_card","_resolveComponent","_component_a_list_item","_component_a_list","_openBlock","_createElementBlock","_createVNode","grid","gutter","column","renderItem","_withCtx","item","default","title","onClick","$event","_normalizeClass","src","coverImages","alt","_","__exports__"],"sourceRoot":""}