(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue3-ts-theme-app"]=t():e["vue3-ts-theme-app"]=t()})(self,(function(){return function(){var e={3304:function(e,t,n){"use strict";n.r(t),n.d(t,{bootstrap:function(){return V},mount:function(){return Q},unmount:function(){return K}});n(7714);var o=n(7823),r=n(7552),a=n(9390),l=(n(8806),n(2769)),i=(n(2674),n(2955)),s=(n(250),n(1944)),u=n(5348),c=n(893);const f=(0,u.Q_)("user",{state:()=>({userInfo:null}),actions:{setUserInfo(e){this.userInfo=e}}}),p={class:"h-60 flex-row bg-white align-center"},g=(0,r._)("div",{class:"flex-1"},null,-1),d={class:"flex-row mr-20 align-center"},m={key:0,class:"flex-row align-center"},v={class:"h-40 over-h brs-50 mr-10 w-40"},h=["src"];var w=(0,r.aZ)({__name:"HeaderComp",setup(e){const t=f(),{userInfo:n}=(0,u.Jk)(t),o=()=>{c.freelogApp.callLogin((()=>{c.freelogApp.reload()}))},w=()=>{c.freelogApp.callLoginOut()};return(e,t)=>{const u=i.zx,c=l.hP,f=a.h_;return(0,r.wg)(),(0,r.iD)("div",p,[g,(0,r._)("div",d,[(0,s.SU)(n)?((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",v,[(0,r._)("img",{src:(0,s.SU)(n)?.headImage,alt:"",class:"h-100x"},null,8,h)]),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{title:(0,s.SU)(n).username},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{type:"primary",size:"small",block:"",round:"",onClick:w},{default:(0,r.w5)((()=>[(0,r.Uk)(" 退出登录 ")])),_:1})])),_:1},8,["title"])])),_:1})])):((0,r.wg)(),(0,r.j4)(u,{key:1,type:"primary",onClick:o},{default:(0,r.w5)((()=>[(0,r.Uk)("登录一下吧")])),_:1}))])])}}});const _=w;var b=_;const y={class:"w-100x h-100x flex-column over-h"},x={class:"w-100x flex-1 flex-row x-auto"},E={class:"flex-1 h-100x over-h p-relative"};var k=(0,r.aZ)({__name:"App",setup(e){const t=(0,s.iH)(!0),n=f();return n.setUserInfo(c.freelogApp.getCurrentUser()),t.value=!1,(e,n)=>{const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(b),(0,r._)("div",x,[(0,r._)("div",E,[((0,r.wg)(),(0,r.j4)(r.Ob,null,[t.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(o,{key:0}))],1024))])])])}}});const O=k;var S=O,A=n(7720);(0,A.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var G=n(7345),U=(n(9507),n(1653));const C={class:"flex-row align-center"},P={class:"h-40 w-40 over-h mr-20"},j=["src"],L={class:""},H={id:"freelog-game"};var I=(0,r.aZ)({__name:"HomeView",setup(e){const t=(0,s.iH)([]),n=(0,s.iH)(!0),a=(0,s.iH)(!0),l=(0,s.iH)(!1);let u=null;const f=(0,s.iH)(""),p=(0,s.iH)("");c.freelogApp.getExhibitListByPaging({skip:0,limit:20,articleResourceTypes:"nesrom,红白机"}).then((async e=>{t.value=e.data.data.dataList,p.value=t.value[0].exhibitName,f.value=await c.freelogApp.getExhibitFileStream(t.value[0].exhibitId,{returnUrl:!0}),console.log(t.value),n.value=!1,d(f.value,p.value)}));const g=async e=>{p.value=e.exhibitName,f.value=await c.freelogApp.getExhibitFileStream(e.exhibitId,{returnUrl:!0}),l.value=!0,u.getApi().startGame(f.value,p.value)};(0,r.Jd)((()=>{u?.unmount()}));const d=async(e,t)=>{const n=await c.freelogApp.getExhibitListByPaging({articleResourceTypes:"插件",isLoadVersionProperty:1}),o=n.data.data.dataList;o.forEach((async(n,o)=>{"nes-widget-mobile"===n.exhibitName&&(u=await c.freelogApp.mountWidget({widget:n,container:document.getElementById("freelog-game"),topExhibitData:null,config:{defaultGameUrl:e,defaultGameName:t,showList:()=>{l.value=!1}},seq:null}))}))};return(e,s)=>{const u=i.zx,c=G.aV;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c,{loading:n.value,"onUpdate:loading":s[0]||(s[0]=e=>n.value=e),finished:a.value,"finished-text":"没有更多了"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.value,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"flex-row space-between px-10 py-10 mt-20"},[(0,r._)("div",C,[(0,r._)("div",P,[(0,r._)("img",{src:e.coverImages[0],alt:"",class:"h-100x"},null,8,j)]),(0,r._)("span",L,(0,U.zw)(e.exhibitName),1)]),(0,r.Wm)(u,{class:"w-100",type:"primary",size:"small",block:"",round:"",onClick:t=>g(e)},{default:(0,r.w5)((()=>[(0,r.Uk)("开始游戏")])),_:2},1032,["onClick"])])))),128))])),_:1},8,["loading","finished"]),(0,r.wy)((0,r._)("div",H,null,512),[[o.F8,l.value]])],64)}}}),N=n(8081);const D=(0,N.Z)(I,[["__scopeId","data-v-1cf13710"]]);var W=D;const B=[{path:"/",name:"home",component:W}];var F=B,T=n(5742);const R=c.freelogApp?.getSelfConfig().defaultGameUrl||"https://192.168.2.122:8002/Contra",z=c.freelogApp?.getSelfConfig().defaultGameName||"无游戏",Y=(0,u.Q_)("game",{state:()=>({url:R,gameName:z}),actions:{setUrl(e,t){this.url=e,this.gameName=t}}});let J=null,q=null,M=null;function Z(e={}){const{container:t}=e;q=(0,T.p7)({history:(0,T.PO)(window.__POWERED_BY_FREELOG__?"/widget":"/"),routes:F}),M=(0,o.ri)(S),J=(0,u.WB)(),M.use(q),M.use(J),M.mount(t?t.querySelector("#app"):"#app"),e?.registerApi&&e.registerApi({startGame:(e,t)=>{const n=Y();n.setUrl(e,t)}})}async function V(){console.log("%c ","color: green;","vue3.0 app bootstraped")}function $(e){e.onGlobalStateChange&&e.onGlobalStateChange(((t,n)=>console.log(`[插件 - ${e.name}]:`,t,n)),!0),setTimeout((()=>{e.setGlobalState({ignore:e.name+"111",user:{name:e.name+"111"}})}),2500),e.setGlobalState&&e.setGlobalState({ignore:e.name,user:{name:e.name}})}async function Q(e){$(e),Z(e),M.config.globalProperties.$onGlobalStateChange=e.onGlobalStateChange,M.config.globalProperties.$setGlobalState=e.setGlobalState}async function K(){M.unmount(),M._container.innerHTML="",M=null,q=null,J=null}window.__POWERED_BY_FREELOG__||Z()},7714:function(e,t,n){window.__POWERED_BY_FREELOG__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_FREELOG__)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var i=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,l=o[0],i=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(s)var c=s(n)}for(t&&t(o);u<l.length;u++)a=l[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3304)}));return o=n.O(o),o}()}));
//# sourceMappingURL=app.7cdb8632.js.map