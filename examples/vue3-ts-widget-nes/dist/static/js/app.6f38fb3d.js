(function(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports["vue3-ts-theme-app"]=n():e["vue3-ts-theme-app"]=n()})(self,(function(){return function(){var e={3951:function(e,n,o){"use strict";o.r(n),o.d(n,{bootstrap:function(){return J},mount:function(){return $},unmount:function(){return Q}});o(7714);var t=o(7823),l=o(7552);function r(e,n){const o=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(o)}var a=o(8081);const u={},i=(0,a.Z)(u,[["render",r]]);var s=i,c=o(7720);(0,c.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var p=o(1653),f=o(1944),v=o(5498),d=o(893);const y={class:"flex-column pr-15"},g={class:"flex-row mb-10 space-between"},w=(0,l._)("div",{class:"fc-less"},"双击按键值进行设置",-1),m={class:"w-80 text-align-right mr-100 shrink-0"},b=["onClick"],_={class:"flex-column pr-15"},h={class:"flex-row mb-10 space-between"},K=(0,l._)("div",{class:"fc-less"},"双击按键值进行设置",-1),k={class:"w-80 text-align-right mr-100 shrink-0"},E=["onClick"];var O=(0,l.aZ)({__name:"SetKey",props:{visible:{type:Boolean},p1Keys:{},p2Keys:{}},emits:["cancel","save"],setup(e,{emit:n}){const o=e,t=(0,f.iH)("1"),r=(0,f.iH)(""),a=(0,f.iH)(""),u={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},i={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},s=(0,f.iH)(Object.keys(u)),c=(0,f.qj)({...o.p1Keys}),O=(0,f.qj)({...o.p2Keys}),D=e=>{r.value=e},x=e=>{1===e&&Object.keys(c).forEach((e=>{c[e]=u[e]})),2===e&&Object.keys(O).forEach((e=>{O[e]=i[e]})),a.value="",r.value=""},A=(e,n)=>{if("1"===t.value){const o=Object.keys(c).some((n=>{if(c[n]===e.code)return!0}));if(o)return v.ZP.error({content:"玩家1按键重复",duration:2}),void(a.value="");c[n]=e.code}else{const o=Object.keys(O).some((n=>{if(O[n]===e.code)return!0}));if(o)return v.ZP.error({content:"按键重复",duration:2}),void(a.value="");O[n]=e.code}a.value="",r.value=""},C=(0,f.iH)({});let S={};d.freelogApp.getUserData("nesKeys").then((e=>{S=e||{},C.value=e||{}}));const U=async(e,n)=>{await d.freelogApp.setUserData("nesKeys",{...S,...n})},j=async e=>{console.log(c,O),U("nesKeys",{p1Keys:{...c},p2Keys:{...O}}),n("save")},H=e=>{console.log(e),n("cancel")};return(e,n)=>{const u=(0,l.up)("a-button"),i=(0,l.up)("a-input"),f=(0,l.up)("a-tab-pane"),v=(0,l.up)("a-tabs"),d=(0,l.up)("a-modal");return(0,l.wg)(),(0,l.j4)(d,{visible:o.visible,width:800,title:"按键设置",onOk:j,onCancel:H,okText:"保存",cancelText:"取消"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{activeKey:t.value,"onUpdate:activeKey":n[2]||(n[2]=e=>t.value=e),onChange:n[3]||(n[3]=e=>r.value="")},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{key:"1",tab:"玩家1"},{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l._)("div",g,[w,(0,l.Wm)(u,{type:"primary",class:"mr-20 w-100",onClick:n[0]||(n[0]=e=>x(1))},{default:(0,l.w5)((()=>[(0,l.Uk)("恢复默认")])),_:1})]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.value,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,l._)("div",m,(0,p.zw)(e)+"： ",1),r.value===e&&"1"==t.value?((0,l.wg)(),(0,l.j4)(i,{key:0,placeholder:"请按下想要设置的键",value:a.value,onKeyup:n=>A(n,e)},null,8,["value","onKeyup"])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>D(e)},(0,p.zw)(c[e]),9,b))])))),128))])])),_:1}),(0,l.Wm)(f,{key:"2",tab:"玩家2","force-render":""},{default:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l._)("div",h,[K,(0,l.Wm)(u,{type:"primary",class:"mr-20 w-100",onClick:n[1]||(n[1]=e=>x(2))},{default:(0,l.w5)((()=>[(0,l.Uk)("恢复默认")])),_:1})]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.value,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,l._)("div",k,(0,p.zw)(e)+"： ",1),r.value===e&&"2"==t.value?((0,l.wg)(),(0,l.j4)(i,{key:0,placeholder:"请按下想要设置的键",value:a.value,onKeyup:n=>A(n,e)},null,8,["value","onKeyup"])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>D(e)},(0,p.zw)(O[e]),9,E))])))),128))])])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["visible"])}}});const D=O;var x=D,A=o(5598),C=o(5348);const S=d.freelogApp?.getSelfConfig().defaultGameUrl||{},U=(0,C.Q_)("gameUrl",{state:()=>({url:S}),actions:{setUrl(e){this.url=e}}}),j={class:"home w-100x h-100x flex-column"},H={class:"flex-column-center w-100x"},T={class:"flex-row pt-40 space-between w-800 mb-10"},G={class:"flex-row"},P={class:"flex-row"};var W=(0,l.aZ)({__name:"HomeView",setup(e){const n=(0,f.iH)(100),o=(0,f.iH)(800),t=(0,f.iH)(700),r=(0,f.iH)(!1),a=(0,f.iH)(!1),u=(0,f.iH)(null),i=(0,f.iH)(null),s=U(),c=(0,f.iH)(s.url);(0,l.YP)((()=>s.url),(e=>{console.log(23423424,e),c.value=e}));const v={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},y={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},g=(0,f.iH)({...v}),w=(0,f.iH)({...y}),m=()=>{u?.value?.blur()};function b(){d.freelogApp.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(g.value={...e.p1Keys}),e&&e.p2Keys&&(w.value={...e.p2Keys}),r.value=!1}))}function _(){n.value=0,a.value=!a.value,a.value||(n.value=100)}function h(){console.log(i.value.$el),i.value.$el.requestFullscreen()}return d.freelogApp.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(g.value={...e.p1Keys}),e&&e.p2Keys&&(w.value={...e.p2Keys})})),(e,s)=>{const v=(0,l.up)("a-slider"),d=(0,l.up)("a-button");return(0,l.wg)(),(0,l.iD)("div",j,[(0,l._)("div",H,[(0,l._)("div",T,[(0,l._)("div",G,[(0,l.Wm)(v,{autofocus:!1,class:"w-200 mr-10",value:n.value,"onUpdate:value":s[0]||(s[0]=e=>n.value=e),ref_key:"slider",ref:u,onAfterChange:m,disabled:a.value},null,8,["value","disabled"]),(0,l.Wm)(d,{type:"primary",class:"mr-20",onClick:_},{default:(0,l.w5)((()=>[(0,l.Uk)((0,p.zw)(0===n.value?"打开声音":"关闭声音"),1)])),_:1})]),(0,l._)("div",P,[(0,l.Wm)(d,{type:"primary",class:"mr-20",onClick:s[1]||(s[1]=e=>r.value=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("设置按键")])),_:1}),(0,l.Wm)(d,{type:"primary",onClick:h},{default:(0,l.w5)((()=>[(0,l.Uk)("全屏")])),_:1})])])]),(0,l.Wm)((0,f.SU)(A.Ql),{width:o.value,height:t.value,gain:n.value,ref_key:"nes",ref:i,label:"点击开始游戏",p1:g.value,p2:w.value,url:c.value},null,8,["width","height","gain","p1","p2","url"]),r.value?((0,l.wg)(),(0,l.j4)(x,{key:0,visible:r.value,onCancel:s[2]||(s[2]=e=>r.value=!1),onSave:b,p1Keys:g.value,p2Keys:w.value},null,8,["visible","p1Keys","p2Keys"])):(0,l.kq)("",!0)])}}});const R=W;var N=R;const L=[{path:"/",name:"home",component:N}];var F=L,B=o(5742),I=o(7174);o(6068);window.FREELOG_RESOURCENAME="snnaenu/插件开发演示代码主题";let Y=null,q=null,z=null;function Z(e={}){const{container:n}=e;q=(0,B.p7)({history:(0,B.PO)(window.__POWERED_BY_FREELOG__?"/widget":"/"),routes:F}),z=(0,t.ri)(s),Y=(0,C.WB)(),z.use(q),z.use(Y).use(I.ZP),z.mount(n?n.querySelector("#app"):"#app"),e?.registerApi&&e.registerApi({startGame:e=>{const n=U();n.setUrl(e)}})}async function J(){console.log("%c ","color: green;","vue3.0 app bootstraped")}function M(e){e.onGlobalStateChange&&e.onGlobalStateChange(((n,o)=>console.log(`[插件 - ${e.name}]:`,n,o)),!0),setTimeout((()=>{e.setGlobalState({ignore:e.name+"111",user:{name:e.name+"111"}})}),2500),e.setGlobalState&&e.setGlobalState({ignore:e.name,user:{name:e.name}})}async function $(e){M(e),Z(e),z.config.globalProperties.$onGlobalStateChange=e.onGlobalStateChange,z.config.globalProperties.$setGlobalState=e.setGlobalState}async function Q(){z.unmount(),z._container.innerHTML="",z=null,q=null,Y=null}window.__POWERED_BY_FREELOG__||Z()},7714:function(e,n,o){window.__POWERED_BY_FREELOG__&&(o.p=window.__INJECTED_PUBLIC_PATH_BY_FREELOG__)}},n={};function o(t){var l=n[t];if(void 0!==l)return l.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(n,t,l,r){if(!t){var a=1/0;for(c=0;c<e.length;c++){t=e[c][0],l=e[c][1],r=e[c][2];for(var u=!0,i=0;i<t.length;i++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](t[i])}))?t.splice(i--,1):(u=!1,r<a&&(a=r));if(u){e.splice(c--,1);var s=l();void 0!==s&&(n=s)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,l,r]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(n){return 0===e[n]};var n=function(n,t){var l,r,a=t[0],u=t[1],i=t[2],s=0;if(a.some((function(n){return 0!==e[n]}))){for(l in u)o.o(u,l)&&(o.m[l]=u[l]);if(i)var c=i(o)}for(n&&n(t);s<a.length;s++)r=a[s],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},t=self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(3951)}));return t=o.O(t),t}()}));
//# sourceMappingURL=app.6f38fb3d.js.map