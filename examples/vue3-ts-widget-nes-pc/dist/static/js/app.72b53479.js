(function(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports["vue3-ts-theme-app"]=n():e["vue3-ts-theme-app"]=n()})(self,(function(){return function(){var e={3400:function(e,n,t){"use strict";t.r(n),t.d(n,{bootstrap:function(){return $},mount:function(){return V},unmount:function(){return X}});t(9159);var o=t(7555),a=t(2370);function l(e,n){const t=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(t)}var r=t(9565);const i={},u=(0,r.Z)(i,[["render",l]]);var s=u,c=t(4913);(0,c.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var p=t(5050),f=t(6369),v=t(3857),d=t(1868);const y={class:"flex-column pr-15"},m={class:"flex-row mb-10 space-between"},g=(0,a._)("div",{class:"fc-less"},"双击按键值进行设置",-1),w={class:"w-80 text-align-right mr-100 shrink-0"},b=["onClick"],_={class:"flex-column pr-15"},h={class:"flex-row mb-10 space-between"},K=(0,a._)("div",{class:"fc-less"},"双击按键值进行设置",-1),k={class:"w-80 text-align-right mr-100 shrink-0"},E=["onClick"];var O=(0,a.aZ)({__name:"SetKey",props:{visible:{type:Boolean},p1Keys:{},p2Keys:{}},emits:["cancel","save"],setup(e,{emit:n}){const t=e,o=(0,f.iH)("1"),l=(0,f.iH)(""),r=(0,f.iH)(""),i={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},u={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},s=(0,f.iH)(Object.keys(i)),c=(0,f.iH)(Object.keys(u)),O=(0,f.qj)({...t.p1Keys}),D=(0,f.qj)({...t.p2Keys}),A=e=>{l.value=e},x=e=>{1===e&&Object.keys(O).forEach((e=>{O[e]=i[e]})),2===e&&Object.keys(D).forEach((e=>{D[e]=u[e]})),r.value="",l.value=""},C=(e,n)=>{if("1"===o.value){const t=Object.keys(O).some((t=>{if(O[t]===e.code&&n!==t)return!0}));if(t)return v.ZP.error({content:"玩家1按键重复",duration:2}),void(r.value="");O[n]=e.code}else{const t=Object.keys(D).some((n=>{if(D[n]===e.code)return!0}));if(t)return v.ZP.error({content:"按键重复",duration:2}),void(r.value="");D[n]=e.code}r.value="",l.value=""},S=(0,f.iH)({});let j={};d.freelogApp.getUserData("nesKeys").then((e=>{j=e||{},S.value=e||{}}));const H=async(e,n)=>{await d.freelogApp.setUserData("nesKeys",{...j,...n})},T=async e=>{H("nesKeys",{p1Keys:{...O},p2Keys:{...D}}),n("save")},U=e=>{n("cancel")};return(e,n)=>{const i=(0,a.up)("a-button"),u=(0,a.up)("a-input"),f=(0,a.up)("a-tab-pane"),v=(0,a.up)("a-tabs"),d=(0,a.up)("a-modal");return(0,a.wg)(),(0,a.j4)(d,{visible:t.visible,width:800,title:"按键设置",onOk:T,onCancel:U,okText:"保存",cancelText:"取消"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{activeKey:o.value,"onUpdate:activeKey":n[2]||(n[2]=e=>o.value=e),onChange:n[3]||(n[3]=e=>l.value="")},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{key:"1",tab:"玩家1"},{default:(0,a.w5)((()=>[(0,a._)("div",y,[(0,a._)("div",m,[g,(0,a.Wm)(i,{type:"primary",class:"mr-20 w-100",onClick:n[0]||(n[0]=e=>x(1))},{default:(0,a.w5)((()=>[(0,a.Uk)("恢复默认")])),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.value,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,a._)("div",w,(0,p.zw)(e)+"： ",1),l.value===e&&"1"==o.value?((0,a.wg)(),(0,a.j4)(u,{key:0,placeholder:"请按下想要设置的键",value:r.value,onKeyup:n=>C(n,e)},null,8,["value","onKeyup"])):((0,a.wg)(),(0,a.iD)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>A(e)},(0,p.zw)(O[e]),9,b))])))),128))])])),_:1}),(0,a.Wm)(f,{key:"2",tab:"玩家2","force-render":""},{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a._)("div",h,[K,(0,a.Wm)(i,{type:"primary",class:"mr-20 w-100",onClick:n[1]||(n[1]=e=>x(2))},{default:(0,a.w5)((()=>[(0,a.Uk)("恢复默认")])),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.value,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,a._)("div",k,(0,p.zw)(e)+"： ",1),l.value===e&&"2"==o.value?((0,a.wg)(),(0,a.j4)(u,{key:0,placeholder:"请按下想要设置的键",value:r.value,onKeyup:n=>C(n,e)},null,8,["value","onKeyup"])):((0,a.wg)(),(0,a.iD)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>A(e)},(0,p.zw)(D[e]),9,E))])))),128))])])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["visible"])}}});const D=O;var A=D,x=t(1761),C=t(4321);const S=d.freelogApp.getSelfConfig().defaultGameUrl||{},j=d.freelogApp.getSelfConfig().defaultGameName||{},H=(0,C.Q_)("game",{state:()=>({url:S,gameName:j}),actions:{setUrl(e,n){this.url=e,this.gameName=n}}}),T={class:"home w-100x h-100x flex-column"},U={class:"flex-column-center w-100x"},N={class:"flex-row pt-40 space-between w-800 mb-10"},G={class:"flex-row"},P={class:"f-title-3 mr-60"},W={class:"flex-row"};var R=(0,a.aZ)({__name:"HomeView",setup(e){const n=(0,f.iH)(100),t=(0,f.iH)(800),o=(0,f.iH)(700),l=(0,f.iH)(!1),r=(0,f.iH)(!1),i=(0,f.iH)(null),u=(0,f.iH)(null),s=H(),c=(0,f.iH)(s.url),v=(0,f.iH)(s.gameName);(0,a.YP)((()=>s.url),(e=>{c.value=e,v.value=s.gameName}));const y={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},m={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},g=(0,f.iH)({...y}),w=(0,f.iH)({...m}),b=()=>{i?.value?.blur()};function _(){d.freelogApp.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(g.value={...e.p1Keys}),e&&e.p2Keys&&(w.value={...e.p2Keys}),l.value=!1}))}function h(){r.value=!r.value}function K(){u.value.$el.getElementsByTagName("canvas")[0].requestFullscreen()}return d.freelogApp.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(g.value={...e.p1Keys}),e&&e.p2Keys&&(w.value={...e.p2Keys})})),(e,s)=>{const d=(0,a.up)("a-slider"),y=(0,a.up)("a-button");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",U,[(0,a._)("div",N,[(0,a._)("div",G,[(0,a.Wm)(d,{autofocus:!1,class:"w-160 mr-10",value:n.value,"onUpdate:value":s[0]||(s[0]=e=>n.value=e),ref_key:"slider",ref:i,onAfterChange:b,disabled:r.value},null,8,["value","disabled"]),(0,a.Wm)(y,{type:"primary",class:"mr-20",onClick:h},{default:(0,a.w5)((()=>[(0,a.Uk)((0,p.zw)(r.value?"打开声音":"关闭声音"),1)])),_:1})]),(0,a._)("div",P,(0,p.zw)(v.value),1),(0,a._)("div",W,[(0,a.Wm)(y,{type:"primary",class:"mr-20",onClick:s[1]||(s[1]=e=>l.value=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)("设置按键")])),_:1}),(0,a.Wm)(y,{type:"primary",onClick:K},{default:(0,a.w5)((()=>[(0,a.Uk)("全屏")])),_:1})])])]),c.value?((0,a.wg)(),(0,a.j4)((0,f.SU)(x.Ql),{key:0,width:t.value,height:o.value,gain:r.value?0:n.value,ref_key:"nes",ref:u,label:"点击开始游戏",p1:g.value,p2:w.value,url:c.value},null,8,["width","height","gain","p1","p2","url"])):(0,a.kq)("",!0),l.value?((0,a.wg)(),(0,a.j4)(A,{key:1,visible:l.value,onCancel:s[2]||(s[2]=e=>l.value=!1),onSave:_,p1Keys:g.value,p2Keys:w.value},null,8,["visible","p1Keys","p2Keys"])):(0,a.kq)("",!0)])}}});const L=R;var B=L;const F=[{path:"/",name:"home",component:B}];var I=F,q=t(9297),z=t(5846);t(6872);window.FREELOG_RESOURCENAME="snnaenu/插件开发演示代码主题";let Y=null,Z=null,J=null;function M(e={}){const{container:n}=e;Z=(0,q.p7)({history:(0,q.PO)(window.__POWERED_BY_FREELOG__?"/widget":"/"),routes:I}),J=(0,o.ri)(s),Y=(0,C.WB)(),J.use(Z),J.use(Y).use(z.ZP),J.mount(n?n.querySelector("#app"):"#app"),e?.registerApi&&e.registerApi({startGame:(e,n)=>{const t=H();t.setUrl(e,n)}})}async function $(){console.log("%c ","color: green;","vue3.0 app bootstraped")}function Q(e){e.onGlobalStateChange&&e.onGlobalStateChange(((n,t)=>console.log(`[插件 - ${e.name}]:`,n,t)),!0),setTimeout((()=>{e.setGlobalState({ignore:e.name+"111",user:{name:e.name+"111"}})}),2500),e.setGlobalState&&e.setGlobalState({ignore:e.name,user:{name:e.name}})}async function V(e){Q(e),M(e),J.config.globalProperties.$onGlobalStateChange=e.onGlobalStateChange,J.config.globalProperties.$setGlobalState=e.setGlobalState}async function X(){J.unmount(),J._container.innerHTML="",J=null,Z=null,Y=null}window.__POWERED_BY_FREELOG__||M()},9159:function(e,n,t){window.__POWERED_BY_FREELOG__&&(t.p=window.__INJECTED_PUBLIC_PATH_BY_FREELOG__)}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var l=n[o]={exports:{}};return e[o].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,l){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],l=e[c][2];for(var i=!0,u=0;u<o.length;u++)(!1&l||r>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(i=!1,l<r&&(r=l));if(i){e.splice(c--,1);var s=a();void 0!==s&&(n=s)}}return n}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,a,l]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,l,r=o[0],i=o[1],u=o[2],s=0;if(r.some((function(n){return 0!==e[n]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(u)var c=u(t)}for(n&&n(o);s<r.length;s++)l=r[s],t.o(e,l)&&e[l]&&e[l][0](),e[r[s]]=0;return t.O(c)},o=self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3400)}));return o=t.O(o),o}()}));
//# sourceMappingURL=app.72b53479.js.map