(function(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports["vue3-ts-theme-app"]=n():e["vue3-ts-theme-app"]=n()})(self,(function(){return function(){var e={3776:function(e,n,t){"use strict";t.r(n);t(3407);var a=t(1886),o=t(6895);function r(e,n){const t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(t)}var l=t(6479);const u={},s=(0,l.A)(u,[["render",r]]);var i=s,c=t(8594);(0,c.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=t(6634),p=t(4591),f=t(5900),d=t(3445);const y={class:"flex-column pr-15"},m={class:"flex-row mb-10 space-between"},b=(0,o.Lk)("div",{class:"fc-less"},"双击按键值进行设置",-1),K={class:"w-80 text-align-right mr-100 shrink-0"},g=["onClick"],k={class:"flex-column pr-15"},w={class:"flex-row mb-10 space-between"},h=(0,o.Lk)("div",{class:"fc-less"},"双击按键值进行设置",-1),_={class:"w-80 text-align-right mr-100 shrink-0"},R=["onClick"];var A=(0,o.pM)({__name:"SetKey",props:{visible:{type:Boolean},p1Keys:{},p2Keys:{}},emits:["cancel","save"],setup(e,{emit:n}){const t=(0,p.KR)("1"),a=(0,p.KR)(""),r=(0,p.KR)(""),l=e,u={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},s={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},i=n,c=(0,p.KR)(Object.keys(u)),A=(0,p.KR)(Object.keys(s)),C=(0,p.Kh)({...l.p1Keys}),x=(0,p.Kh)({...l.p2Keys}),O=e=>{a.value=e},N=e=>{1===e&&Object.keys(C).forEach((e=>{C[e]=u[e]})),2===e&&Object.keys(x).forEach((e=>{x[e]=s[e]})),r.value="",a.value=""},E=(e,n)=>{if("1"===t.value){const t=Object.keys(C).some((t=>{if(C[t]===e.code&&n!==t)return!0}));if(t)return f.Ay.error({content:"玩家1按键重复",duration:2}),void(r.value="");C[n]=e.code}else{const t=Object.keys(x).some((n=>{if(x[n]===e.code)return!0}));if(t)return f.Ay.error({content:"按键重复",duration:2}),void(r.value="");x[n]=e.code}r.value="",a.value=""},L=(0,p.KR)({});let T={};d.Kb.getUserData("nesKeys").then((e=>{T=e||{},L.value=e||{}}));const D=async(e,n)=>{await d.Kb.setUserData("nesKeys",{...T,...n})},F=async e=>{D("nesKeys",{p1Keys:{...C},p2Keys:{...x}}),i("save")},j=e=>{i("cancel")};return(e,n)=>{const u=(0,o.g2)("a-button"),s=(0,o.g2)("a-input"),i=(0,o.g2)("a-tab-pane"),p=(0,o.g2)("a-tabs"),f=(0,o.g2)("a-modal");return(0,o.uX)(),(0,o.Wv)(f,{visible:l.visible,width:800,title:"按键设置",onOk:F,onCancel:j,okText:"保存",cancelText:"取消"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{activeKey:t.value,"onUpdate:activeKey":n[2]||(n[2]=e=>t.value=e),onChange:n[3]||(n[3]=e=>a.value="")},{default:(0,o.k6)((()=>[(0,o.bF)(i,{key:"1",tab:"玩家1"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",y,[(0,o.Lk)("div",m,[b,(0,o.bF)(u,{type:"primary",class:"mr-20 w-100",onClick:n[0]||(n[0]=e=>N(1))},{default:(0,o.k6)((()=>[(0,o.eW)("恢复默认")])),_:1})]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.value,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,o.Lk)("div",K,(0,v.v_)(e)+"： ",1),a.value===e&&"1"==t.value?((0,o.uX)(),(0,o.Wv)(s,{key:0,placeholder:"请按下想要设置的键",value:r.value,onKeyup:n=>E(n,e)},null,8,["value","onKeyup"])):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>O(e)},(0,v.v_)(C[e]),9,g))])))),128))])])),_:1}),(0,o.bF)(i,{key:"2",tab:"玩家2","force-render":""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",k,[(0,o.Lk)("div",w,[h,(0,o.bF)(u,{type:"primary",class:"mr-20 w-100",onClick:n[1]||(n[1]=e=>N(2))},{default:(0,o.k6)((()=>[(0,o.eW)("恢复默认")])),_:1})]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(A.value,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex-row bb-1 py-8"},[(0,o.Lk)("div",_,(0,v.v_)(e)+"： ",1),a.value===e&&"2"==t.value?((0,o.uX)(),(0,o.Wv)(s,{key:0,placeholder:"请按下想要设置的键",value:r.value,onKeyup:n=>E(n,e)},null,8,["value","onKeyup"])):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"brs-4 b-1 px-10 py-4 cur-pointer",onClick:n=>O(e)},(0,v.v_)(x[e]),9,R))])))),128))])])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["visible"])}}});const C=A;var x=C,O=t(254),N=t(9137);const E=(0,N.nY)("game",{state:()=>({url:d.vq.getData().defaultGameUrl,gameName:d.vq.getData().defaultGameName}),actions:{setUrl(e,n){this.url=e,this.gameName=n}}}),L={class:"home w-100x h-100x flex-column"},T={class:"flex-column-center w-100x"},D={class:"flex-row pt-40 space-between w-800 mb-10"},F={class:"flex-row"},j={class:"f-title-3 mr-60"},U={class:"flex-row"};var W=(0,o.pM)({__name:"HomeView",setup(e){const n=(0,p.KR)(100),t=(0,p.KR)(800),a=(0,p.KR)(700),r=(0,p.KR)(!1),l=(0,p.KR)(!1),u=(0,p.KR)(null),s=(0,p.KR)(null),i=E(),c=(0,p.KR)(i.url),f=(0,p.KR)(i.gameName),y=d.Kb.getSelfWidgetRenderName();console.log("snnaenu/分享插件",y),(0,o.wB)((()=>i.url),(e=>{c.value=e,f.value=i.gameName}));const m={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},b={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},K=(0,p.KR)({...m}),g=(0,p.KR)({...b}),k=()=>{u?.value?.blur()};function w(){d.Kb.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(K.value={...e.p1Keys}),e&&e.p2Keys&&(g.value={...e.p2Keys}),r.value=!1}))}function h(){l.value=!l.value}function _(){s.value.$el.getElementsByTagName("canvas")[0].requestFullscreen()}return d.Kb.getUserData("nesKeys").then((e=>{e&&e.p1Keys&&(K.value={...e.p1Keys}),e&&e.p2Keys&&(g.value={...e.p2Keys})})),(e,i)=>{const d=(0,o.g2)("a-slider"),y=(0,o.g2)("a-button");return(0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",T,[(0,o.Lk)("div",D,[(0,o.Lk)("div",F,[(0,o.bF)(d,{autofocus:!1,class:"w-160 mr-10",value:n.value,"onUpdate:value":i[0]||(i[0]=e=>n.value=e),ref_key:"slider",ref:u,onAfterChange:k,disabled:l.value},null,8,["value","disabled"]),(0,o.bF)(y,{type:"primary",class:"mr-20",onClick:h},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(l.value?"打开声音":"关闭声音"),1)])),_:1})]),(0,o.Lk)("div",j,(0,v.v_)(f.value),1),(0,o.Lk)("div",U,[(0,o.bF)(y,{type:"primary",class:"mr-20",onClick:i[1]||(i[1]=e=>r.value=!0)},{default:(0,o.k6)((()=>[(0,o.eW)("设置按键")])),_:1}),(0,o.bF)(y,{type:"primary",onClick:_},{default:(0,o.k6)((()=>[(0,o.eW)("全屏")])),_:1})])])]),c.value?((0,o.uX)(),(0,o.Wv)((0,p.R1)(O.LA),{key:0,width:t.value,height:a.value,gain:l.value?0:n.value,ref_key:"nes",ref:s,label:"点击开始游戏",p1:K.value,p2:g.value,url:c.value},null,8,["width","height","gain","p1","p2","url"])):(0,o.Q3)("",!0),r.value?((0,o.uX)(),(0,o.Wv)(x,{key:1,visible:r.value,onCancel:i[2]||(i[2]=e=>r.value=!1),onSave:w,p1Keys:K.value,p2Keys:g.value},null,8,["visible","p1Keys","p2Keys"])):(0,o.Q3)("",!0)])}}});const P=W;var S=P;const I=[{path:"/",name:"home",component:S}];var X=I,M=t(1972),B=t(1537);t(6986);let q=null,G=null,H=null;function J(){G=(0,M.aE)({history:(0,M.LA)(window.__MICRO_APP_ENVIRONMENT__?"/widget":"/"),routes:X}),H=(0,a.Ef)(i),q=(0,N.Ey)(),H.use(G),H.use(q).use(B.Ay),H.mount(document.querySelector("#app"));const e=d.vq.getData();e.registerApi({startGame:(e,n)=>{const t=E();t.setUrl(e,n)}})}function V(){J()}function Q(){H.unmount(),H._container.innerHTML="",H=null,G=null,q=null}window.mount=()=>{(0,d.uq)(),V()},window.unmount=()=>{Q()}},3407:function(e,n,t){window.__MICRO_APP_ENVIRONMENT__&&(t.p=window.__MICRO_APP_PUBLIC_PATH__)}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,r){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],r=e[c][2];for(var u=!0,s=0;s<a.length;s++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[s])}))?a.splice(s--,1):(u=!1,r<l&&(l=r));if(u){e.splice(c--,1);var i=o();void 0!==i&&(n=i)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,r,l=a[0],u=a[1],s=a[2],i=0;if(l.some((function(n){return 0!==e[n]}))){for(o in u)t.o(u,o)&&(t.m[o]=u[o]);if(s)var c=s(t)}for(n&&n(a);i<l.length;i++)r=l[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},a=self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(3776)}));return a=t.O(a),a}()}));
//# sourceMappingURL=app.727cb8ac.js.map