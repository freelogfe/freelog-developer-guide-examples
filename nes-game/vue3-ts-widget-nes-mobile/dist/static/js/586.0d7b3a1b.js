"use strict";(self["webpackJsonp_vue3-ts-theme"]=self["webpackJsonp_vue3-ts-theme"]||[]).push([[586],{4586:function(t,e,s){s.r(e),s.d(e,{default:function(){return Cc}});s(6800);var i=s(2337),n=s(28),r=s(7329),o=s(5736),a=(s(7697),s(6432),s(977),s(8657),s(1994),s(4765),s(5178),s(3154),s(1649),s(9604),Object.defineProperty),h=(t,e,s)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,l=(t,e,s)=>(h(t,"symbol"!=typeof e?e+"":e,s),s),u=function(){this.state=new Array(8);for(var t=0;t<this.state.length;t++)this.state[t]=64};u.BUTTON_A=0,u.BUTTON_B=1,u.BUTTON_SELECT=2,u.BUTTON_START=3,u.BUTTON_UP=4,u.BUTTON_DOWN=5,u.BUTTON_LEFT=6,u.BUTTON_RIGHT=7,u.prototype={buttonDown:function(t){this.state[t]=65},buttonUp:function(t){this.state[t]=64}};var c=u,p={copyArrayElements:function(t,e,s,i,n){for(var r=0;r<n;++r)s[i+r]=t[e+r]},copyArray:function(t){return t.slice(0)},fromJSON:function(t,e){for(var s=0;s<t.JSON_PROPERTIES.length;s++)t[t.JSON_PROPERTIES[s]]=e[t.JSON_PROPERTIES[s]]},toJSON:function(t){for(var e={},s=0;s<t.JSON_PROPERTIES.length;s++)e[t.JSON_PROPERTIES[s]]=t[t.JSON_PROPERTIES[s]];return e}},d=p,f=function(t){this.nes=t,this.mem=null,this.REG_ACC=null,this.REG_X=null,this.REG_Y=null,this.REG_SP=null,this.REG_PC=null,this.REG_PC_NEW=null,this.REG_STATUS=null,this.F_CARRY=null,this.F_DECIMAL=null,this.F_INTERRUPT=null,this.F_INTERRUPT_NEW=null,this.F_OVERFLOW=null,this.F_SIGN=null,this.F_ZERO=null,this.F_NOTUSED=null,this.F_NOTUSED_NEW=null,this.F_BRK=null,this.F_BRK_NEW=null,this.opdata=null,this.cyclesToHalt=null,this.crash=null,this.irqRequested=null,this.irqType=null,this.reset()};f.prototype={IRQ_NORMAL:0,IRQ_NMI:1,IRQ_RESET:2,reset:function(){this.mem=new Array(65536);for(var t=0;t<8192;t++)this.mem[t]=255;for(var e=0;e<4;e++){var s=2048*e;this.mem[s+8]=247,this.mem[s+9]=239,this.mem[s+10]=223,this.mem[s+15]=191}for(var i=8193;i<this.mem.length;i++)this.mem[i]=0;this.REG_ACC=0,this.REG_X=0,this.REG_Y=0,this.REG_SP=511,this.REG_PC=32767,this.REG_PC_NEW=32767,this.REG_STATUS=40,this.setStatus(40),this.F_CARRY=0,this.F_DECIMAL=0,this.F_INTERRUPT=1,this.F_INTERRUPT_NEW=1,this.F_OVERFLOW=0,this.F_SIGN=0,this.F_ZERO=1,this.F_NOTUSED=1,this.F_NOTUSED_NEW=1,this.F_BRK=1,this.F_BRK_NEW=1,this.opdata=(new m).opdata,this.cyclesToHalt=0,this.crash=!1,this.irqRequested=!1,this.irqType=null},emulate:function(){var t,e;if(this.irqRequested){switch(t=this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7,this.REG_PC_NEW=this.REG_PC,this.F_INTERRUPT_NEW=this.F_INTERRUPT,this.irqType){case 0:if(0!==this.F_INTERRUPT)break;this.doIrq(t);break;case 1:this.doNonMaskableInterrupt(t);break;case 2:this.doResetInterrupt();break}this.REG_PC=this.REG_PC_NEW,this.F_INTERRUPT=this.F_INTERRUPT_NEW,this.F_BRK=this.F_BRK_NEW,this.irqRequested=!1}var s=this.opdata[this.nes.mmap.load(this.REG_PC+1)],i=s>>24,n=0,r=s>>8&255,o=this.REG_PC;this.REG_PC+=s>>16&255;var a=0;switch(r){case 0:a=this.load(o+2);break;case 1:a=this.load(o+2),a+=a<128?this.REG_PC:this.REG_PC-256;break;case 2:break;case 3:a=this.load16bit(o+2);break;case 4:a=this.REG_ACC;break;case 5:a=this.REG_PC;break;case 6:a=this.load(o+2)+this.REG_X&255;break;case 7:a=this.load(o+2)+this.REG_Y&255;break;case 8:a=this.load16bit(o+2),(65280&a)!==(a+this.REG_X&65280)&&(n=1),a+=this.REG_X;break;case 9:a=this.load16bit(o+2),(65280&a)!==(a+this.REG_Y&65280)&&(n=1),a+=this.REG_Y;break;case 10:a=this.load(o+2),(65280&a)!==(a+this.REG_X&65280)&&(n=1),a+=this.REG_X,a&=255,a=this.load16bit(a);break;case 11:a=this.load16bit(this.load(o+2)),(65280&a)!==(a+this.REG_Y&65280)&&(n=1),a+=this.REG_Y;break;case 12:a=this.load16bit(o+2),a=a<8191?this.mem[a]+(this.mem[65280&a|1+(255&a)&255]<<8):this.nes.mmap.load(a)+(this.nes.mmap.load(65280&a|1+(255&a)&255)<<8);break}switch(a&=65535,255&s){case 0:t=this.REG_ACC+this.load(a)+this.F_CARRY,0===(128&(this.REG_ACC^this.load(a)))&&0!==(128&(this.REG_ACC^t))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,this.REG_ACC=255&t,i+=n;break;case 1:this.REG_ACC=this.REG_ACC&this.load(a),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(i+=n);break;case 2:4===r?(this.F_CARRY=this.REG_ACC>>7&1,this.REG_ACC=this.REG_ACC<<1&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC):(t=this.load(a),this.F_CARRY=t>>7&1,t=t<<1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,t));break;case 3:0===this.F_CARRY&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 4:1===this.F_CARRY&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 5:0===this.F_ZERO&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 6:t=this.load(a),this.F_SIGN=t>>7&1,this.F_OVERFLOW=t>>6&1,t&=this.REG_ACC,this.F_ZERO=t;break;case 7:1===this.F_SIGN&&(i++,this.REG_PC=a);break;case 8:0!==this.F_ZERO&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 9:0===this.F_SIGN&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 10:this.REG_PC+=2,this.push(this.REG_PC>>8&255),this.push(255&this.REG_PC),this.F_BRK=1,this.push(this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7),this.F_INTERRUPT=1,this.REG_PC=this.load16bit(65534),this.REG_PC--;break;case 11:0===this.F_OVERFLOW&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 12:1===this.F_OVERFLOW&&(i+=(65280&o)!==(65280&a)?2:1,this.REG_PC=a);break;case 13:this.F_CARRY=0;break;case 14:this.F_DECIMAL=0;break;case 15:this.F_INTERRUPT=0;break;case 16:this.F_OVERFLOW=0;break;case 17:t=this.REG_ACC-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,i+=n;break;case 18:t=this.REG_X-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t;break;case 19:t=this.REG_Y-this.load(a),this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t;break;case 20:t=this.load(a)-1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,t);break;case 21:this.REG_X=this.REG_X-1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 22:this.REG_Y=this.REG_Y-1&255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 23:this.REG_ACC=255&(this.load(a)^this.REG_ACC),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,i+=n;break;case 24:t=this.load(a)+1&255,this.F_SIGN=t>>7&1,this.F_ZERO=t,this.write(a,255&t);break;case 25:this.REG_X=this.REG_X+1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 26:this.REG_Y++,this.REG_Y&=255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 27:this.REG_PC=a-1;break;case 28:this.push(this.REG_PC>>8&255),this.push(255&this.REG_PC),this.REG_PC=a-1;break;case 29:this.REG_ACC=this.load(a),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,i+=n;break;case 30:this.REG_X=this.load(a),this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X,i+=n;break;case 31:this.REG_Y=this.load(a),this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y,i+=n;break;case 32:4===r?(t=255&this.REG_ACC,this.F_CARRY=1&t,t>>=1,this.REG_ACC=t):(t=255&this.load(a),this.F_CARRY=1&t,t>>=1,this.write(a,t)),this.F_SIGN=0,this.F_ZERO=t;break;case 33:break;case 34:t=255&(this.load(a)|this.REG_ACC),this.F_SIGN=t>>7&1,this.F_ZERO=t,this.REG_ACC=t,11!==r&&(i+=n);break;case 35:this.push(this.REG_ACC);break;case 36:this.F_BRK=1,this.push(this.F_CARRY|(0===this.F_ZERO?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);break;case 37:this.REG_ACC=this.pull(),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 38:t=this.pull(),this.F_CARRY=1&t,this.F_ZERO=1===(t>>1&1)?0:1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.F_NOTUSED=1;break;case 39:4===r?(t=this.REG_ACC,e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.REG_ACC=t):(t=this.load(a),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(a,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break;case 40:4===r?(e=this.F_CARRY<<7,this.F_CARRY=1&this.REG_ACC,t=(this.REG_ACC>>1)+e,this.REG_ACC=t):(t=this.load(a),e=this.F_CARRY<<7,this.F_CARRY=1&t,t=(t>>1)+e,this.write(a,t)),this.F_SIGN=t>>7&1,this.F_ZERO=t;break;case 41:if(t=this.pull(),this.F_CARRY=1&t,this.F_ZERO=0===(t>>1&1)?1:0,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1,this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,65535===this.REG_PC)return;this.REG_PC--,this.F_NOTUSED=1;break;case 42:if(this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,65535===this.REG_PC)return;break;case 43:t=this.REG_ACC-this.load(a)-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!==(128&(this.REG_ACC^t))&&0!==(128&(this.REG_ACC^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=255&t,11!==r&&(i+=n);break;case 44:this.F_CARRY=1;break;case 45:this.F_DECIMAL=1;break;case 46:this.F_INTERRUPT=1;break;case 47:this.write(a,this.REG_ACC);break;case 48:this.write(a,this.REG_X);break;case 49:this.write(a,this.REG_Y);break;case 50:this.REG_X=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 51:this.REG_Y=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break;case 52:this.REG_X=this.REG_SP-256,this.F_SIGN=this.REG_SP>>7&1,this.F_ZERO=this.REG_X;break;case 53:this.REG_ACC=this.REG_X,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break;case 54:this.REG_SP=this.REG_X+256,this.stackWrap();break;case 55:this.REG_ACC=this.REG_Y,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break;case 56:t=this.REG_ACC&this.load(a),this.F_CARRY=1&t,this.REG_ACC=this.F_ZERO=t>>1,this.F_SIGN=0;break;case 57:this.REG_ACC=this.F_ZERO=this.REG_ACC&this.load(a),this.F_CARRY=this.F_SIGN=this.REG_ACC>>7&1;break;case 58:t=this.REG_ACC&this.load(a),this.REG_ACC=this.F_ZERO=(t>>1)+(this.F_CARRY<<7),this.F_SIGN=this.F_CARRY,this.F_CARRY=t>>7&1,this.F_OVERFLOW=1&(t>>7^t>>6);break;case 59:t=(this.REG_X&this.REG_ACC)-this.load(a),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!==(128&(this.REG_X^t))&&0!==(128&(this.REG_X^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_X=255&t;break;case 60:this.REG_ACC=this.REG_X=this.F_ZERO=this.load(a),this.F_SIGN=this.REG_ACC>>7&1,i+=n;break;case 61:this.write(a,this.REG_ACC&this.REG_X);break;case 62:t=this.load(a)-1&255,this.write(a,t),t=this.REG_ACC-t,this.F_CARRY=t>=0?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,11!==r&&(i+=n);break;case 63:t=this.load(a)+1&255,this.write(a,t),t=this.REG_ACC-t-(1-this.F_CARRY),this.F_SIGN=t>>7&1,this.F_ZERO=255&t,0!==(128&(this.REG_ACC^t))&&0!==(128&(this.REG_ACC^this.load(a)))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t<0?0:1,this.REG_ACC=255&t,11!==r&&(i+=n);break;case 64:t=this.load(a),e=this.F_CARRY,this.F_CARRY=t>>7&1,t=(t<<1&255)+e,this.write(a,t),this.REG_ACC=this.REG_ACC&t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(i+=n);break;case 65:t=this.load(a),e=this.F_CARRY<<7,this.F_CARRY=1&t,t=(t>>1)+e,this.write(a,t),t=this.REG_ACC+this.load(a)+this.F_CARRY,0===(128&(this.REG_ACC^this.load(a)))&&0!==(128&(this.REG_ACC^t))?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=t>255?1:0,this.F_SIGN=t>>7&1,this.F_ZERO=255&t,this.REG_ACC=255&t,11!==r&&(i+=n);break;case 66:t=this.load(a),this.F_CARRY=t>>7&1,t=t<<1&255,this.write(a,t),this.REG_ACC=this.REG_ACC|t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(i+=n);break;case 67:t=255&this.load(a),this.F_CARRY=1&t,t>>=1,this.write(a,t),this.REG_ACC=this.REG_ACC^t,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,11!==r&&(i+=n);break;case 68:break;case 69:this.load(a),11!==r&&(i+=n);break;default:this.nes.stop(),this.nes.crashMessage="Game crashed, invalid opcode at address $"+o.toString(16);break}return i},load:function(t){return t<8192?this.mem[2047&t]:this.nes.mmap.load(t)},load16bit:function(t){return t<8191?this.mem[2047&t]|this.mem[t+1&2047]<<8:this.nes.mmap.load(t)|this.nes.mmap.load(t+1)<<8},write:function(t,e){t<8192?this.mem[2047&t]=e:this.nes.mmap.write(t,e)},requestIrq:function(t){this.irqRequested&&t===this.IRQ_NORMAL||(this.irqRequested=!0,this.irqType=t)},push:function(t){this.nes.mmap.write(this.REG_SP,t),this.REG_SP--,this.REG_SP=256|255&this.REG_SP},stackWrap:function(){this.REG_SP=256|255&this.REG_SP},pull:function(){return this.REG_SP++,this.REG_SP=256|255&this.REG_SP,this.nes.mmap.load(this.REG_SP)},pageCrossed:function(t,e){return(65280&t)!==(65280&e)},haltCycles:function(t){this.cyclesToHalt+=t},doNonMaskableInterrupt:function(t){0!==(128&this.nes.mmap.load(8192))&&(this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(255&this.REG_PC_NEW),this.push(t),this.REG_PC_NEW=this.nes.mmap.load(65530)|this.nes.mmap.load(65531)<<8,this.REG_PC_NEW--)},doResetInterrupt:function(){this.REG_PC_NEW=this.nes.mmap.load(65532)|this.nes.mmap.load(65533)<<8,this.REG_PC_NEW--},doIrq:function(t){this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(255&this.REG_PC_NEW),this.push(t),this.F_INTERRUPT_NEW=1,this.F_BRK_NEW=0,this.REG_PC_NEW=this.nes.mmap.load(65534)|this.nes.mmap.load(65535)<<8,this.REG_PC_NEW--},getStatus:function(){return this.F_CARRY|this.F_ZERO<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7},setStatus:function(t){this.F_CARRY=1&t,this.F_ZERO=t>>1&1,this.F_INTERRUPT=t>>2&1,this.F_DECIMAL=t>>3&1,this.F_BRK=t>>4&1,this.F_NOTUSED=t>>5&1,this.F_OVERFLOW=t>>6&1,this.F_SIGN=t>>7&1},JSON_PROPERTIES:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return d.toJSON(this)},fromJSON:function(t){d.fromJSON(this,t)}};var m=function(){this.opdata=new Array(256);for(var t=0;t<256;t++)this.opdata[t]=255;this.setOp(this.INS_ADC,105,this.ADDR_IMM,2,2),this.setOp(this.INS_ADC,101,this.ADDR_ZP,2,3),this.setOp(this.INS_ADC,117,this.ADDR_ZPX,2,4),this.setOp(this.INS_ADC,109,this.ADDR_ABS,3,4),this.setOp(this.INS_ADC,125,this.ADDR_ABSX,3,4),this.setOp(this.INS_ADC,121,this.ADDR_ABSY,3,4),this.setOp(this.INS_ADC,97,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ADC,113,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_AND,41,this.ADDR_IMM,2,2),this.setOp(this.INS_AND,37,this.ADDR_ZP,2,3),this.setOp(this.INS_AND,53,this.ADDR_ZPX,2,4),this.setOp(this.INS_AND,45,this.ADDR_ABS,3,4),this.setOp(this.INS_AND,61,this.ADDR_ABSX,3,4),this.setOp(this.INS_AND,57,this.ADDR_ABSY,3,4),this.setOp(this.INS_AND,33,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_AND,49,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_ASL,10,this.ADDR_ACC,1,2),this.setOp(this.INS_ASL,6,this.ADDR_ZP,2,5),this.setOp(this.INS_ASL,22,this.ADDR_ZPX,2,6),this.setOp(this.INS_ASL,14,this.ADDR_ABS,3,6),this.setOp(this.INS_ASL,30,this.ADDR_ABSX,3,7),this.setOp(this.INS_BCC,144,this.ADDR_REL,2,2),this.setOp(this.INS_BCS,176,this.ADDR_REL,2,2),this.setOp(this.INS_BEQ,240,this.ADDR_REL,2,2),this.setOp(this.INS_BIT,36,this.ADDR_ZP,2,3),this.setOp(this.INS_BIT,44,this.ADDR_ABS,3,4),this.setOp(this.INS_BMI,48,this.ADDR_REL,2,2),this.setOp(this.INS_BNE,208,this.ADDR_REL,2,2),this.setOp(this.INS_BPL,16,this.ADDR_REL,2,2),this.setOp(this.INS_BRK,0,this.ADDR_IMP,1,7),this.setOp(this.INS_BVC,80,this.ADDR_REL,2,2),this.setOp(this.INS_BVS,112,this.ADDR_REL,2,2),this.setOp(this.INS_CLC,24,this.ADDR_IMP,1,2),this.setOp(this.INS_CLD,216,this.ADDR_IMP,1,2),this.setOp(this.INS_CLI,88,this.ADDR_IMP,1,2),this.setOp(this.INS_CLV,184,this.ADDR_IMP,1,2),this.setOp(this.INS_CMP,201,this.ADDR_IMM,2,2),this.setOp(this.INS_CMP,197,this.ADDR_ZP,2,3),this.setOp(this.INS_CMP,213,this.ADDR_ZPX,2,4),this.setOp(this.INS_CMP,205,this.ADDR_ABS,3,4),this.setOp(this.INS_CMP,221,this.ADDR_ABSX,3,4),this.setOp(this.INS_CMP,217,this.ADDR_ABSY,3,4),this.setOp(this.INS_CMP,193,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_CMP,209,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_CPX,224,this.ADDR_IMM,2,2),this.setOp(this.INS_CPX,228,this.ADDR_ZP,2,3),this.setOp(this.INS_CPX,236,this.ADDR_ABS,3,4),this.setOp(this.INS_CPY,192,this.ADDR_IMM,2,2),this.setOp(this.INS_CPY,196,this.ADDR_ZP,2,3),this.setOp(this.INS_CPY,204,this.ADDR_ABS,3,4),this.setOp(this.INS_DEC,198,this.ADDR_ZP,2,5),this.setOp(this.INS_DEC,214,this.ADDR_ZPX,2,6),this.setOp(this.INS_DEC,206,this.ADDR_ABS,3,6),this.setOp(this.INS_DEC,222,this.ADDR_ABSX,3,7),this.setOp(this.INS_DEX,202,this.ADDR_IMP,1,2),this.setOp(this.INS_DEY,136,this.ADDR_IMP,1,2),this.setOp(this.INS_EOR,73,this.ADDR_IMM,2,2),this.setOp(this.INS_EOR,69,this.ADDR_ZP,2,3),this.setOp(this.INS_EOR,85,this.ADDR_ZPX,2,4),this.setOp(this.INS_EOR,77,this.ADDR_ABS,3,4),this.setOp(this.INS_EOR,93,this.ADDR_ABSX,3,4),this.setOp(this.INS_EOR,89,this.ADDR_ABSY,3,4),this.setOp(this.INS_EOR,65,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_EOR,81,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_INC,230,this.ADDR_ZP,2,5),this.setOp(this.INS_INC,246,this.ADDR_ZPX,2,6),this.setOp(this.INS_INC,238,this.ADDR_ABS,3,6),this.setOp(this.INS_INC,254,this.ADDR_ABSX,3,7),this.setOp(this.INS_INX,232,this.ADDR_IMP,1,2),this.setOp(this.INS_INY,200,this.ADDR_IMP,1,2),this.setOp(this.INS_JMP,76,this.ADDR_ABS,3,3),this.setOp(this.INS_JMP,108,this.ADDR_INDABS,3,5),this.setOp(this.INS_JSR,32,this.ADDR_ABS,3,6),this.setOp(this.INS_LDA,169,this.ADDR_IMM,2,2),this.setOp(this.INS_LDA,165,this.ADDR_ZP,2,3),this.setOp(this.INS_LDA,181,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDA,173,this.ADDR_ABS,3,4),this.setOp(this.INS_LDA,189,this.ADDR_ABSX,3,4),this.setOp(this.INS_LDA,185,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDA,161,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LDA,177,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LDX,162,this.ADDR_IMM,2,2),this.setOp(this.INS_LDX,166,this.ADDR_ZP,2,3),this.setOp(this.INS_LDX,182,this.ADDR_ZPY,2,4),this.setOp(this.INS_LDX,174,this.ADDR_ABS,3,4),this.setOp(this.INS_LDX,190,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDY,160,this.ADDR_IMM,2,2),this.setOp(this.INS_LDY,164,this.ADDR_ZP,2,3),this.setOp(this.INS_LDY,180,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDY,172,this.ADDR_ABS,3,4),this.setOp(this.INS_LDY,188,this.ADDR_ABSX,3,4),this.setOp(this.INS_LSR,74,this.ADDR_ACC,1,2),this.setOp(this.INS_LSR,70,this.ADDR_ZP,2,5),this.setOp(this.INS_LSR,86,this.ADDR_ZPX,2,6),this.setOp(this.INS_LSR,78,this.ADDR_ABS,3,6),this.setOp(this.INS_LSR,94,this.ADDR_ABSX,3,7),this.setOp(this.INS_NOP,26,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,58,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,90,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,122,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,218,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,234,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,250,this.ADDR_IMP,1,2),this.setOp(this.INS_ORA,9,this.ADDR_IMM,2,2),this.setOp(this.INS_ORA,5,this.ADDR_ZP,2,3),this.setOp(this.INS_ORA,21,this.ADDR_ZPX,2,4),this.setOp(this.INS_ORA,13,this.ADDR_ABS,3,4),this.setOp(this.INS_ORA,29,this.ADDR_ABSX,3,4),this.setOp(this.INS_ORA,25,this.ADDR_ABSY,3,4),this.setOp(this.INS_ORA,1,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ORA,17,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_PHA,72,this.ADDR_IMP,1,3),this.setOp(this.INS_PHP,8,this.ADDR_IMP,1,3),this.setOp(this.INS_PLA,104,this.ADDR_IMP,1,4),this.setOp(this.INS_PLP,40,this.ADDR_IMP,1,4),this.setOp(this.INS_ROL,42,this.ADDR_ACC,1,2),this.setOp(this.INS_ROL,38,this.ADDR_ZP,2,5),this.setOp(this.INS_ROL,54,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROL,46,this.ADDR_ABS,3,6),this.setOp(this.INS_ROL,62,this.ADDR_ABSX,3,7),this.setOp(this.INS_ROR,106,this.ADDR_ACC,1,2),this.setOp(this.INS_ROR,102,this.ADDR_ZP,2,5),this.setOp(this.INS_ROR,118,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROR,110,this.ADDR_ABS,3,6),this.setOp(this.INS_ROR,126,this.ADDR_ABSX,3,7),this.setOp(this.INS_RTI,64,this.ADDR_IMP,1,6),this.setOp(this.INS_RTS,96,this.ADDR_IMP,1,6),this.setOp(this.INS_SBC,233,this.ADDR_IMM,2,2),this.setOp(this.INS_SBC,229,this.ADDR_ZP,2,3),this.setOp(this.INS_SBC,245,this.ADDR_ZPX,2,4),this.setOp(this.INS_SBC,237,this.ADDR_ABS,3,4),this.setOp(this.INS_SBC,253,this.ADDR_ABSX,3,4),this.setOp(this.INS_SBC,249,this.ADDR_ABSY,3,4),this.setOp(this.INS_SBC,225,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SBC,241,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_SEC,56,this.ADDR_IMP,1,2),this.setOp(this.INS_SED,248,this.ADDR_IMP,1,2),this.setOp(this.INS_SEI,120,this.ADDR_IMP,1,2),this.setOp(this.INS_STA,133,this.ADDR_ZP,2,3),this.setOp(this.INS_STA,149,this.ADDR_ZPX,2,4),this.setOp(this.INS_STA,141,this.ADDR_ABS,3,4),this.setOp(this.INS_STA,157,this.ADDR_ABSX,3,5),this.setOp(this.INS_STA,153,this.ADDR_ABSY,3,5),this.setOp(this.INS_STA,129,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_STA,145,this.ADDR_POSTIDXIND,2,6),this.setOp(this.INS_STX,134,this.ADDR_ZP,2,3),this.setOp(this.INS_STX,150,this.ADDR_ZPY,2,4),this.setOp(this.INS_STX,142,this.ADDR_ABS,3,4),this.setOp(this.INS_STY,132,this.ADDR_ZP,2,3),this.setOp(this.INS_STY,148,this.ADDR_ZPX,2,4),this.setOp(this.INS_STY,140,this.ADDR_ABS,3,4),this.setOp(this.INS_TAX,170,this.ADDR_IMP,1,2),this.setOp(this.INS_TAY,168,this.ADDR_IMP,1,2),this.setOp(this.INS_TSX,186,this.ADDR_IMP,1,2),this.setOp(this.INS_TXA,138,this.ADDR_IMP,1,2),this.setOp(this.INS_TXS,154,this.ADDR_IMP,1,2),this.setOp(this.INS_TYA,152,this.ADDR_IMP,1,2),this.setOp(this.INS_ALR,75,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,11,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,43,this.ADDR_IMM,2,2),this.setOp(this.INS_ARR,107,this.ADDR_IMM,2,2),this.setOp(this.INS_AXS,203,this.ADDR_IMM,2,2),this.setOp(this.INS_LAX,163,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LAX,167,this.ADDR_ZP,2,3),this.setOp(this.INS_LAX,175,this.ADDR_ABS,3,4),this.setOp(this.INS_LAX,179,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LAX,183,this.ADDR_ZPY,2,4),this.setOp(this.INS_LAX,191,this.ADDR_ABSY,3,4),this.setOp(this.INS_SAX,131,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SAX,135,this.ADDR_ZP,2,3),this.setOp(this.INS_SAX,143,this.ADDR_ABS,3,4),this.setOp(this.INS_SAX,151,this.ADDR_ZPY,2,4),this.setOp(this.INS_DCP,195,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_DCP,199,this.ADDR_ZP,2,5),this.setOp(this.INS_DCP,207,this.ADDR_ABS,3,6),this.setOp(this.INS_DCP,211,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_DCP,215,this.ADDR_ZPX,2,6),this.setOp(this.INS_DCP,219,this.ADDR_ABSY,3,7),this.setOp(this.INS_DCP,223,this.ADDR_ABSX,3,7),this.setOp(this.INS_ISC,227,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_ISC,231,this.ADDR_ZP,2,5),this.setOp(this.INS_ISC,239,this.ADDR_ABS,3,6),this.setOp(this.INS_ISC,243,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_ISC,247,this.ADDR_ZPX,2,6),this.setOp(this.INS_ISC,251,this.ADDR_ABSY,3,7),this.setOp(this.INS_ISC,255,this.ADDR_ABSX,3,7),this.setOp(this.INS_RLA,35,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RLA,39,this.ADDR_ZP,2,5),this.setOp(this.INS_RLA,47,this.ADDR_ABS,3,6),this.setOp(this.INS_RLA,51,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RLA,55,this.ADDR_ZPX,2,6),this.setOp(this.INS_RLA,59,this.ADDR_ABSY,3,7),this.setOp(this.INS_RLA,63,this.ADDR_ABSX,3,7),this.setOp(this.INS_RRA,99,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RRA,103,this.ADDR_ZP,2,5),this.setOp(this.INS_RRA,111,this.ADDR_ABS,3,6),this.setOp(this.INS_RRA,115,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RRA,119,this.ADDR_ZPX,2,6),this.setOp(this.INS_RRA,123,this.ADDR_ABSY,3,7),this.setOp(this.INS_RRA,127,this.ADDR_ABSX,3,7),this.setOp(this.INS_SLO,3,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SLO,7,this.ADDR_ZP,2,5),this.setOp(this.INS_SLO,15,this.ADDR_ABS,3,6),this.setOp(this.INS_SLO,19,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SLO,23,this.ADDR_ZPX,2,6),this.setOp(this.INS_SLO,27,this.ADDR_ABSY,3,7),this.setOp(this.INS_SLO,31,this.ADDR_ABSX,3,7),this.setOp(this.INS_SRE,67,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SRE,71,this.ADDR_ZP,2,5),this.setOp(this.INS_SRE,79,this.ADDR_ABS,3,6),this.setOp(this.INS_SRE,83,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SRE,87,this.ADDR_ZPX,2,6),this.setOp(this.INS_SRE,91,this.ADDR_ABSY,3,7),this.setOp(this.INS_SRE,95,this.ADDR_ABSX,3,7),this.setOp(this.INS_SKB,128,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,130,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,137,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,194,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,226,this.ADDR_IMM,2,2),this.setOp(this.INS_IGN,12,this.ADDR_ABS,3,4),this.setOp(this.INS_IGN,28,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,60,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,92,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,124,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,220,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,252,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,4,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,68,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,100,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,20,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,52,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,84,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,116,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,212,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,244,this.ADDR_ZPX,2,4),this.cycTable=new Array(7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7),this.instname=new Array(70),this.instname[0]="ADC",this.instname[1]="AND",this.instname[2]="ASL",this.instname[3]="BCC",this.instname[4]="BCS",this.instname[5]="BEQ",this.instname[6]="BIT",this.instname[7]="BMI",this.instname[8]="BNE",this.instname[9]="BPL",this.instname[10]="BRK",this.instname[11]="BVC",this.instname[12]="BVS",this.instname[13]="CLC",this.instname[14]="CLD",this.instname[15]="CLI",this.instname[16]="CLV",this.instname[17]="CMP",this.instname[18]="CPX",this.instname[19]="CPY",this.instname[20]="DEC",this.instname[21]="DEX",this.instname[22]="DEY",this.instname[23]="EOR",this.instname[24]="INC",this.instname[25]="INX",this.instname[26]="INY",this.instname[27]="JMP",this.instname[28]="JSR",this.instname[29]="LDA",this.instname[30]="LDX",this.instname[31]="LDY",this.instname[32]="LSR",this.instname[33]="NOP",this.instname[34]="ORA",this.instname[35]="PHA",this.instname[36]="PHP",this.instname[37]="PLA",this.instname[38]="PLP",this.instname[39]="ROL",this.instname[40]="ROR",this.instname[41]="RTI",this.instname[42]="RTS",this.instname[43]="SBC",this.instname[44]="SEC",this.instname[45]="SED",this.instname[46]="SEI",this.instname[47]="STA",this.instname[48]="STX",this.instname[49]="STY",this.instname[50]="TAX",this.instname[51]="TAY",this.instname[52]="TSX",this.instname[53]="TXA",this.instname[54]="TXS",this.instname[55]="TYA",this.instname[56]="ALR",this.instname[57]="ANC",this.instname[58]="ARR",this.instname[59]="AXS",this.instname[60]="LAX",this.instname[61]="SAX",this.instname[62]="DCP",this.instname[63]="ISC",this.instname[64]="RLA",this.instname[65]="RRA",this.instname[66]="SLO",this.instname[67]="SRE",this.instname[68]="SKB",this.instname[69]="IGN",this.addrDesc=new Array("Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   ")};m.prototype={INS_ADC:0,INS_AND:1,INS_ASL:2,INS_BCC:3,INS_BCS:4,INS_BEQ:5,INS_BIT:6,INS_BMI:7,INS_BNE:8,INS_BPL:9,INS_BRK:10,INS_BVC:11,INS_BVS:12,INS_CLC:13,INS_CLD:14,INS_CLI:15,INS_CLV:16,INS_CMP:17,INS_CPX:18,INS_CPY:19,INS_DEC:20,INS_DEX:21,INS_DEY:22,INS_EOR:23,INS_INC:24,INS_INX:25,INS_INY:26,INS_JMP:27,INS_JSR:28,INS_LDA:29,INS_LDX:30,INS_LDY:31,INS_LSR:32,INS_NOP:33,INS_ORA:34,INS_PHA:35,INS_PHP:36,INS_PLA:37,INS_PLP:38,INS_ROL:39,INS_ROR:40,INS_RTI:41,INS_RTS:42,INS_SBC:43,INS_SEC:44,INS_SED:45,INS_SEI:46,INS_STA:47,INS_STX:48,INS_STY:49,INS_TAX:50,INS_TAY:51,INS_TSX:52,INS_TXA:53,INS_TXS:54,INS_TYA:55,INS_ALR:56,INS_ANC:57,INS_ARR:58,INS_AXS:59,INS_LAX:60,INS_SAX:61,INS_DCP:62,INS_ISC:63,INS_RLA:64,INS_RRA:65,INS_SLO:66,INS_SRE:67,INS_SKB:68,INS_IGN:69,INS_DUMMY:70,ADDR_ZP:0,ADDR_REL:1,ADDR_IMP:2,ADDR_ABS:3,ADDR_ACC:4,ADDR_IMM:5,ADDR_ZPX:6,ADDR_ZPY:7,ADDR_ABSX:8,ADDR_ABSY:9,ADDR_PREIDXIND:10,ADDR_POSTIDXIND:11,ADDR_INDABS:12,setOp:function(t,e,s,i,n){this.opdata[e]=255&t|(255&s)<<8|(255&i)<<16|(255&n)<<24}};var _=f,g=function(){this.pix=new Array(64),this.fbIndex=null,this.tIndex=null,this.x=null,this.y=null,this.w=null,this.h=null,this.incX=null,this.incY=null,this.palIndex=null,this.tpri=null,this.c=null,this.initialized=!1,this.opaque=new Array(8)};g.prototype={setBuffer:function(t){for(this.y=0;this.y<8;this.y++)this.setScanline(this.y,t[this.y],t[this.y+8])},setScanline:function(t,e,s){for(this.initialized=!0,this.tIndex=t<<3,this.x=0;this.x<8;this.x++)this.pix[this.tIndex+this.x]=(e>>7-this.x&1)+((s>>7-this.x&1)<<1),0===this.pix[this.tIndex+this.x]&&(this.opaque[t]=!1)},render:function(t,e,s,i,n,r,o,a,h,l,u,c,p){if(!(r<-7||r>=256||o<-7||o>=240))if(this.w=i-e,this.h=n-s,r<0&&(e-=r),r+i>=256&&(i=256-r),o<0&&(s-=o),o+n>=240&&(n=240-o),l||u)if(l&&!u)for(this.fbIndex=(o<<8)+r,this.tIndex=7,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<i&&this.y>=s&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&c<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|c,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256,this.tIndex+=16}else if(u&&!l)for(this.fbIndex=(o<<8)+r,this.tIndex=56,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<i&&this.y>=s&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&c<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|c,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256,this.tIndex-=16}else for(this.fbIndex=(o<<8)+r,this.tIndex=63,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<i&&this.y>=s&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&c<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|c,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256}else for(this.fbIndex=(o<<8)+r,this.tIndex=0,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=e&&this.x<i&&this.y>=s&&this.y<n&&(this.palIndex=this.pix[this.tIndex],this.tpri=p[this.fbIndex],0!==this.palIndex&&c<=(255&this.tpri)&&(t[this.fbIndex]=h[this.palIndex+a],this.tpri=3840&this.tpri|c,p[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256}},isTransparent:function(t,e){return 0===this.pix[(e<<3)+t]},toJSON:function(){return{opaque:this.opaque,pix:this.pix}},fromJSON:function(t){this.opaque=t.opaque,this.pix=t.pix}};var R=g,v=R,S=p,y=function(t){this.nes=t,this.vramMem=null,this.spriteMem=null,this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=null,this.firstWrite=null,this.sramAddress=null,this.currentMirroring=null,this.requestEndFrame=null,this.nmiOk=null,this.dummyCycleToggle=null,this.validTileData=null,this.nmiCounter=null,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=null,this.f_spriteSize=null,this.f_bgPatternTable=null,this.f_spPatternTable=null,this.f_addrInc=null,this.f_nTblAddress=null,this.f_color=null,this.f_spVisibility=null,this.f_bgVisibility=null,this.f_spClipping=null,this.f_bgClipping=null,this.f_dispType=null,this.cntFV=null,this.cntV=null,this.cntH=null,this.cntVT=null,this.cntHT=null,this.regFV=null,this.regV=null,this.regH=null,this.regVT=null,this.regHT=null,this.regFH=null,this.regS=null,this.curNt=null,this.attrib=null,this.buffer=null,this.bgbuffer=null,this.pixrendered=null,this.validTileData=null,this.scantile=null,this.scanline=null,this.lastRenderedScanline=null,this.curX=null,this.sprX=null,this.sprY=null,this.sprTile=null,this.sprCol=null,this.vertFlip=null,this.horiFlip=null,this.bgPriority=null,this.spr0HitX=null,this.spr0HitY=null,this.hitSpr0=null,this.sprPalette=null,this.imgPalette=null,this.ptTile=null,this.ntable1=null,this.currentMirroring=null,this.nameTable=null,this.vramMirrorTable=null,this.palTable=null,this.showSpr0Hit=!1,this.clipToTvSize=!0,this.reset()};y.prototype={STATUS_VRAMWRITE:4,STATUS_SLSPRITECOUNT:5,STATUS_SPRITE0HIT:6,STATUS_VBLANK:7,reset:function(){var t;for(this.vramMem=new Array(32768),this.spriteMem=new Array(256),t=0;t<this.vramMem.length;t++)this.vramMem[t]=0;for(t=0;t<this.spriteMem.length;t++)this.spriteMem[t]=0;for(this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=0,this.firstWrite=!0,this.sramAddress=0,this.currentMirroring=-1,this.requestEndFrame=!1,this.nmiOk=!1,this.dummyCycleToggle=!1,this.validTileData=!1,this.nmiCounter=0,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=0,this.f_spriteSize=0,this.f_bgPatternTable=0,this.f_spPatternTable=0,this.f_addrInc=0,this.f_nTblAddress=0,this.f_color=0,this.f_spVisibility=0,this.f_bgVisibility=0,this.f_spClipping=0,this.f_bgClipping=0,this.f_dispType=0,this.cntFV=0,this.cntV=0,this.cntH=0,this.cntVT=0,this.cntHT=0,this.regFV=0,this.regV=0,this.regH=0,this.regVT=0,this.regHT=0,this.regFH=0,this.regS=0,this.curNt=null,this.attrib=new Array(32),this.buffer=new Array(61440),this.bgbuffer=new Array(61440),this.pixrendered=new Array(61440),this.validTileData=null,this.scantile=new Array(32),this.scanline=0,this.lastRenderedScanline=-1,this.curX=0,this.sprX=new Array(64),this.sprY=new Array(64),this.sprTile=new Array(64),this.sprCol=new Array(64),this.vertFlip=new Array(64),this.horiFlip=new Array(64),this.bgPriority=new Array(64),this.spr0HitX=0,this.spr0HitY=0,this.hitSpr0=!1,this.sprPalette=new Array(16),this.imgPalette=new Array(16),this.ptTile=new Array(512),t=0;t<512;t++)this.ptTile[t]=new v;for(this.ntable1=new Array(4),this.currentMirroring=-1,this.nameTable=new Array(4),t=0;t<4;t++)this.nameTable[t]=new b(32,32,"Nt"+t);for(this.vramMirrorTable=new Array(32768),t=0;t<32768;t++)this.vramMirrorTable[t]=t;this.palTable=new A,this.palTable.loadNTSCPalette(),this.updateControlReg1(0),this.updateControlReg2(0)},setMirroring:function(t){if(t!==this.currentMirroring){this.currentMirroring=t,this.triggerRendering(),null===this.vramMirrorTable&&(this.vramMirrorTable=new Array(32768));for(var e=0;e<32768;e++)this.vramMirrorTable[e]=e;this.defineMirrorRegion(16160,16128,32),this.defineMirrorRegion(16192,16128,32),this.defineMirrorRegion(16256,16128,32),this.defineMirrorRegion(16320,16128,32),this.defineMirrorRegion(12288,8192,3840),this.defineMirrorRegion(16384,0,16384),t===this.nes.rom.HORIZONTAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(11264,10240,1024)):t===this.nes.rom.VERTICAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=0,this.ntable1[3]=1,this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,9216,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=0,this.ntable1[3]=0,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,8192,1024)):t===this.nes.rom.SINGLESCREEN_MIRRORING2?(this.ntable1[0]=1,this.ntable1[1]=1,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,9216,1024),this.defineMirrorRegion(10240,9216,1024),this.defineMirrorRegion(11264,9216,1024)):(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=2,this.ntable1[3]=3)}},defineMirrorRegion:function(t,e,s){for(var i=0;i<s;i++)this.vramMirrorTable[t+i]=e+i},startVBlank:function(){this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI),this.lastRenderedScanline<239&&this.renderFramePartially(this.lastRenderedScanline+1,240-this.lastRenderedScanline),this.endFrame(),this.lastRenderedScanline=-1},endScanline:function(){switch(this.scanline){case 19:this.dummyCycleToggle&&(this.curX=1,this.dummyCycleToggle=!this.dummyCycleToggle);break;case 20:this.setStatusFlag(this.STATUS_VBLANK,!1),this.setStatusFlag(this.STATUS_SPRITE0HIT,!1),this.hitSpr0=!1,this.spr0HitX=-1,this.spr0HitY=-1,(1===this.f_bgVisibility||1===this.f_spVisibility)&&(this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,1===this.f_bgVisibility&&this.renderBgScanline(!1,0)),1===this.f_bgVisibility&&1===this.f_spVisibility&&this.checkSprite0(0),(1===this.f_bgVisibility||1===this.f_spVisibility)&&this.nes.mmap.clockIrqCounter();break;case 261:this.setStatusFlag(this.STATUS_VBLANK,!0),this.requestEndFrame=!0,this.nmiCounter=9,this.scanline=-1;break;default:this.scanline>=21&&this.scanline<=260&&(1===this.f_bgVisibility&&(this.scanlineAlreadyRendered||(this.cntHT=this.regHT,this.cntH=this.regH,this.renderBgScanline(!0,this.scanline+1-21)),this.scanlineAlreadyRendered=!1,!this.hitSpr0&&1===this.f_spVisibility&&this.sprX[0]>=-7&&this.sprX[0]<256&&this.sprY[0]+1<=this.scanline-20&&this.sprY[0]+1+(0===this.f_spriteSize?8:16)>=this.scanline-20&&this.checkSprite0(this.scanline-20)&&(this.hitSpr0=!0)),(1===this.f_bgVisibility||1===this.f_spVisibility)&&this.nes.mmap.clockIrqCounter())}this.scanline++,this.regsToAddress(),this.cntsToAddress()},startFrame:function(){var t=0;if(0===this.f_dispType)t=this.imgPalette[0];else switch(this.f_color){case 0:t=0;break;case 1:t=65280;break;case 2:t=16711680;break;case 3:t=0;break;case 4:t=255;break;default:t=0}var e,s=this.buffer;for(e=0;e<61440;e++)s[e]=t;var i=this.pixrendered;for(e=0;e<i.length;e++)i[e]=65},endFrame:function(){var t,e,s,i=this.buffer;if(this.showSpr0Hit){if(this.sprX[0]>=0&&this.sprX[0]<256&&this.sprY[0]>=0&&this.sprY[0]<240){for(t=0;t<256;t++)i[(this.sprY[0]<<8)+t]=16733525;for(t=0;t<240;t++)i[(t<<8)+this.sprX[0]]=16733525}if(this.spr0HitX>=0&&this.spr0HitX<256&&this.spr0HitY>=0&&this.spr0HitY<240){for(t=0;t<256;t++)i[(this.spr0HitY<<8)+t]=5635925;for(t=0;t<240;t++)i[(t<<8)+this.spr0HitX]=5635925}}if(this.clipToTvSize||0===this.f_bgClipping||0===this.f_spClipping)for(s=0;s<240;s++)for(e=0;e<8;e++)i[(s<<8)+e]=0;if(this.clipToTvSize)for(s=0;s<240;s++)for(e=0;e<8;e++)i[255+(s<<8)-e]=0;if(this.clipToTvSize)for(s=0;s<8;s++)for(e=0;e<256;e++)i[(s<<8)+e]=0,i[(239-s<<8)+e]=0;this.nes.ui.writeFrame(i)},updateControlReg1:function(t){this.triggerRendering(),this.f_nmiOnVblank=t>>7&1,this.f_spriteSize=t>>5&1,this.f_bgPatternTable=t>>4&1,this.f_spPatternTable=t>>3&1,this.f_addrInc=t>>2&1,this.f_nTblAddress=3&t,this.regV=t>>1&1,this.regH=1&t,this.regS=t>>4&1},updateControlReg2:function(t){this.triggerRendering(),this.f_color=t>>5&7,this.f_spVisibility=t>>4&1,this.f_bgVisibility=t>>3&1,this.f_spClipping=t>>2&1,this.f_bgClipping=t>>1&1,this.f_dispType=1&t,0===this.f_dispType&&this.palTable.setEmphasis(this.f_color),this.updatePalettes()},setStatusFlag:function(t,e){var s=1<<t;this.nes.cpu.mem[8194]=this.nes.cpu.mem[8194]&255-s|(e?s:0)},readStatusRegister:function(){var t=this.nes.cpu.mem[8194];return this.firstWrite=!0,this.setStatusFlag(this.STATUS_VBLANK,!1),t},writeSRAMAddress:function(t){this.sramAddress=t},sramLoad:function(){return this.spriteMem[this.sramAddress]},sramWrite:function(t){this.spriteMem[this.sramAddress]=t,this.spriteRamWriteUpdate(this.sramAddress,t),this.sramAddress++,this.sramAddress%=256},scrollWrite:function(t){this.triggerRendering(),this.firstWrite?(this.regHT=t>>3&31,this.regFH=7&t):(this.regFV=7&t,this.regVT=t>>3&31),this.firstWrite=!this.firstWrite},writeVRAMAddress:function(t){this.firstWrite?(this.regFV=t>>4&3,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=7&this.regVT|(3&t)<<3):(this.triggerRendering(),this.regVT=24&this.regVT|t>>5&7,this.regHT=31&t,this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.checkSprite0(this.scanline-20)),this.firstWrite=!this.firstWrite,this.cntsToAddress(),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress)},vramLoad:function(){var t;return this.cntsToAddress(),this.regsToAddress(),this.vramAddress<=16127?(t=this.vramBufferedReadValue,this.vramAddress<8192?this.vramBufferedReadValue=this.vramMem[this.vramAddress]:this.vramBufferedReadValue=this.mirroredLoad(this.vramAddress),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress),this.vramAddress+=1===this.f_addrInc?32:1,this.cntsFromAddress(),this.regsFromAddress(),t):(t=this.mirroredLoad(this.vramAddress),this.vramAddress+=1===this.f_addrInc?32:1,this.cntsFromAddress(),this.regsFromAddress(),t)},vramWrite:function(t){this.triggerRendering(),this.cntsToAddress(),this.regsToAddress(),this.vramAddress>=8192?this.mirroredWrite(this.vramAddress,t):(this.writeMem(this.vramAddress,t),this.nes.mmap.latchAccess(this.vramAddress)),this.vramAddress+=1===this.f_addrInc?32:1,this.regsFromAddress(),this.cntsFromAddress()},sramDMA:function(t){for(var e,s=256*t,i=this.sramAddress;i<256;i++)e=this.nes.cpu.mem[s+i],this.spriteMem[i]=e,this.spriteRamWriteUpdate(i,e);this.nes.cpu.haltCycles(513)},regsFromAddress:function(){var t=this.vramTmpAddress>>8&255;this.regFV=t>>4&7,this.regV=t>>3&1,this.regH=t>>2&1,this.regVT=7&this.regVT|(3&t)<<3,t=255&this.vramTmpAddress,this.regVT=24&this.regVT|t>>5&7,this.regHT=31&t},cntsFromAddress:function(){var t=this.vramAddress>>8&255;this.cntFV=t>>4&3,this.cntV=t>>3&1,this.cntH=t>>2&1,this.cntVT=7&this.cntVT|(3&t)<<3,t=255&this.vramAddress,this.cntVT=24&this.cntVT|t>>5&7,this.cntHT=31&t},regsToAddress:function(){var t=(7&this.regFV)<<4;t|=(1&this.regV)<<3,t|=(1&this.regH)<<2,t|=this.regVT>>3&3;var e=(7&this.regVT)<<5;e|=31&this.regHT,this.vramTmpAddress=32767&(t<<8|e)},cntsToAddress:function(){var t=(7&this.cntFV)<<4;t|=(1&this.cntV)<<3,t|=(1&this.cntH)<<2,t|=this.cntVT>>3&3;var e=(7&this.cntVT)<<5;e|=31&this.cntHT,this.vramAddress=32767&(t<<8|e)},incTileCounter:function(t){for(var e=t;0!==e;e--)this.cntHT++,32===this.cntHT&&(this.cntHT=0,this.cntVT++,this.cntVT>=30&&(this.cntH++,2===this.cntH&&(this.cntH=0,this.cntV++,2===this.cntV&&(this.cntV=0,this.cntFV++,this.cntFV&=7))))},mirroredLoad:function(t){return this.vramMem[this.vramMirrorTable[t]]},mirroredWrite:function(t,e){if(t>=16128&&t<16160)16128===t||16144===t?(this.writeMem(16128,e),this.writeMem(16144,e)):16132===t||16148===t?(this.writeMem(16132,e),this.writeMem(16148,e)):16136===t||16152===t?(this.writeMem(16136,e),this.writeMem(16152,e)):16140===t||16156===t?(this.writeMem(16140,e),this.writeMem(16156,e)):this.writeMem(t,e);else{if(!(t<this.vramMirrorTable.length))throw new Error("Invalid VRAM address: "+t.toString(16));this.writeMem(this.vramMirrorTable[t],e)}},triggerRendering:function(){this.scanline>=21&&this.scanline<=260&&(this.renderFramePartially(this.lastRenderedScanline+1,this.scanline-21-this.lastRenderedScanline),this.lastRenderedScanline=this.scanline-21)},renderFramePartially:function(t,e){if(1===this.f_spVisibility&&this.renderSpritesPartially(t,e,!0),1===this.f_bgVisibility){var s=t<<8,i=t+e<<8;i>61440&&(i=61440);for(var n=this.buffer,r=this.bgbuffer,o=this.pixrendered,a=s;a<i;a++)o[a]>255&&(n[a]=r[a])}1===this.f_spVisibility&&this.renderSpritesPartially(t,e,!1),this.validTileData=!1},renderBgScanline:function(t,e){var s=0===this.regS?0:256,i=(e<<8)-this.regFH;if(this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],this.cntHT=this.regHT,this.cntH=this.regH,this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],e<240&&e-this.cntFV>=0){for(var n,r,o,a,h=this.cntFV<<3,l=this.scantile,u=this.attrib,c=this.ptTile,p=this.nameTable,d=this.imgPalette,f=this.pixrendered,m=t?this.bgbuffer:this.buffer,_=0;_<32;_++){if(e>=0){if(this.validTileData){if(n=l[_],typeof n>"u")continue;r=n.pix,o=u[_]}else{if(n=c[s+p[this.curNt].getTileIndex(this.cntHT,this.cntVT)],typeof n>"u")continue;r=n.pix,o=p[this.curNt].getAttrib(this.cntHT,this.cntVT),l[_]=n,u[_]=o}var g=0,R=(_<<3)-this.regFH;if(R>-8)if(R<0&&(i-=R,g=-R),n.opaque[this.cntFV])for(;g<8;g++)m[i]=d[r[h+g]+o],f[i]|=256,i++;else for(;g<8;g++)a=r[h+g],0!==a&&(m[i]=d[a+o],f[i]|=256),i++}32===++this.cntHT&&(this.cntHT=0,this.cntH++,this.cntH%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH])}this.validTileData=!0}this.cntFV++,8===this.cntFV&&(this.cntFV=0,this.cntVT++,30===this.cntVT?(this.cntVT=0,this.cntV++,this.cntV%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]):32===this.cntVT&&(this.cntVT=0),this.validTileData=!1)},renderSpritesPartially:function(t,e,s){if(1===this.f_spVisibility)for(var i=0;i<64;i++)if(this.bgPriority[i]===s&&this.sprX[i]>=0&&this.sprX[i]<256&&this.sprY[i]+8>=t&&this.sprY[i]<t+e)if(0===this.f_spriteSize)this.srcy1=0,this.srcy2=8,this.sprY[i]<t&&(this.srcy1=t-this.sprY[i]-1),this.sprY[i]+8>t+e&&(this.srcy2=t+e-this.sprY[i]+1),0===this.f_spPatternTable?this.ptTile[this.sprTile[i]].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[i],this.sprY[i]+1,this.sprCol[i],this.sprPalette,this.horiFlip[i],this.vertFlip[i],i,this.pixrendered):this.ptTile[this.sprTile[i]+256].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[i],this.sprY[i]+1,this.sprCol[i],this.sprPalette,this.horiFlip[i],this.vertFlip[i],i,this.pixrendered);else{var n=this.sprTile[i];0!==(1&n)&&(n=this.sprTile[i]-1+256);var r=0,o=8;this.sprY[i]<t&&(r=t-this.sprY[i]-1),this.sprY[i]+8>t+e&&(o=t+e-this.sprY[i]),this.ptTile[n+(this.vertFlip[i]?1:0)].render(this.buffer,0,r,8,o,this.sprX[i],this.sprY[i]+1,this.sprCol[i],this.sprPalette,this.horiFlip[i],this.vertFlip[i],i,this.pixrendered),r=0,o=8,this.sprY[i]+8<t&&(r=t-(this.sprY[i]+8+1)),this.sprY[i]+16>t+e&&(o=t+e-(this.sprY[i]+8)),this.ptTile[n+(this.vertFlip[i]?0:1)].render(this.buffer,0,r,8,o,this.sprX[i],this.sprY[i]+1+8,this.sprCol[i],this.sprPalette,this.horiFlip[i],this.vertFlip[i],i,this.pixrendered)}},checkSprite0:function(t){this.spr0HitX=-1,this.spr0HitY=-1;var e,s,i,n,r,o,a=0===this.f_spPatternTable?0:256;if(s=this.sprX[0],i=this.sprY[0]+1,0===this.f_spriteSize){if(i<=t&&i+8>t&&s>=-7&&s<256)if(n=this.ptTile[this.sprTile[0]+a],e=this.vertFlip[0]?7-(t-i):t-i,e*=8,o=256*t+s,this.horiFlip[0])for(r=7;r>=0;r--){if(s>=0&&s<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;s++,o++}else for(r=0;r<8;r++){if(s>=0&&s<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;s++,o++}}else if(i<=t&&i+16>t&&s>=-7&&s<256)if(e=this.vertFlip[0]?15-(t-i):t-i,e<8?n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?1:0)+(0!==(1&this.sprTile[0])?255:0)]:(n=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?0:1)+(0!==(1&this.sprTile[0])?255:0)],this.vertFlip[0]?e=15-e:e-=8),e*=8,o=256*t+s,this.horiFlip[0])for(r=7;r>=0;r--){if(s>=0&&s<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;s++,o++}else for(r=0;r<8;r++){if(s>=0&&s<256&&o>=0&&o<61440&&0!==this.pixrendered[o]&&0!==n.pix[e+r])return this.spr0HitX=o%256,this.spr0HitY=t,!0;s++,o++}return!1},writeMem:function(t,e){this.vramMem[t]=e,t<8192?(this.vramMem[t]=e,this.patternWrite(t,e)):t>=8192&&t<9152?this.nameTableWrite(this.ntable1[0],t-8192,e):t>=9152&&t<9216?this.attribTableWrite(this.ntable1[0],t-9152,e):t>=9216&&t<10176?this.nameTableWrite(this.ntable1[1],t-9216,e):t>=10176&&t<10240?this.attribTableWrite(this.ntable1[1],t-10176,e):t>=10240&&t<11200?this.nameTableWrite(this.ntable1[2],t-10240,e):t>=11200&&t<11264?this.attribTableWrite(this.ntable1[2],t-11200,e):t>=11264&&t<12224?this.nameTableWrite(this.ntable1[3],t-11264,e):t>=12224&&t<12288?this.attribTableWrite(this.ntable1[3],t-12224,e):t>=16128&&t<16160&&this.updatePalettes()},updatePalettes:function(){var t;for(t=0;t<16;t++)0===this.f_dispType?this.imgPalette[t]=this.palTable.getEntry(63&this.vramMem[16128+t]):this.imgPalette[t]=this.palTable.getEntry(32&this.vramMem[16128+t]);for(t=0;t<16;t++)0===this.f_dispType?this.sprPalette[t]=this.palTable.getEntry(63&this.vramMem[16144+t]):this.sprPalette[t]=this.palTable.getEntry(32&this.vramMem[16144+t])},patternWrite:function(t,e){var s=Math.floor(t/16),i=t%16;i<8?this.ptTile[s].setScanline(i,e,this.vramMem[t+8]):this.ptTile[s].setScanline(i-8,this.vramMem[t-8],e)},nameTableWrite:function(t,e,s){this.nameTable[t].tile[e]=s,this.checkSprite0(this.scanline-20)},attribTableWrite:function(t,e,s){this.nameTable[t].writeAttrib(e,s)},spriteRamWriteUpdate:function(t,e){var s=Math.floor(t/4);0===s&&this.checkSprite0(this.scanline-20),t%4===0?this.sprY[s]=e:t%4===1?this.sprTile[s]=e:t%4===2?(this.vertFlip[s]=0!==(128&e),this.horiFlip[s]=0!==(64&e),this.bgPriority[s]=0!==(32&e),this.sprCol[s]=(3&e)<<2):t%4===3&&(this.sprX[s]=e)},doNMI:function(){this.setStatusFlag(this.STATUS_VBLANK,!0),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI)},isPixelWhite:function(t,e){return this.triggerRendering(),16777215===this.nes.ppu.buffer[(e<<8)+t]},JSON_PROPERTIES:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH","regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility","f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame","nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var t,e=S.toJSON(this);for(e.nameTable=[],t=0;t<this.nameTable.length;t++)e.nameTable[t]=this.nameTable[t].toJSON();for(e.ptTile=[],t=0;t<this.ptTile.length;t++)e.ptTile[t]=this.ptTile[t].toJSON();return e},fromJSON:function(t){var e;for(S.fromJSON(this,t),e=0;e<this.nameTable.length;e++)this.nameTable[e].fromJSON(t.nameTable[e]);for(e=0;e<this.ptTile.length;e++)this.ptTile[e].fromJSON(t.ptTile[e]);for(e=0;e<this.spriteMem.length;e++)this.spriteRamWriteUpdate(e,this.spriteMem[e])}};var b=function(t,e,s){this.width=t,this.height=e,this.name=s,this.tile=new Array(t*e),this.attrib=new Array(t*e);for(var i=0;i<t*e;i++)this.tile[i]=0,this.attrib[i]=0};b.prototype={getTileIndex:function(t,e){return this.tile[e*this.width+t]},getAttrib:function(t,e){return this.attrib[e*this.width+t]},writeAttrib:function(t,e){for(var s,i,n,r,o=t%8*4,a=4*Math.floor(t/8),h=0;h<2;h++)for(var l=0;l<2;l++){s=e>>2*(2*h+l)&3;for(var u=0;u<2;u++)for(var c=0;c<2;c++)i=o+2*l+c,n=a+2*h+u,r=n*this.width+i,this.attrib[r]=s<<2&12}},toJSON:function(){return{tile:this.tile,attrib:this.attrib}},fromJSON:function(t){this.tile=t.tile,this.attrib=t.attrib}};var A=function(){this.curTable=new Array(64),this.emphTable=new Array(8),this.currentEmph=-1};A.prototype={reset:function(){this.setEmphasis(0)},loadNTSCPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},loadPALPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},makeTables:function(){for(var t,e,s,i,n,r,o,a,h=0;h<8;h++)for(r=1,o=1,a=1,0!==(1&h)&&(r=.75,a=.75),0!==(2&h)&&(r=.75,o=.75),0!==(4&h)&&(o=.75,a=.75),this.emphTable[h]=new Array(64),n=0;n<64;n++)i=this.curTable[n],t=Math.floor(this.getRed(i)*r),e=Math.floor(this.getGreen(i)*o),s=Math.floor(this.getBlue(i)*a),this.emphTable[h][n]=this.getRgb(t,e,s)},setEmphasis:function(t){if(t!==this.currentEmph){this.currentEmph=t;for(var e=0;e<64;e++)this.curTable[e]=this.emphTable[t][e]}},getEntry:function(t){return this.curTable[t]},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return 255&t},getRgb:function(t,e,s){return t<<16|e<<8|s},loadDefaultPalette:function(){this.curTable[0]=this.getRgb(117,117,117),this.curTable[1]=this.getRgb(39,27,143),this.curTable[2]=this.getRgb(0,0,171),this.curTable[3]=this.getRgb(71,0,159),this.curTable[4]=this.getRgb(143,0,119),this.curTable[5]=this.getRgb(171,0,19),this.curTable[6]=this.getRgb(167,0,0),this.curTable[7]=this.getRgb(127,11,0),this.curTable[8]=this.getRgb(67,47,0),this.curTable[9]=this.getRgb(0,71,0),this.curTable[10]=this.getRgb(0,81,0),this.curTable[11]=this.getRgb(0,63,23),this.curTable[12]=this.getRgb(27,63,95),this.curTable[13]=this.getRgb(0,0,0),this.curTable[14]=this.getRgb(0,0,0),this.curTable[15]=this.getRgb(0,0,0),this.curTable[16]=this.getRgb(188,188,188),this.curTable[17]=this.getRgb(0,115,239),this.curTable[18]=this.getRgb(35,59,239),this.curTable[19]=this.getRgb(131,0,243),this.curTable[20]=this.getRgb(191,0,191),this.curTable[21]=this.getRgb(231,0,91),this.curTable[22]=this.getRgb(219,43,0),this.curTable[23]=this.getRgb(203,79,15),this.curTable[24]=this.getRgb(139,115,0),this.curTable[25]=this.getRgb(0,151,0),this.curTable[26]=this.getRgb(0,171,0),this.curTable[27]=this.getRgb(0,147,59),this.curTable[28]=this.getRgb(0,131,139),this.curTable[29]=this.getRgb(0,0,0),this.curTable[30]=this.getRgb(0,0,0),this.curTable[31]=this.getRgb(0,0,0),this.curTable[32]=this.getRgb(255,255,255),this.curTable[33]=this.getRgb(63,191,255),this.curTable[34]=this.getRgb(95,151,255),this.curTable[35]=this.getRgb(167,139,253),this.curTable[36]=this.getRgb(247,123,255),this.curTable[37]=this.getRgb(255,119,183),this.curTable[38]=this.getRgb(255,119,99),this.curTable[39]=this.getRgb(255,155,59),this.curTable[40]=this.getRgb(243,191,63),this.curTable[41]=this.getRgb(131,211,19),this.curTable[42]=this.getRgb(79,223,75),this.curTable[43]=this.getRgb(88,248,152),this.curTable[44]=this.getRgb(0,235,219),this.curTable[45]=this.getRgb(0,0,0),this.curTable[46]=this.getRgb(0,0,0),this.curTable[47]=this.getRgb(0,0,0),this.curTable[48]=this.getRgb(255,255,255),this.curTable[49]=this.getRgb(171,231,255),this.curTable[50]=this.getRgb(199,215,255),this.curTable[51]=this.getRgb(215,203,255),this.curTable[52]=this.getRgb(255,199,255),this.curTable[53]=this.getRgb(255,199,219),this.curTable[54]=this.getRgb(255,191,179),this.curTable[55]=this.getRgb(255,219,171),this.curTable[56]=this.getRgb(255,231,163),this.curTable[57]=this.getRgb(227,255,163),this.curTable[58]=this.getRgb(171,243,191),this.curTable[59]=this.getRgb(179,255,207),this.curTable[60]=this.getRgb(159,255,243),this.curTable[61]=this.getRgb(0,0,0),this.curTable[62]=this.getRgb(0,0,0),this.curTable[63]=this.getRgb(0,0,0),this.makeTables(),this.setEmphasis(0)}};var C=y,E=1789772.5,I=function(t){this.nes=t,this.square1=new N(this,!0),this.square2=new N(this,!1),this.triangle=new O(this),this.noise=new T(this),this.dmc=new D(this),this.frameIrqCounter=null,this.frameIrqCounterMax=4,this.initCounter=2048,this.channelEnableValue=null,this.sampleRate=44100,this.lengthLookup=null,this.dmcFreqLookup=null,this.noiseWavelengthLookup=null,this.square_table=null,this.tnd_table=null,this.frameIrqEnabled=!1,this.frameIrqActive=null,this.frameClockNow=null,this.startedPlaying=!1,this.recordOutput=!1,this.initingHardware=!1,this.masterFrameCounter=null,this.derivedFrameCounter=null,this.countSequence=null,this.sampleTimer=null,this.frameTime=null,this.sampleTimerMax=null,this.sampleCount=null,this.triValue=0,this.smpSquare1=null,this.smpSquare2=null,this.smpTriangle=null,this.smpDmc=null,this.accCount=null,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.dacRange=0,this.dcValue=0,this.masterVolume=256,this.stereoPosLSquare1=null,this.stereoPosLSquare2=null,this.stereoPosLTriangle=null,this.stereoPosLNoise=null,this.stereoPosLDMC=null,this.stereoPosRSquare1=null,this.stereoPosRSquare2=null,this.stereoPosRTriangle=null,this.stereoPosRNoise=null,this.stereoPosRDMC=null,this.extraCycles=null,this.maxSample=null,this.minSample=null,this.panning=[80,170,100,150,128],this.setPanning(this.panning),this.initLengthLookup(),this.initDmcFrequencyLookup(),this.initNoiseWavelengthLookup(),this.initDACtables();for(var e=0;e<20;e++)16===e?this.writeReg(16400,16):this.writeReg(16384+e,0);this.reset()};I.prototype={reset:function(){this.sampleRate=this.nes.opts.sampleRate,this.sampleTimerMax=Math.floor(1024*E*this.nes.opts.preferredFrameRate/(60*this.sampleRate)),this.frameTime=Math.floor(14915*this.nes.opts.preferredFrameRate/60),this.sampleTimer=0,this.updateChannelEnable(0),this.masterFrameCounter=0,this.derivedFrameCounter=0,this.countSequence=0,this.sampleCount=0,this.initCounter=2048,this.frameIrqEnabled=!1,this.initingHardware=!1,this.resetCounter(),this.square1.reset(),this.square2.reset(),this.triangle.reset(),this.noise.reset(),this.dmc.reset(),this.accCount=0,this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0,this.frameIrqEnabled=!1,this.frameIrqCounterMax=4,this.channelEnableValue=255,this.startedPlaying=!1,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.maxSample=-5e5,this.minSample=5e5},readReg:function(t){var e=0;return e|=this.square1.getLengthStatus(),e|=this.square2.getLengthStatus()<<1,e|=this.triangle.getLengthStatus()<<2,e|=this.noise.getLengthStatus()<<3,e|=this.dmc.getLengthStatus()<<4,e|=(this.frameIrqActive&&this.frameIrqEnabled?1:0)<<6,e|=this.dmc.getIrqStatus()<<7,this.frameIrqActive=!1,this.dmc.irqGenerated=!1,65535&e},writeReg:function(t,e){t>=16384&&t<16388?this.square1.writeReg(t,e):t>=16388&&t<16392?this.square2.writeReg(t,e):t>=16392&&t<16396?this.triangle.writeReg(t,e):t>=16396&&t<=16399?this.noise.writeReg(t,e):16400===t||16401===t||16402===t||16403===t?this.dmc.writeReg(t,e):16405===t?(this.updateChannelEnable(e),0!==e&&this.initCounter>0&&(this.initingHardware=!0),this.dmc.writeReg(t,e)):16407===t&&(this.countSequence=e>>7&1,this.masterFrameCounter=0,this.frameIrqActive=!1,this.frameIrqEnabled=0===(e>>6&1),0===this.countSequence?(this.frameIrqCounterMax=4,this.derivedFrameCounter=4):(this.frameIrqCounterMax=5,this.derivedFrameCounter=0,this.frameCounterTick()))},resetCounter:function(){0===this.countSequence?this.derivedFrameCounter=4:this.derivedFrameCounter=0},updateChannelEnable:function(t){this.channelEnableValue=65535&t,this.square1.setEnabled(0!==(1&t)),this.square2.setEnabled(0!==(2&t)),this.triangle.setEnabled(0!==(4&t)),this.noise.setEnabled(0!==(8&t)),this.dmc.setEnabled(0!==(16&t))},clockFrameCounter:function(t){if(this.initCounter>0&&this.initingHardware)return this.initCounter-=t,void(this.initCounter<=0&&(this.initingHardware=!1));t+=this.extraCycles;var e=this.sampleTimerMax-this.sampleTimer;t<<10>e?(this.extraCycles=(t<<10)-e>>10,t-=this.extraCycles):this.extraCycles=0;var s=this.dmc,i=this.triangle,n=this.square1,r=this.square2,o=this.noise;if(s.isEnabled)for(s.shiftCounter-=t<<3;s.shiftCounter<=0&&s.dmaFrequency>0;)s.shiftCounter+=s.dmaFrequency,s.clockDmc();if(i.progTimerMax>0)for(i.progTimerCount-=t;i.progTimerCount<=0;)i.progTimerCount+=i.progTimerMax+1,i.linearCounter>0&&i.lengthCounter>0&&(i.triangleCounter++,i.triangleCounter&=31,i.isEnabled&&(i.triangleCounter>=16?i.sampleValue=15&i.triangleCounter:i.sampleValue=15-(15&i.triangleCounter),i.sampleValue<<=4));n.progTimerCount-=t,n.progTimerCount<=0&&(n.progTimerCount+=n.progTimerMax+1<<1,n.squareCounter++,n.squareCounter&=7,n.updateSampleValue()),r.progTimerCount-=t,r.progTimerCount<=0&&(r.progTimerCount+=r.progTimerMax+1<<1,r.squareCounter++,r.squareCounter&=7,r.updateSampleValue());var a=t;if(o.progTimerCount-a>0)o.progTimerCount-=a,o.accCount+=a,o.accValue+=a*o.sampleValue;else for(;a-- >0;)--o.progTimerCount<=0&&o.progTimerMax>0&&(o.shiftReg<<=1,o.tmp=32768&(o.shiftReg<<(0===o.randomMode?1:6)^o.shiftReg),0!==o.tmp?(o.shiftReg|=1,o.randomBit=0,o.sampleValue=0):(o.randomBit=1,o.isEnabled&&o.lengthCounter>0?o.sampleValue=o.masterVolume:o.sampleValue=0),o.progTimerCount+=o.progTimerMax),o.accValue+=o.sampleValue,o.accCount++;this.frameIrqEnabled&&this.frameIrqActive&&this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.masterFrameCounter+=t<<1,this.masterFrameCounter>=this.frameTime&&(this.masterFrameCounter-=this.frameTime,this.frameCounterTick()),this.accSample(t),this.sampleTimer+=t<<10,this.sampleTimer>=this.sampleTimerMax&&(this.sample(),this.sampleTimer-=this.sampleTimerMax)},accSample:function(t){this.triangle.sampleCondition&&(this.triValue=Math.floor((this.triangle.progTimerCount<<4)/(this.triangle.progTimerMax+1)),this.triValue>16&&(this.triValue=16),this.triangle.triangleCounter>=16&&(this.triValue=16-this.triValue),this.triValue+=this.triangle.sampleValue),2===t?(this.smpTriangle+=this.triValue<<1,this.smpDmc+=this.dmc.sample<<1,this.smpSquare1+=this.square1.sampleValue<<1,this.smpSquare2+=this.square2.sampleValue<<1,this.accCount+=2):4===t?(this.smpTriangle+=this.triValue<<2,this.smpDmc+=this.dmc.sample<<2,this.smpSquare1+=this.square1.sampleValue<<2,this.smpSquare2+=this.square2.sampleValue<<2,this.accCount+=4):(this.smpTriangle+=t*this.triValue,this.smpDmc+=t*this.dmc.sample,this.smpSquare1+=t*this.square1.sampleValue,this.smpSquare2+=t*this.square2.sampleValue,this.accCount+=t)},frameCounterTick:function(){this.derivedFrameCounter++,this.derivedFrameCounter>=this.frameIrqCounterMax&&(this.derivedFrameCounter=0),(1===this.derivedFrameCounter||3===this.derivedFrameCounter)&&(this.triangle.clockLengthCounter(),this.square1.clockLengthCounter(),this.square2.clockLengthCounter(),this.noise.clockLengthCounter(),this.square1.clockSweep(),this.square2.clockSweep()),this.derivedFrameCounter>=0&&this.derivedFrameCounter<4&&(this.square1.clockEnvDecay(),this.square2.clockEnvDecay(),this.noise.clockEnvDecay(),this.triangle.clockLinearCounter()),3===this.derivedFrameCounter&&0===this.countSequence&&(this.frameIrqActive=!0)},sample:function(){var t,e;this.accCount>0?(this.smpSquare1<<=4,this.smpSquare1=Math.floor(this.smpSquare1/this.accCount),this.smpSquare2<<=4,this.smpSquare2=Math.floor(this.smpSquare2/this.accCount),this.smpTriangle=Math.floor(this.smpTriangle/this.accCount),this.smpDmc<<=4,this.smpDmc=Math.floor(this.smpDmc/this.accCount),this.accCount=0):(this.smpSquare1=this.square1.sampleValue<<4,this.smpSquare2=this.square2.sampleValue<<4,this.smpTriangle=this.triangle.sampleValue,this.smpDmc=this.dmc.sample<<4);var s=Math.floor((this.noise.accValue<<4)/this.noise.accCount);this.noise.accValue=s>>4,this.noise.accCount=1,t=this.smpSquare1*this.stereoPosLSquare1+this.smpSquare2*this.stereoPosLSquare2>>8,e=3*this.smpTriangle*this.stereoPosLTriangle+(s<<1)*this.stereoPosLNoise+this.smpDmc*this.stereoPosLDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var i=this.square_table[t]+this.tnd_table[e]-this.dcValue;t=this.smpSquare1*this.stereoPosRSquare1+this.smpSquare2*this.stereoPosRSquare2>>8,e=3*this.smpTriangle*this.stereoPosRTriangle+(s<<1)*this.stereoPosRNoise+this.smpDmc*this.stereoPosRDMC>>8,t>=this.square_table.length&&(t=this.square_table.length-1),e>=this.tnd_table.length&&(e=this.tnd_table.length-1);var n=this.square_table[t]+this.tnd_table[e]-this.dcValue,r=i-this.prevSampleL;this.prevSampleL+=r,this.smpAccumL+=r-(this.smpAccumL>>10),i=this.smpAccumL;var o=n-this.prevSampleR;this.prevSampleR+=o,this.smpAccumR+=o-(this.smpAccumR>>10),n=this.smpAccumR,i>this.maxSample&&(this.maxSample=i),i<this.minSample&&(this.minSample=i),this.nes.opts.onAudioSample&&this.nes.opts.onAudioSample(i/32768,n/32768),this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0},getLengthMax:function(t){return this.lengthLookup[t>>3]},getDmcFrequency:function(t){return t>=0&&t<16?this.dmcFreqLookup[t]:0},getNoiseWaveLength:function(t){return t>=0&&t<16?this.noiseWavelengthLookup[t]:0},setPanning:function(t){for(var e=0;e<5;e++)this.panning[e]=t[e];this.updateStereoPos()},setMasterVolume:function(t){t<0&&(t=0),t>256&&(t=256),this.masterVolume=t,this.updateStereoPos()},updateStereoPos:function(){this.stereoPosLSquare1=this.panning[0]*this.masterVolume>>8,this.stereoPosLSquare2=this.panning[1]*this.masterVolume>>8,this.stereoPosLTriangle=this.panning[2]*this.masterVolume>>8,this.stereoPosLNoise=this.panning[3]*this.masterVolume>>8,this.stereoPosLDMC=this.panning[4]*this.masterVolume>>8,this.stereoPosRSquare1=this.masterVolume-this.stereoPosLSquare1,this.stereoPosRSquare2=this.masterVolume-this.stereoPosLSquare2,this.stereoPosRTriangle=this.masterVolume-this.stereoPosLTriangle,this.stereoPosRNoise=this.masterVolume-this.stereoPosLNoise,this.stereoPosRDMC=this.masterVolume-this.stereoPosLDMC},initLengthLookup:function(){this.lengthLookup=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},initDmcFrequencyLookup:function(){this.dmcFreqLookup=new Array(16),this.dmcFreqLookup[0]=3424,this.dmcFreqLookup[1]=3040,this.dmcFreqLookup[2]=2720,this.dmcFreqLookup[3]=2560,this.dmcFreqLookup[4]=2288,this.dmcFreqLookup[5]=2032,this.dmcFreqLookup[6]=1808,this.dmcFreqLookup[7]=1712,this.dmcFreqLookup[8]=1520,this.dmcFreqLookup[9]=1280,this.dmcFreqLookup[10]=1136,this.dmcFreqLookup[11]=1024,this.dmcFreqLookup[12]=848,this.dmcFreqLookup[13]=672,this.dmcFreqLookup[14]=576,this.dmcFreqLookup[15]=432},initNoiseWavelengthLookup:function(){this.noiseWavelengthLookup=new Array(16),this.noiseWavelengthLookup[0]=4,this.noiseWavelengthLookup[1]=8,this.noiseWavelengthLookup[2]=16,this.noiseWavelengthLookup[3]=32,this.noiseWavelengthLookup[4]=64,this.noiseWavelengthLookup[5]=96,this.noiseWavelengthLookup[6]=128,this.noiseWavelengthLookup[7]=160,this.noiseWavelengthLookup[8]=202,this.noiseWavelengthLookup[9]=254,this.noiseWavelengthLookup[10]=380,this.noiseWavelengthLookup[11]=508,this.noiseWavelengthLookup[12]=762,this.noiseWavelengthLookup[13]=1016,this.noiseWavelengthLookup[14]=2034,this.noiseWavelengthLookup[15]=4068},initDACtables:function(){var t,e,s,i=0,n=0;for(this.square_table=new Array(512),this.tnd_table=new Array(3264),s=0;s<512;s++)t=95.52/(8128/(s/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.square_table[s]=e,e>i&&(i=e);for(s=0;s<3264;s++)t=163.67/(24329/(s/16)+100),t*=.98411,t*=5e4,e=Math.floor(t),this.tnd_table[s]=e,e>n&&(n=e);this.dacRange=i+n,this.dcValue=this.dacRange/2}};var D=function(t){this.papu=t,this.MODE_NORMAL=0,this.MODE_LOOP=1,this.MODE_IRQ=2,this.isEnabled=null,this.hasSample=null,this.irqGenerated=!1,this.playMode=null,this.dmaFrequency=null,this.dmaCounter=null,this.deltaCounter=null,this.playStartAddress=null,this.playAddress=null,this.playLength=null,this.playLengthCounter=null,this.shiftCounter=null,this.reg4012=null,this.reg4013=null,this.sample=null,this.dacLsb=null,this.data=null,this.reset()};D.prototype={clockDmc:function(){this.hasSample&&(0===(1&this.data)?this.deltaCounter>0&&this.deltaCounter--:this.deltaCounter<63&&this.deltaCounter++,this.sample=this.isEnabled?(this.deltaCounter<<1)+this.dacLsb:0,this.data>>=1),this.dmaCounter--,this.dmaCounter<=0&&(this.hasSample=!1,this.endOfSample(),this.dmaCounter=8),this.irqGenerated&&this.papu.nes.cpu.requestIrq(this.papu.nes.cpu.IRQ_NORMAL)},endOfSample:function(){0===this.playLengthCounter&&this.playMode===this.MODE_LOOP&&(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.playLengthCounter>0&&(this.nextSample(),0===this.playLengthCounter&&this.playMode===this.MODE_IRQ&&(this.irqGenerated=!0))},nextSample:function(){this.data=this.papu.nes.mmap.load(this.playAddress),this.papu.nes.cpu.haltCycles(4),this.playLengthCounter--,this.playAddress++,this.playAddress>65535&&(this.playAddress=32768),this.hasSample=!0},writeReg:function(t,e){16400===t?(e>>6===0?this.playMode=this.MODE_NORMAL:1===(e>>6&1)?this.playMode=this.MODE_LOOP:e>>6===2&&(this.playMode=this.MODE_IRQ),0===(128&e)&&(this.irqGenerated=!1),this.dmaFrequency=this.papu.getDmcFrequency(15&e)):16401===t?(this.deltaCounter=e>>1&63,this.dacLsb=1&e,this.sample=(this.deltaCounter<<1)+this.dacLsb):16402===t?(this.playStartAddress=e<<6|49152,this.playAddress=this.playStartAddress,this.reg4012=e):16403===t?(this.playLength=1+(e<<4),this.playLengthCounter=this.playLength,this.reg4013=e):16405===t&&(0===(e>>4&1)?this.playLengthCounter=0:(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.irqGenerated=!1)},setEnabled:function(t){!this.isEnabled&&t&&(this.playLengthCounter=this.playLength),this.isEnabled=t},getLengthStatus:function(){return 0!==this.playLengthCounter&&this.isEnabled?1:0},getIrqStatus:function(){return this.irqGenerated?1:0},reset:function(){this.isEnabled=!1,this.irqGenerated=!1,this.playMode=this.MODE_NORMAL,this.dmaFrequency=0,this.dmaCounter=0,this.deltaCounter=0,this.playStartAddress=0,this.playAddress=0,this.playLength=0,this.playLengthCounter=0,this.sample=0,this.dacLsb=0,this.shiftCounter=0,this.reg4012=0,this.reg4013=0,this.data=0}};var T=function(t){this.papu=t,this.isEnabled=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.lengthCounterEnable=null,this.envReset=null,this.shiftNow=null,this.lengthCounter=null,this.progTimerCount=null,this.progTimerMax=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.shiftReg=16384,this.randomBit=null,this.randomMode=null,this.sampleValue=null,this.accValue=0,this.accCount=1,this.tmp=null,this.reset()};T.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.isEnabled=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1,this.shiftNow=!1,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.shiftReg=1,this.randomBit=0,this.randomMode=0,this.sampleValue=0,this.tmp=0},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&(this.sampleValue=this.randomBit*this.masterVolume)},writeReg:function(t,e){16396===t?(this.envDecayDisable=0!==(16&e),this.envDecayRate=15&e,this.envDecayLoopEnable=0!==(32&e),this.lengthCounterEnable=0===(32&e),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume):16398===t?(this.progTimerMax=this.papu.getNoiseWaveLength(15&e),this.randomMode=e>>7):16399===t&&(this.lengthCounter=this.papu.getLengthMax(248&e),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0}};var N=function(t,e){this.papu=t,this.dutyLookup=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1],this.impLookup=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0],this.sqr1=e,this.isEnabled=null,this.lengthCounterEnable=null,this.sweepActive=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.envReset=null,this.sweepCarry=null,this.updateSweepPeriod=null,this.progTimerCount=null,this.progTimerMax=null,this.lengthCounter=null,this.squareCounter=null,this.sweepCounter=null,this.sweepCounterMax=null,this.sweepMode=null,this.sweepShiftAmount=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.dutyMode=null,this.sweepResult=null,this.sampleValue=null,this.vol=null,this.reset()};N.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.lengthCounter=0,this.squareCounter=0,this.sweepCounter=0,this.sweepCounterMax=0,this.sweepMode=0,this.sweepShiftAmount=0,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.dutyMode=0,this.vol=0,this.isEnabled=!1,this.lengthCounterEnable=!1,this.sweepActive=!1,this.sweepCarry=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},clockSweep:function(){--this.sweepCounter<=0&&(this.sweepCounter=this.sweepCounterMax+1,this.sweepActive&&this.sweepShiftAmount>0&&this.progTimerMax>7&&(this.sweepCarry=!1,0===this.sweepMode?(this.progTimerMax+=this.progTimerMax>>this.sweepShiftAmount,this.progTimerMax>4095&&(this.progTimerMax=4095,this.sweepCarry=!0)):this.progTimerMax=this.progTimerMax-((this.progTimerMax>>this.sweepShiftAmount)-(this.sqr1?1:0)))),this.updateSweepPeriod&&(this.updateSweepPeriod=!1,this.sweepCounter=this.sweepCounterMax+1)},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&this.progTimerMax>7?0===this.sweepMode&&this.progTimerMax+(this.progTimerMax>>this.sweepShiftAmount)>4095?this.sampleValue=0:this.sampleValue=this.masterVolume*this.dutyLookup[(this.dutyMode<<3)+this.squareCounter]:this.sampleValue=0},writeReg:function(t,e){var s=this.sqr1?0:4;t===16384+s?(this.envDecayDisable=0!==(16&e),this.envDecayRate=15&e,this.envDecayLoopEnable=0!==(32&e),this.dutyMode=e>>6&3,this.lengthCounterEnable=0===(32&e),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()):t===16385+s?(this.sweepActive=0!==(128&e),this.sweepCounterMax=e>>4&7,this.sweepMode=e>>3&1,this.sweepShiftAmount=7&e,this.updateSweepPeriod=!0):t===16386+s?(this.progTimerMax&=1792,this.progTimerMax|=e):t===16387+s&&(this.progTimerMax&=255,this.progTimerMax|=(7&e)<<8,this.isEnabled&&(this.lengthCounter=this.papu.getLengthMax(248&e)),this.envReset=!0)},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0}};var O=function(t){this.papu=t,this.isEnabled=null,this.sampleCondition=null,this.lengthCounterEnable=null,this.lcHalt=null,this.lcControl=null,this.progTimerCount=null,this.progTimerMax=null,this.triangleCounter=null,this.lengthCounter=null,this.linearCounter=null,this.lcLoadValue=null,this.sampleValue=null,this.tmp=null,this.reset()};O.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.triangleCounter=0,this.isEnabled=!1,this.sampleCondition=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.linearCounter=0,this.lcLoadValue=0,this.lcHalt=!0,this.lcControl=!1,this.tmp=0,this.sampleValue=15},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,0===this.lengthCounter&&this.updateSampleCondition())},clockLinearCounter:function(){this.lcHalt?(this.linearCounter=this.lcLoadValue,this.updateSampleCondition()):this.linearCounter>0&&(this.linearCounter--,this.updateSampleCondition()),this.lcControl||(this.lcHalt=!1)},getLengthStatus:function(){return 0!==this.lengthCounter&&this.isEnabled?1:0},readReg:function(t){return 0},writeReg:function(t,e){16392===t?(this.lcControl=0!==(128&e),this.lcLoadValue=127&e,this.lengthCounterEnable=!this.lcControl):16394===t?(this.progTimerMax&=1792,this.progTimerMax|=e):16395===t&&(this.progTimerMax&=255,this.progTimerMax|=(7&e)<<8,this.lengthCounter=this.papu.getLengthMax(248&e),this.lcHalt=!0),this.updateSampleCondition()},clockProgrammableTimer:function(t){if(this.progTimerMax>0)for(this.progTimerCount+=t;this.progTimerMax>0&&this.progTimerCount>=this.progTimerMax;)this.progTimerCount-=this.progTimerMax,this.isEnabled&&this.lengthCounter>0&&this.linearCounter>0&&this.clockTriangleGenerator()},clockTriangleGenerator:function(){this.triangleCounter++,this.triangleCounter&=31},setEnabled:function(t){this.isEnabled=t,t||(this.lengthCounter=0),this.updateSampleCondition()},updateSampleCondition:function(){this.sampleCondition=this.isEnabled&&this.progTimerMax>7&&this.linearCounter>0&&this.lengthCounter>0}};var w=I,k=p,F={0:function(t){this.nes=t}};F[0].prototype={reset:function(){this.joy1StrobeState=0,this.joy2StrobeState=0,this.joypadLastWrite=0,this.zapperFired=!1,this.zapperX=null,this.zapperY=null},write:function(t,e){t<8192?this.nes.cpu.mem[2047&t]=e:t>16407?(this.nes.cpu.mem[t]=e,t>=24576&&t<32768&&this.nes.opts.onBatteryRamWrite(t,e)):t>8199&&t<16384?this.regWrite(8192+(7&t),e):this.regWrite(t,e)},writelow:function(t,e){t<8192?this.nes.cpu.mem[2047&t]=e:t>16407?this.nes.cpu.mem[t]=e:t>8199&&t<16384?this.regWrite(8192+(7&t),e):this.regWrite(t,e)},load:function(t){return t&=65535,t>16407?this.nes.cpu.mem[t]:t>=8192?this.regLoad(t):this.nes.cpu.mem[2047&t]},regLoad:function(t){switch(t>>12){case 0:break;case 1:break;case 2:case 3:switch(7&t){case 0:return this.nes.cpu.mem[8192];case 1:return this.nes.cpu.mem[8193];case 2:return this.nes.ppu.readStatusRegister();case 3:return 0;case 4:return this.nes.ppu.sramLoad();case 5:return 0;case 6:return 0;case 7:return this.nes.ppu.vramLoad()}break;case 4:switch(t-16405){case 0:return this.nes.papu.readReg(t);case 1:return this.joy1Read();case 2:var e;return e=null!==this.zapperX&&null!==this.zapperY&&this.nes.ppu.isPixelWhite(this.zapperX,this.zapperY)?0:8,this.zapperFired&&(e|=16),65535&(this.joy2Read()|e)}break}return 0},regWrite:function(t,e){switch(t){case 8192:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg1(e);break;case 8193:this.nes.cpu.mem[t]=e,this.nes.ppu.updateControlReg2(e);break;case 8195:this.nes.ppu.writeSRAMAddress(e);break;case 8196:this.nes.ppu.sramWrite(e);break;case 8197:this.nes.ppu.scrollWrite(e);break;case 8198:this.nes.ppu.writeVRAMAddress(e);break;case 8199:this.nes.ppu.vramWrite(e);break;case 16404:this.nes.ppu.sramDMA(e);break;case 16405:this.nes.papu.writeReg(t,e);break;case 16406:0===(1&e)&&1===(1&this.joypadLastWrite)&&(this.joy1StrobeState=0,this.joy2StrobeState=0),this.joypadLastWrite=e;break;case 16407:this.nes.papu.writeReg(t,e);break;default:t>=16384&&t<=16407&&this.nes.papu.writeReg(t,e)}},joy1Read:function(){var t;switch(this.joy1StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[1].state[this.joy1StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:t=0;break;case 19:t=1;break;default:t=0}return this.joy1StrobeState++,24===this.joy1StrobeState&&(this.joy1StrobeState=0),t},joy2Read:function(){var t;switch(this.joy2StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=this.nes.controllers[2].state[this.joy2StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:t=0;break;case 19:t=1;break;default:t=0}return this.joy2StrobeState++,24===this.joy2StrobeState&&(this.joy2StrobeState=0),t},loadROM:function(){if(!this.nes.rom.valid||this.nes.rom.romCount<1)throw new Error("NoMapper: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},loadPRGROM:function(){this.nes.rom.romCount>1?(this.loadRomBank(0,32768),this.loadRomBank(1,49152)):(this.loadRomBank(0,32768),this.loadRomBank(0,49152))},loadCHRROM:function(){this.nes.rom.vromCount>0&&(1===this.nes.rom.vromCount?(this.loadVromBank(0,0),this.loadVromBank(0,4096)):(this.loadVromBank(0,0),this.loadVromBank(1,4096)))},loadBatteryRam:function(){if(this.nes.rom.batteryRam){var t=this.nes.rom.batteryRam;null!==t&&8192===t.length&&k.copyArrayElements(t,0,this.nes.cpu.mem,24576,8192)}},loadRomBank:function(t,e){t%=this.nes.rom.romCount,k.copyArrayElements(this.nes.rom.rom[t],0,this.nes.cpu.mem,e,16384)},loadVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering(),k.copyArrayElements(this.nes.rom.vrom[t%this.nes.rom.vromCount],0,this.nes.ppu.vramMem,e,4096);var s=this.nes.rom.vromTile[t%this.nes.rom.vromCount];k.copyArrayElements(s,0,this.nes.ppu.ptTile,e>>4,256)}},load32kRomBank:function(t,e){this.loadRomBank(2*t%this.nes.rom.romCount,e),this.loadRomBank((2*t+1)%this.nes.rom.romCount,e+16384)},load8kVromBank:function(t,e){0!==this.nes.rom.vromCount&&(this.nes.ppu.triggerRendering(),this.loadVromBank(t%this.nes.rom.vromCount,e),this.loadVromBank((t+1)%this.nes.rom.vromCount,e+4096))},load1kVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering();var s=Math.floor(t/4)%this.nes.rom.vromCount,i=t%4*1024;k.copyArrayElements(this.nes.rom.vrom[s],i,this.nes.ppu.vramMem,e,1024);for(var n=this.nes.rom.vromTile[s],r=e>>4,o=0;o<64;o++)this.nes.ppu.ptTile[r+o]=n[(t%4<<6)+o]}},load2kVromBank:function(t,e){if(0!==this.nes.rom.vromCount){this.nes.ppu.triggerRendering();var s=Math.floor(t/2)%this.nes.rom.vromCount,i=t%2*2048;k.copyArrayElements(this.nes.rom.vrom[s],i,this.nes.ppu.vramMem,e,2048);for(var n=this.nes.rom.vromTile[s],r=e>>4,o=0;o<128;o++)this.nes.ppu.ptTile[r+o]=n[(t%2<<7)+o]}},load8kRomBank:function(t,e){var s=Math.floor(t/2)%this.nes.rom.romCount,i=t%2*8192;k.copyArrayElements(this.nes.rom.rom[s],i,this.nes.cpu.mem,e,8192)},clockIrqCounter:function(){},latchAccess:function(t){},toJSON:function(){return{joy1StrobeState:this.joy1StrobeState,joy2StrobeState:this.joy2StrobeState,joypadLastWrite:this.joypadLastWrite}},fromJSON:function(t){this.joy1StrobeState=t.joy1StrobeState,this.joy2StrobeState=t.joy2StrobeState,this.joypadLastWrite=t.joypadLastWrite}},F[1]=function(t){this.nes=t},F[1].prototype=new F[0],F[1].prototype.reset=function(){F[0].prototype.reset.apply(this),this.regBuffer=0,this.regBufferCounter=0,this.mirroring=0,this.oneScreenMirroring=0,this.prgSwitchingArea=1,this.prgSwitchingSize=1,this.vromSwitchingSize=0,this.romSelectionReg0=0,this.romSelectionReg1=0,this.romBankSelect=0},F[1].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):0!==(128&e)?(this.regBufferCounter=0,this.regBuffer=0,0===this.getRegNumber(t)&&(this.prgSwitchingArea=1,this.prgSwitchingSize=1)):(this.regBuffer=this.regBuffer&255-(1<<this.regBufferCounter)|(1&e)<<this.regBufferCounter,this.regBufferCounter++,5===this.regBufferCounter&&(this.setReg(this.getRegNumber(t),this.regBuffer),this.regBuffer=0,this.regBufferCounter=0))},F[1].prototype.setReg=function(t,e){var s;switch(t){case 0:s=3&e,s!==this.mirroring&&(this.mirroring=s,0===(2&this.mirroring)?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING):0!==(1&this.mirroring)?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING)),this.prgSwitchingArea=e>>2&1,this.prgSwitchingSize=e>>3&1,this.vromSwitchingSize=e>>4&1;break;case 1:this.romSelectionReg0=e>>4&1,this.nes.rom.vromCount>0&&(0===this.vromSwitchingSize?0===this.romSelectionReg0?this.load8kVromBank(15&e,0):this.load8kVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),0):0===this.romSelectionReg0?this.loadVromBank(15&e,0):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),0));break;case 2:this.romSelectionReg1=e>>4&1,this.nes.rom.vromCount>0&&1===this.vromSwitchingSize&&(0===this.romSelectionReg1?this.loadVromBank(15&e,4096):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(15&e),4096));break;default:s=15&e;var i,n=0;this.nes.rom.romCount>=32?0===this.vromSwitchingSize?1===this.romSelectionReg0&&(n=16):n=(this.romSelectionReg0|this.romSelectionReg1<<1)<<3:this.nes.rom.romCount>=16&&1===this.romSelectionReg0&&(n=8),0===this.prgSwitchingSize?(i=n+(15&e),this.load32kRomBank(i,32768)):(i=2*n+(15&e),0===this.prgSwitchingArea?this.loadRomBank(i,49152):this.loadRomBank(i,32768))}},F[1].prototype.getRegNumber=function(t){return t>=32768&&t<=40959?0:t>=40960&&t<=49151?1:t>=49152&&t<=57343?2:3},F[1].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC1: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[1].prototype.switchLowHighPrgRom=function(t){},F[1].prototype.switch16to32=function(){},F[1].prototype.switch32to16=function(){},F[1].prototype.toJSON=function(){var t=F[0].prototype.toJSON.apply(this);return t.mirroring=this.mirroring,t.oneScreenMirroring=this.oneScreenMirroring,t.prgSwitchingArea=this.prgSwitchingArea,t.prgSwitchingSize=this.prgSwitchingSize,t.vromSwitchingSize=this.vromSwitchingSize,t.romSelectionReg0=this.romSelectionReg0,t.romSelectionReg1=this.romSelectionReg1,t.romBankSelect=this.romBankSelect,t.regBuffer=this.regBuffer,t.regBufferCounter=this.regBufferCounter,t},F[1].prototype.fromJSON=function(t){F[0].prototype.fromJSON.apply(this,arguments),this.mirroring=t.mirroring,this.oneScreenMirroring=t.oneScreenMirroring,this.prgSwitchingArea=t.prgSwitchingArea,this.prgSwitchingSize=t.prgSwitchingSize,this.vromSwitchingSize=t.vromSwitchingSize,this.romSelectionReg0=t.romSelectionReg0,this.romSelectionReg1=t.romSelectionReg1,this.romBankSelect=t.romBankSelect,this.regBuffer=t.regBuffer,this.regBufferCounter=t.regBufferCounter},F[2]=function(t){this.nes=t},F[2].prototype=new F[0],F[2].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):this.loadRomBank(e,32768)},F[2].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[3]=function(t){this.nes=t},F[3].prototype=new F[0],F[3].prototype.write=function(t,e){if(t<32768)F[0].prototype.write.apply(this,arguments);else{var s=e%(this.nes.rom.vromCount/2)*2;this.loadVromBank(s,0),this.loadVromBank(s+1,4096),this.load8kVromBank(2*e,0)}},F[4]=function(t){this.nes=t,this.CMD_SEL_2_1K_VROM_0000=0,this.CMD_SEL_2_1K_VROM_0800=1,this.CMD_SEL_1K_VROM_1000=2,this.CMD_SEL_1K_VROM_1400=3,this.CMD_SEL_1K_VROM_1800=4,this.CMD_SEL_1K_VROM_1C00=5,this.CMD_SEL_ROM_PAGE1=6,this.CMD_SEL_ROM_PAGE2=7,this.command=null,this.prgAddressSelect=null,this.chrAddressSelect=null,this.pageNumber=null,this.irqCounter=null,this.irqLatchValue=null,this.irqEnable=null,this.prgAddressChanged=!1},F[4].prototype=new F[0],F[4].prototype.write=function(t,e){if(t<32768)F[0].prototype.write.apply(this,arguments);else switch(t){case 32768:this.command=7&e;var s=e>>6&1;s!==this.prgAddressSelect&&(this.prgAddressChanged=!0),this.prgAddressSelect=s,this.chrAddressSelect=e>>7&1;break;case 32769:this.executeCommand(this.command,e);break;case 40960:0!==(1&e)?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING);break;case 40961:break;case 49152:this.irqCounter=e;break;case 49153:this.irqLatchValue=e;break;case 57344:this.irqEnable=0;break;case 57345:this.irqEnable=1;break}},F[4].prototype.executeCommand=function(t,e){switch(t){case this.CMD_SEL_2_1K_VROM_0000:0===this.chrAddressSelect?(this.load1kVromBank(e,0),this.load1kVromBank(e+1,1024)):(this.load1kVromBank(e,4096),this.load1kVromBank(e+1,5120));break;case this.CMD_SEL_2_1K_VROM_0800:0===this.chrAddressSelect?(this.load1kVromBank(e,2048),this.load1kVromBank(e+1,3072)):(this.load1kVromBank(e,6144),this.load1kVromBank(e+1,7168));break;case this.CMD_SEL_1K_VROM_1000:0===this.chrAddressSelect?this.load1kVromBank(e,4096):this.load1kVromBank(e,0);break;case this.CMD_SEL_1K_VROM_1400:0===this.chrAddressSelect?this.load1kVromBank(e,5120):this.load1kVromBank(e,1024);break;case this.CMD_SEL_1K_VROM_1800:0===this.chrAddressSelect?this.load1kVromBank(e,6144):this.load1kVromBank(e,2048);break;case this.CMD_SEL_1K_VROM_1C00:0===this.chrAddressSelect?this.load1kVromBank(e,7168):this.load1kVromBank(e,3072);break;case this.CMD_SEL_ROM_PAGE1:this.prgAddressChanged&&(0===this.prgAddressSelect?this.load8kRomBank(2*(this.nes.rom.romCount-1),49152):this.load8kRomBank(2*(this.nes.rom.romCount-1),32768),this.prgAddressChanged=!1),0===this.prgAddressSelect?this.load8kRomBank(e,32768):this.load8kRomBank(e,49152);break;case this.CMD_SEL_ROM_PAGE2:this.load8kRomBank(e,40960),this.prgAddressChanged&&(0===this.prgAddressSelect?this.load8kRomBank(2*(this.nes.rom.romCount-1),49152):this.load8kRomBank(2*(this.nes.rom.romCount-1),32768),this.prgAddressChanged=!1)}},F[4].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC3: Invalid ROM! Unable to load.");this.load8kRomBank(2*(this.nes.rom.romCount-1),49152),this.load8kRomBank(2*(this.nes.rom.romCount-1)+1,57344),this.load8kRomBank(0,32768),this.load8kRomBank(1,40960),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[4].prototype.clockIrqCounter=function(){1===this.irqEnable&&(this.irqCounter--,this.irqCounter<0&&(this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.irqCounter=this.irqLatchValue))},F[4].prototype.toJSON=function(){var t=F[0].prototype.toJSON.apply(this);return t.command=this.command,t.prgAddressSelect=this.prgAddressSelect,t.chrAddressSelect=this.chrAddressSelect,t.pageNumber=this.pageNumber,t.irqCounter=this.irqCounter,t.irqLatchValue=this.irqLatchValue,t.irqEnable=this.irqEnable,t.prgAddressChanged=this.prgAddressChanged,t},F[4].prototype.fromJSON=function(t){F[0].prototype.fromJSON.apply(this,arguments),this.command=t.command,this.prgAddressSelect=t.prgAddressSelect,this.chrAddressSelect=t.chrAddressSelect,this.pageNumber=t.pageNumber,this.irqCounter=t.irqCounter,this.irqLatchValue=t.irqLatchValue,this.irqEnable=t.irqEnable,this.prgAddressChanged=t.prgAddressChanged},F[5]=function(t){this.nes=t},F[5].prototype=new F[0],F[5].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):this.load8kVromBank(e,0)},F[5].prototype.write=function(t,e){if(t<20480)F[0].prototype.write.apply(this,arguments);else switch(t){case 20736:this.prg_size=3&e;break;case 20737:this.chr_size=3&e;break;case 20738:this.sram_we_a=3&e;break;case 20739:this.sram_we_b=3&e;break;case 20740:this.graphic_mode=3&e;break;case 20741:this.nametable_mode=e,this.nametable_type[0]=3&e,this.load1kVromBank(3&e,8192),e>>=2,this.nametable_type[1]=3&e,this.load1kVromBank(3&e,9216),e>>=2,this.nametable_type[2]=3&e,this.load1kVromBank(3&e,10240),e>>=2,this.nametable_type[3]=3&e,this.load1kVromBank(3&e,11264);break;case 20742:this.fill_chr=e;break;case 20743:this.fill_pal=3&e;break;case 20755:this.SetBank_SRAM(3,3&e);break;case 20756:case 20757:case 20758:case 20759:this.SetBank_CPU(t,e);break;case 20768:case 20769:case 20770:case 20771:case 20772:case 20773:case 20774:case 20775:this.chr_mode=0,this.chr_page[0][7&t]=e,this.SetBank_PPU();break;case 20776:case 20777:case 20778:case 20779:this.chr_mode=1,this.chr_page[1][0+(3&t)]=e,this.chr_page[1][4+(3&t)]=e,this.SetBank_PPU();break;case 20992:this.split_control=e;break;case 20993:this.split_scroll=e;break;case 20994:this.split_page=63&e;break;case 20995:this.irq_line=e,this.nes.cpu.ClearIRQ();break;case 20996:this.irq_enable=e,this.nes.cpu.ClearIRQ();break;case 20997:this.mult_a=e;break;case 20998:this.mult_b=e;break;default:t>=20480&&t<=20501?this.nes.papu.exWrite(t,e):t>=23552&&t<=24575?2===this.graphic_mode||3!==this.graphic_mode&&this.irq_status:t>=24576&&t<=32767&&2===this.sram_we_a&&this.sram_we_b;break}},F[5].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.load8kRomBank(2*this.nes.rom.romCount-1,32768),this.load8kRomBank(2*this.nes.rom.romCount-1,40960),this.load8kRomBank(2*this.nes.rom.romCount-1,49152),this.load8kRomBank(2*this.nes.rom.romCount-1,57344),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[7]=function(t){this.nes=t},F[7].prototype=new F[0],F[7].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):(this.load32kRomBank(7&e,32768),16&e?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING2):this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING))},F[7].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("AOROM: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[11]=function(t){this.nes=t},F[11].prototype=new F[0],F[11].prototype.write=function(t,e){if(t<32768)F[0].prototype.write.apply(this,arguments);else{var s=2*(15&e)%this.nes.rom.romCount,i=(2*(15&e)+1)%this.nes.rom.romCount;if(this.loadRomBank(s,32768),this.loadRomBank(i,49152),this.nes.rom.vromCount>0){var n=2*(e>>4)%this.nes.rom.vromCount;this.loadVromBank(n,0),this.loadVromBank(n+1,4096)}}},F[34]=function(t){this.nes=t},F[34].prototype=new F[0],F[34].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):this.load32kRomBank(e,32768)},F[38]=function(t){this.nes=t},F[38].prototype=new F[0],F[38].prototype.write=function(t,e){t<28672||t>32767?F[0].prototype.write.apply(this,arguments):(this.load32kRomBank(3&e,32768),this.load8kVromBank(2*(e>>2&3),0))},F[66]=function(t){this.nes=t},F[66].prototype=new F[0],F[66].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):(this.load32kRomBank(e>>4&3,32768),this.load8kVromBank(2*(3&e),0))},F[94]=function(t){this.nes=t},F[94].prototype=new F[0],F[94].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):this.loadRomBank(e>>2,32768)},F[94].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UN1ROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},F[140]=function(t){this.nes=t},F[140].prototype=new F[0],F[140].prototype.write=function(t,e){t<24576||t>32767?F[0].prototype.write.apply(this,arguments):(this.load32kRomBank(e>>4&3,32768),this.load8kVromBank(2*(15&e),0))},F[180]=function(t){this.nes=t},F[180].prototype=new F[0],F[180].prototype.write=function(t,e){t<32768?F[0].prototype.write.apply(this,arguments):this.loadRomBank(e,49152)},F[180].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("Mapper 180: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};var M=F,x=M,L=R,P=function(t){this.nes=t,this.mapperName=new Array(92);for(var e=0;e<92;e++)this.mapperName[e]="Unknown Mapper";this.mapperName[0]="Direct Access",this.mapperName[1]="Nintendo MMC1",this.mapperName[2]="UNROM",this.mapperName[3]="CNROM",this.mapperName[4]="Nintendo MMC3",this.mapperName[5]="Nintendo MMC5",this.mapperName[6]="FFE F4xxx",this.mapperName[7]="AOROM",this.mapperName[8]="FFE F3xxx",this.mapperName[9]="Nintendo MMC2",this.mapperName[10]="Nintendo MMC4",this.mapperName[11]="Color Dreams Chip",this.mapperName[12]="FFE F6xxx",this.mapperName[15]="100-in-1 switch",this.mapperName[16]="Bandai chip",this.mapperName[17]="FFE F8xxx",this.mapperName[18]="Jaleco SS8806 chip",this.mapperName[19]="Namcot 106 chip",this.mapperName[20]="Famicom Disk System",this.mapperName[21]="Konami VRC4a",this.mapperName[22]="Konami VRC2a",this.mapperName[23]="Konami VRC2a",this.mapperName[24]="Konami VRC6",this.mapperName[25]="Konami VRC4b",this.mapperName[32]="Irem G-101 chip",this.mapperName[33]="Taito TC0190/TC0350",this.mapperName[34]="32kB ROM switch",this.mapperName[64]="Tengen RAMBO-1 chip",this.mapperName[65]="Irem H-3001 chip",this.mapperName[66]="GNROM switch",this.mapperName[67]="SunSoft3 chip",this.mapperName[68]="SunSoft4 chip",this.mapperName[69]="SunSoft5 FME-7 chip",this.mapperName[71]="Camerica chip",this.mapperName[78]="Irem 74HC161/32-based",this.mapperName[91]="Pirate HK-SF3 chip"};P.prototype={VERTICAL_MIRRORING:0,HORIZONTAL_MIRRORING:1,FOURSCREEN_MIRRORING:2,SINGLESCREEN_MIRRORING:3,SINGLESCREEN_MIRRORING2:4,SINGLESCREEN_MIRRORING3:5,SINGLESCREEN_MIRRORING4:6,CHRROM_MIRRORING:7,header:null,rom:null,vrom:null,vromTile:null,romCount:null,vromCount:null,mirroring:null,batteryRam:null,trainer:null,fourScreen:null,mapperType:null,valid:!1,load:function(t){var e,s,i;if(-1===t.indexOf("NES"))throw new Error("Not a valid NES ROM.");for(this.header=new Array(16),e=0;e<16;e++)this.header[e]=255&t.charCodeAt(e);this.romCount=this.header[4],this.vromCount=2*this.header[5],this.mirroring=0!==(1&this.header[6])?1:0,this.batteryRam=0!==(2&this.header[6]),this.trainer=0!==(4&this.header[6]),this.fourScreen=0!==(8&this.header[6]),this.mapperType=this.header[6]>>4|240&this.header[7];var n=!1;for(e=8;e<16;e++)if(0!==this.header[e]){n=!0;break}n&&(this.mapperType&=15),this.rom=new Array(this.romCount);var r,o,a=16;for(e=0;e<this.romCount;e++){for(this.rom[e]=new Array(16384),s=0;s<16384&&!(a+s>=t.length);s++)this.rom[e][s]=255&t.charCodeAt(a+s);a+=16384}for(this.vrom=new Array(this.vromCount),e=0;e<this.vromCount;e++){for(this.vrom[e]=new Array(4096),s=0;s<4096&&!(a+s>=t.length);s++)this.vrom[e][s]=255&t.charCodeAt(a+s);a+=4096}for(this.vromTile=new Array(this.vromCount),e=0;e<this.vromCount;e++)for(this.vromTile[e]=new Array(256),s=0;s<256;s++)this.vromTile[e][s]=new L;for(i=0;i<this.vromCount;i++)for(e=0;e<4096;e++)r=e>>4,o=e%16,o<8?this.vromTile[i][r].setScanline(o,this.vrom[i][e],this.vrom[i][e+8]):this.vromTile[i][r].setScanline(o-8,this.vrom[i][e-8],this.vrom[i][e]);this.valid=!0},getMirroringType:function(){return this.fourScreen?this.FOURSCREEN_MIRRORING:0===this.mirroring?this.HORIZONTAL_MIRRORING:this.VERTICAL_MIRRORING},getMapperName:function(){return this.mapperType>=0&&this.mapperType<this.mapperName.length?this.mapperName[this.mapperType]:"Unknown Mapper, "+this.mapperType},mapperSupported:function(){return typeof x[this.mapperType]<"u"},createMapper:function(){if(this.mapperSupported())return new x[this.mapperType](this.nes);throw new Error("This ROM uses a mapper not supported by JSNES: "+this.getMapperName()+"("+this.mapperType+")")}};var B=P,V=_,G=c,q=C,X=w,H=B,Y=function(t){var e;if(this.opts={onFrame:function(){},onAudioSample:null,onStatusUpdate:function(){},onBatteryRamWrite:function(){},preferredFrameRate:60,emulateSound:!0,sampleRate:48e3},typeof t<"u")for(e in this.opts)typeof t[e]<"u"&&(this.opts[e]=t[e]);this.frameTime=1e3/this.opts.preferredFrameRate,this.ui={writeFrame:this.opts.onFrame,updateStatus:this.opts.onStatusUpdate},this.cpu=new V(this),this.ppu=new q(this),this.papu=new X(this),this.mmap=null,this.controllers={1:new G,2:new G},this.ui.updateStatus("Ready to load a ROM."),this.frame=this.frame.bind(this),this.buttonDown=this.buttonDown.bind(this),this.buttonUp=this.buttonUp.bind(this),this.zapperMove=this.zapperMove.bind(this),this.zapperFireDown=this.zapperFireDown.bind(this),this.zapperFireUp=this.zapperFireUp.bind(this)};Y.prototype={fpsFrameCount:0,romData:null,reset:function(){null!==this.mmap&&this.mmap.reset(),this.cpu.reset(),this.ppu.reset(),this.papu.reset(),this.lastFpsTime=null,this.fpsFrameCount=0},frame:function(){this.ppu.startFrame();var t=0,e=this.opts.emulateSound,s=this.cpu,i=this.ppu,n=this.papu;t:for(;;)for(0===s.cyclesToHalt?(t=s.emulate(),e&&n.clockFrameCounter(t),t*=3):s.cyclesToHalt>8?(t=24,e&&n.clockFrameCounter(8),s.cyclesToHalt-=8):(t=3*s.cyclesToHalt,e&&n.clockFrameCounter(s.cyclesToHalt),s.cyclesToHalt=0);t>0;t--){if(i.curX===i.spr0HitX&&1===i.f_spVisibility&&i.scanline-21===i.spr0HitY&&i.setStatusFlag(i.STATUS_SPRITE0HIT,!0),i.requestEndFrame&&(i.nmiCounter--,0===i.nmiCounter)){i.requestEndFrame=!1,i.startVBlank();break t}i.curX++,341===i.curX&&(i.curX=0,i.endScanline())}this.fpsFrameCount++},buttonDown:function(t,e){this.controllers[t].buttonDown(e)},buttonUp:function(t,e){this.controllers[t].buttonUp(e)},zapperMove:function(t,e){!this.mmap||(this.mmap.zapperX=t,this.mmap.zapperY=e)},zapperFireDown:function(){!this.mmap||(this.mmap.zapperFired=!0)},zapperFireUp:function(){!this.mmap||(this.mmap.zapperFired=!1)},getFPS:function(){var t=+new Date,e=null;return this.lastFpsTime&&(e=this.fpsFrameCount/((t-this.lastFpsTime)/1e3)),this.fpsFrameCount=0,this.lastFpsTime=t,e},reloadROM:function(){null!==this.romData&&this.loadROM(this.romData)},loadROM:function(t){this.rom=new H(this),this.rom.load(t),this.reset(),this.mmap=this.rom.createMapper(),this.mmap.loadROM(),this.ppu.setMirroring(this.rom.getMirroringType()),this.romData=t},setFramerate:function(t){this.opts.preferredFrameRate=t,this.frameTime=1e3/t,this.papu.setSampleRate(this.opts.sampleRate,!1)},toJSON:function(){return{romData:this.romData,cpu:this.cpu.toJSON(),mmap:this.mmap.toJSON(),ppu:this.ppu.toJSON()}},fromJSON:function(t){this.reset(),this.romData=t.romData,this.cpu.fromJSON(t.cpu),this.mmap.fromJSON(t.mmap),this.ppu.fromJSON(t.ppu)}};var j=Y,U={Controller:c,NES:j};function W(t,e){const s=window.indexedDB.open(t,1);let i;function n(t,s){i.transaction([e],"readwrite").objectStore(e).put({id:t,data:s})}function r(t,s){const n=i.transaction([e],"readwrite").objectStore(e).get(t);n.addEventListener("success",(()=>{s(n.result.data)}))}function o(t){i.transaction([e],"readwrite").objectStore(e).delete(t)}function a(){i.transaction([e],"readwrite").objectStore(e).clear()}return s.addEventListener("success",(()=>{i=s.result})),s.addEventListener("success",(()=>{i=s.result})),s.addEventListener("error",(()=>{console.error("indexedDB load error")})),s.addEventListener("upgradeneeded",(()=>{i=s.result,i.objectStoreNames.contains(e)||i.createObjectStore(e,{keyPath:"id"})})),{setItem:n,getItem:r,removeItem:o,clear:a}}function Z(t,e,s){return e>=s&&([e,s]=[s,e]),Math.min(s,Math.max(e,t))}function $(t,e){return Array.from({length:t}).fill(e)}function z(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)}function K(t){return void 0===t}function J(t){return null===t}function Q(t){return"number"==typeof t?isNaN(t):J(t)||K(t)}function tt(t){return!Q(t)}function et(t,e=!0){const s=!e&&Q(t);return Array.isArray(t)?0===t.length:s}function st(t,e=!0){const s=!e&&Q(t);return z(t)?et(Object.keys(t)):s}function it(t,e=16){e=Z(e,2,36);let s="";for(let i=1;i<=t;i++)s+=Math.floor(Math.random()*e).toString(e);return s}function nt(){let t="";if(typeof crypto<"u"&&"randomUUID"in crypto)t=crypto.randomUUID();else if(typeof Blob>"u")t=`${it(8)}-${it(4)}-${it(4)}-${it(4)}-${it(12)}`;else{const e=URL.createObjectURL(new Blob);t=e.toString().substring(e.lastIndexOf("/")+1),URL.revokeObjectURL(e)}return t}function rt(t,e=nt()){const s=document.createElement("a");s.href=t,s.download=e,s.click()}function ot(t,e=nt()){rt(t.toDataURL("image/png"),e)}function at(t){return Object.keys(t)}function ht(t,e){return t in e}let lt={};const ut="........",ct=/\|\d\|([LRUDTSAB.]{8})\|([LRUDTSAB.]{8})?\|\|/g;function pt(t,e){let s=ct.exec(t),i=0+e,n=!1;if(lt={},s)for(;s;){const e=s[1]===ut,r=s[2]===ut;if(e&&r){n&&(lt[i]={p1:$(8,64),p2:$(8,64)},n=!1),i++,s=ct.exec(t);continue}n=!0;const o=s[1]?s[1].split("").map((t=>"."===t?64:65)).reverse():$(8,64),a=s[2]?s[2].split("").map((t=>"."===t?64:65)).reverse():$(8,64);s=ct.exec(t),lt[i]={p1:o,p2:a},i++}}const dt=256,ft=240;let mt,_t,gt,Rt;const vt=new ImageData(dt,ft);function St(t){xt.frameCounter++;for(let e=0;e<61440;e+=1)gt[e]=4278190080|t[e]}function yt(){vt.data.set(_t),Rt.putImageData(vt,0,0)}function bt(t){Rt=t.getContext("2d"),Rt.fillStyle="black",Rt.fillRect(0,0,dt,ft);const e=new ArrayBuffer(vt.data.length);function s(){cancelAnimationFrame(mt),mt=requestAnimationFrame(s),yt()}_t=new Uint8ClampedArray(e),gt=new Uint32Array(e),xt.frameCounter=1,mt=requestAnimationFrame(s)}function At(t){const e=t.parentNode,s=e.clientWidth,i=e.clientHeight,n=s/i,r=dt/ft;r<n?(t.style.height=`${i}px`,t.style.width=`${Math.round(i+r)}px`):(t.style.width=`${s}px`,t.style.height=`${Math.round(s/r)}px`)}function Ct(){cancelAnimationFrame(mt)}function Et(t){const e=new Image;return e.src=t.toDataURL("image/png"),e}function It(t){return Array(t).fill(!1)}function Dt(t){return t.filter(Boolean)}function Tt(){return $(32768,0).map(((t,e)=>e))}function Nt(t){const e=[];let s=t[0],i=1;for(let n=1;n<t.length;n++)t[n]===s?i++:(i>1?(e.push(i),e.push(s)):e.push(-s-1),s=t[n],i=1);return e.push(i),e.push(s),e}function Ot(t){const e=[];for(let s=0;s<t.length;)if(t[s]<0)e.push(-t[s]-1),s++;else{const i=t[s],n=t[s+1];for(let t=0;t<i;t++)e.push(n);s+=2}return e}function wt(t){const e=[],s=[];for(let i=0;i<t.length;i++){for(let s=0;s<t[i].opaque.length;s++)!1===t[i].opaque[s]?e.push(0):e.push(1);s.push(...t[i].pix)}return[Nt(e),Nt(s)]}function kt(t){const e=[];let s=Array(8),i=[];const n=Ot(t[0]),r=Ot(t[1]);for(let o=0;o<512;o+=1){for(let t=0;t<8;t+=1)0===n[8*o+t]&&(s[t]=!1);for(let t=0;t<64;t+=1)i[t]=r[64*o+t];e.push({opaque:s,pix:i}),s=Array(8),i=[]}return e}function Ft(t){const e=[],s=[];return t.reduce(((t,i)=>(e.push(...i.tile),s.push(...i.attrib),t)),e),[Nt(e),Nt(s)]}function Mt(t){const e=[];let s=[],i=[];const n=Ot(t[0]),r=Ot(t[1]);for(let o=0;o<4096;o+=1)s.push(n[o]),i.push(r[o]),(o+1)%1024===0&&(e.push({tile:s,attrib:i}),s=[],i=[]);return e}const xt=new U.NES({onFrame:St,onAudioSample:zt,sampleRate:Kt()});xt.videoMode=!1,xt.frameCounter=1,xt.playbackMode=!1;const Lt={buffer:null};function Pt(t){const e=xt.ppu.toJSON(),s=xt.cpu.toJSON(),i=xt.mmap.toJSON();delete e.attrib,delete e.bgbuffer,delete e.buffer,delete e.pixrendered,delete e.vramMirrorTable;const n=Nt(e.vramMem),r=Ft(e.nameTable),o=wt(e.ptTile),a=Nt(s.mem);return delete e.vramMem,delete e.nameTable,delete s.mem,delete e.ptTile,{path:t,data:{cpu:s,mmap:i,ppu:e,vramMemZip:n,nameTableZip:r,cpuMemZip:a,ptTileZip:o,frameCounter:xt.frameCounter}}}function Bt(t,e,s){if(s&&t.path!==s)return e({code:2,message:`Load Error: The saved data is inconsistent with the current game, saved: ${t.path}, current: ${s}.`});if(!Lt.buffer)return e({code:3,message:"Load Error: NES ROM is not loaded."});try{const{ppu:e,cpu:s,mmap:i,frameCounter:n,vramMemZip:r,nameTableZip:o,cpuMemZip:a,ptTileZip:h}=t.data;e.attrib=$(32,0),e.bgbuffer=$(61440,0),e.buffer=$(61440,0),e.pixrendered=$(61440,0),e.vramMem=Ot(r),e.nameTable=Mt(o),e.vramMirrorTable=Tt(),e.ptTile=kt(h),s.mem=Ot(a),xt.ppu.reset(),xt.romData=Lt.buffer,xt.cpu.fromJSON(s),xt.mmap.fromJSON(i),xt.ppu.fromJSON(e),xt.frameCounter=n}catch(i){console.error(i),e({code:3,message:"Load Error: The saved data is invalid."})}}let Vt,Gt=new AudioContext,qt=1;const Xt=512,Ht=4096,Yt=Ht-1,jt=new Float32Array(Ht),Ut=new Float32Array(Ht);let Wt=0,Zt=0;function $t(){return Wt-Zt&Yt}function zt(t,e){jt[Wt]=t,Ut[Wt]=e,Wt=Wt+1&Yt}function Kt(){if(!window.AudioContext)return 44100;const t=new window.AudioContext,e=t.sampleRate;return t.close(),e}function Jt(){if(xt.videoMode){const t=lt[xt.frameCounter];xt.frameCounter>0&&t&&(xt.controllers[1].state=t.p1,xt.controllers[2].state=t.p2)}xt.frame()}function Qt(){Gt=new AudioContext,Vt=Gt.createScriptProcessor(Xt,0,2),Vt.onaudioprocess=t=>{const e=t.outputBuffer,s=e.length;$t()<Xt&&Jt();const i=e.getChannelData(0),n=e.getChannelData(1);for(let r=0;r<s;r++){const t=Zt+r&Yt;i[r]=jt[t]*qt,n[r]=Ut[t]*qt}Zt=Zt+s&Yt},Vt.connect(Gt.destination)}function te(){Vt.disconnect(Gt.destination),Vt.onaudioprocess=null,Vt={},"close"in Gt&&Gt.close()}function ee(){Gt.suspend()}function se(){Gt.resume()}function ie(t){qt=Z(t,0,100)/100}const ne=.3,re={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},oe={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},ae={UP:"BUTTON_UP",DOWN:"BUTTON_DOWN",LEFT:"BUTTON_LEFT",RIGHT:"BUTTON_RIGHT",A:"BUTTON_A",B:"BUTTON_B",C:"BUTTON_A",D:"BUTTON_B",SELECT:"BUTTON_SELECT",START:"BUTTON_START"},he=at(ae);class le{constructor(t){l(this,"animationFrame"),l(this,"axesHolding"),l(this,"btnHolding"),l(this,"gamepad_btns"),window.addEventListener("gamepadconnected",this.connectHandler.bind(this,!0)),window.addEventListener("gamepaddisconnected",this.connectHandler.bind(this,!1)),this.animationFrame=requestAnimationFrame(this.frame.bind(this)),this.btnHolding={p1:It(20),p2:It(20)},this.axesHolding={p1:It(4),p2:It(4)},this.gamepad_btns=t}get gamepads(){return Dt(Array.from(navigator.getGamepads()))}connectHandler(t,e){t?this.gamepads[e.gamepad.index]=e.gamepad:0===this.gamepads.length&&this.close()}axesHandler(t,e,s,i){var n;const r=null==(n=this.axesHolding[t])?void 0:n[s];e?r||(document.dispatchEvent(new KeyboardEvent("keydown",{code:this.gamepad_btns.value[t][i]})),this.axesHolding[t][s]=!0):r&&(document.dispatchEvent(new KeyboardEvent("keyup",{code:this.gamepad_btns.value[t][i]})),this.axesHolding[t][s]=!1)}btnHandler(t,e,s){var i;const n=null==(i=this.btnHolding[t])?void 0:i[s];if(e.pressed){if(n)return;this.btnHolding[t][s]=!0,document.dispatchEvent(new KeyboardEvent("keydown",{code:this.gamepad_btns.value[t][s]}))}else n&&(this.btnHolding[t][s]=!1,document.dispatchEvent(new KeyboardEvent("keyup",{code:this.gamepad_btns.value[t][s]})))}run(){for(let t=0;t<this.gamepads.length&&!(t>1);t++){const e=`p${t+1}`,s=this.gamepads[t];s.buttons.forEach(this.btnHandler.bind(this,e));const i=s.axes[0],n=s.axes[1];this.axesHandler(e,i>ne,0,15),this.axesHandler(e,i<-ne,1,14),this.axesHandler(e,n>ne,2,13),this.axesHandler(e,n<-ne,3,12)}}frame(){this.run(),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.frame.bind(this))}close(){this.btnHolding.p1.fill(!1),this.btnHolding.p2.fill(!1),cancelAnimationFrame(this.animationFrame)}}const ue=t=>{const e=(0,i.EW)((()=>Object.assign(re,t.p1))),s=(0,i.EW)((()=>Object.assign(oe,t.p2))),n=(0,i.EW)((()=>{const t={};return he.forEach((i=>{t[e.value[i]]={key:i,p:1,value:ae[i]},i in s.value&&(t[s.value[i]]={key:i,p:2,value:ae[i]})})),t})),r=(0,i.EW)((()=>[e.value.C,e.value.D,s.value.C,s.value.D])),o=(0,i.EW)((()=>({p1:[e.value.A,e.value.C,e.value.B,e.value.D,"","","","",e.value.SELECT,e.value.START,"","",e.value.UP,e.value.DOWN,e.value.LEFT,e.value.RIGHT],p2:[s.value.A,s.value.C,s.value.B,s.value.D,"","","","",e.value.SELECT,e.value.START,"","",s.value.UP,s.value.DOWN,s.value.LEFT,s.value.RIGHT]}))),a=new le(o);return(0,i.sV)((()=>{a.frame()})),(0,i.xo)((()=>{a.close()})),[n,r]},ce=["width","height"],pe={style:{position:"absolute",top:"0",left:"0%","background-color":"#000",width:"100%",height:"100%"}},de=(0,i.pM)({name:"nes-vue",__name:"NesVue",props:{url:{},autoStart:{type:Boolean,default:!1},width:{default:"256px"},height:{default:"240px"},label:{default:"Game Start"},gain:{default:100},noClip:{type:Boolean,default:!1},storage:{type:Boolean,default:!1},debugger:{type:Boolean,default:!1},turbo:{default:16},p1:{default:()=>re},p2:{default:()=>oe}},emits:["fps","success","error","saved","loaded","update:url","removed"],setup(t,{expose:e,emit:s}){const a=t;if(!a.url)throw"nes-vue missing props: url.";const[h,l]=ue(a),u=(0,r.KR)(null),c=(0,r.KR)(!0),p=W("nes-vue","save_data");let d,f=!1;function m(t){return a.debugger&&console.error(t.message),s("error",t),!1}(0,r.QZ)((()=>{xt.ppu.clipToTvSize=!a.noClip}));const _={p1:{C:{timeout:0,beDown:!1,once:!0},D:{timeout:0,beDown:!1,once:!0}},p2:{C:{timeout:0,beDown:!1,once:!0},D:{timeout:0,beDown:!1,once:!0}}},g=(0,i.EW)((()=>{const t=1e3/(2*a.turbo);return Z(t,20,100)})),R=function(t){const e=t.code;if(ht(e,h.value)){const s=h.value[e];if(l.value.includes(t.code)){const t=_[`p${s.p}`][s.key];return void(t.once&&(xt.buttonDown(s.p,U.Controller[s.value]),t.timeout=window.setInterval((()=>{t.beDown?xt.buttonDown(s.p,U.Controller[s.value]):xt.buttonUp(s.p,U.Controller[s.value]),t.beDown=!t.beDown}),g.value),t.once=!1))}xt.buttonDown(s.p,U.Controller[s.value])}},v=function(t){const e=t.code;if(ht(e,h.value)){const s=h.value[e];if(l.value.includes(t.code)){const t=_[`p${s.p}`][s.key];clearInterval(t.timeout),t.once=!0}xt.buttonUp(s.p,U.Controller[s.value])}};function S(){document.addEventListener("keydown",R),document.addEventListener("keyup",v)}function y(){document.removeEventListener("keydown",R),document.removeEventListener("keyup",v)}function b(t=a.url){if(!Q(u.value))return c.value?c.value=!1:(te(),Ct(),clearInterval(d)),t!==a.url?(Lt.buffer=null,void s("update:url",t)):(bt(u.value),void new Promise(((e,i)=>{function n(n){try{xt.loadROM(n),d=window.setInterval((()=>{const t=xt.getFPS();s("fps",t||0)}),1e3),e("success")}catch{i({code:0,message:`${t} loading Error: Probably the ROM is unsupported.`}),c.value=!0}}if(tt(Lt.buffer))n(Lt.buffer);else{const e=new XMLHttpRequest;e.open("GET",t),e.overrideMimeType("text/plain; charset=x-user-defined"),e.onerror=()=>{i({code:404,message:`${t} loading Error: ${e.statusText}`})},e.onload=function(){200===this.status?(Lt.buffer=this.responseText,n(Lt.buffer)):i({code:404,message:`${t} loading Error: ${e.statusText}`})},e.send()}u.value&&At(u.value),S()})).then((()=>{Qt(),s("success")}),(t=>(m(t),t))))}function A(){xt.videoMode&&B(),c.value||C(),f&&(f=!1),a.url&&b()}function C(){c.value||(te(),Ct(),clearInterval(d),xt.reset(),c.value=!0)}function E(t){return void 0===t&&m({code:4,message:"TypeError: id is undefined."})}function I(t){Bt(t,m,a.url)}function D(t){if(!E(t))try{localStorage.setItem(t,JSON.stringify(Pt(a.url))),s("saved",{id:t,message:"The state has been saved in localStorage",target:"localStorage"})}catch(e){if("QuotaExceededError"===e.name)return m({code:1,message:"Save Error: localStorage out of memory."})}}function T(t){if(E(t))return;const e=localStorage.getItem(t);if(!e)return m({code:2,message:"Load Error: nothing to load."});I(JSON.parse(e)),s("loaded",{id:t,message:"Loaded state from localStorage",target:"localStorage"})}function N(t){if(!E(t))try{p.setItem(t,Pt(a.url))}catch{m({code:1,message:"Save Error: Unable to save data to indexedDB."})}}function O(t){E(t)||p.getItem(t,(t=>{I(t)}))}function w(t){if(!E(t)){if(!xt.cpu.irqRequested||f||c.value)return m({code:1,message:"Save Error: Can only be saved while the game is running."});a.storage?D(t):N(t)}}function k(t){if(!E(t)){if(!xt.cpu.irqRequested||f||c.value)return m({code:2,message:"Load Error: Can only be loaded when the game is running."});a.storage?T(t):O(t)}}function F(t){E(t)||(a.storage?localStorage.removeItem(t):p.removeItem(t))}function M(){p.clear()}function x(t,e){if(!u.value||c.value)return;const s=Et(u.value);return t&&ot(u.value,e),s}function L(){st(lt,!1)?m({code:3,message:"FM2 Error: No fm2 scripts found."}):(A(),xt.videoMode=!0,y())}async function P(t,e=0){try{const s=await(await fetch(t)).text();pt(s,e)}catch(s){return m({code:4,message:"FM2 Error: Unable to load fm2 file."}),Promise.reject(s)}return L}function B(){xt.videoMode=!1,xt.controllers[1].state=$(8,64),xt.controllers[2].state=$(8,64),S()}function V(t,e=0){return pt(t,e),Promise.resolve(L)}function G(){f=!0,ee()}function q(){f=!1,se()}const X=(0,i.EW)((()=>{const t=/^\d*$/;let e=a.width,s=a.height;return u.value&&(0,i.dY)((()=>{u.value&&At(u.value)})),t.test(String(e))&&(e+="px"),t.test(String(s))&&(s+="px"),`width: ${e};height: ${s};background-color: #000;margin: auto;position: relative;overflow: hidden;`}));return(0,i.wB)((()=>a.url),(()=>{Lt.buffer=null,A()})),(0,i.wB)((()=>a.gain),(()=>{ie(a.gain)})),(0,i.sV)((()=>{Lt.buffer=null,a.autoStart&&b(),ie(a.gain)})),(0,i.xo)((()=>{y(),C()})),e({start:b,reset:A,stop:C,pause:G,play:q,save:w,load:k,remove:F,clear:M,screenshot:x,fm2URL:P,fm2Text:V,fm2Play:L,fm2Stop:B}),(t,e)=>((0,i.uX)(),(0,i.CE)("div",{style:(0,o.Tr)(X.value)},[(0,i.Lk)("canvas",{ref_key:"cvs",ref:u,width:(0,r.R1)(dt),height:(0,r.R1)(ft),style:{display:"inline-block"}},null,8,ce),(0,i.bo)((0,i.Lk)("div",pe,null,512),[[n.aG,c.value]]),c.value?((0,i.uX)(),(0,i.CE)("div",{key:0,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer",color:"#f8f4ed","font-size":"20px"},onClick:e[0]||(e[0]=t=>b())},(0,o.v_)(t.label),1)):(0,i.Q3)("",!0)],4))}});var fe=s(3723),me=s(5510);const _e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ge=(()=>{if("undefined"===typeof document)return!1;const t=_e[0],e={};for(const s of _e){const i=s?.[1];if(i in document){for(const[i,n]of s.entries())e[t[i]]=n;return e}}return!1})(),Re={change:ge.fullscreenchange,error:ge.fullscreenerror};let ve={request(t=document.documentElement,e){return new Promise(((s,i)=>{const n=()=>{ve.off("change",n),s()};ve.on("change",n);const r=t[ge.requestFullscreen](e);r instanceof Promise&&r.then(n).catch(i)}))},exit(){return new Promise(((t,e)=>{if(!ve.isFullscreen)return void t();const s=()=>{ve.off("change",s),t()};ve.on("change",s);const i=document[ge.exitFullscreen]();i instanceof Promise&&i.then(s).catch(e)}))},toggle(t,e){return ve.isFullscreen?ve.exit():ve.request(t,e)},onchange(t){ve.on("change",t)},onerror(t){ve.on("error",t)},on(t,e){const s=Re[t];s&&document.addEventListener(s,e,!1)},off(t,e){const s=Re[t];s&&document.removeEventListener(s,e,!1)},raw:ge};Object.defineProperties(ve,{isFullscreen:{get:()=>Boolean(document[ge.fullscreenElement])},element:{enumerable:!0,get:()=>document[ge.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[ge.fullscreenEnabled])}}),ge||(ve={isEnabled:!1});var Se=ve;s(8142),s(1256),s(2513),s(6456),s(663),s(1884),s(8006);
/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function ye(t,e){const s=new Set(t.split(","));return e?t=>s.has(t.toLowerCase()):t=>s.has(t)}const be={},Ae=[],Ce=()=>{},Ee=()=>!1,Ie=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),De=t=>t.startsWith("onUpdate:"),Te=Object.assign,Ne=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Oe=Object.prototype.hasOwnProperty,we=(t,e)=>Oe.call(t,e),ke=Array.isArray,Fe=t=>"[object Map]"===Xe(t),Me=t=>"[object Set]"===Xe(t),xe=t=>"[object RegExp]"===Xe(t),Le=t=>"function"===typeof t,Pe=t=>"string"===typeof t,Be=t=>"symbol"===typeof t,Ve=t=>null!==t&&"object"===typeof t,Ge=t=>(Ve(t)||Le(t))&&Le(t.then)&&Le(t.catch),qe=Object.prototype.toString,Xe=t=>qe.call(t),He=t=>Xe(t).slice(8,-1),Ye=t=>"[object Object]"===Xe(t),je=t=>Pe(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,Ue=ye(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),We=t=>{const e=Object.create(null);return s=>{const i=e[s];return i||(e[s]=t(s))}},Ze=/-(\w)/g,$e=We((t=>t.replace(Ze,((t,e)=>e?e.toUpperCase():"")))),ze=/\B([A-Z])/g,Ke=We((t=>t.replace(ze,"-$1").toLowerCase())),Je=We((t=>t.charAt(0).toUpperCase()+t.slice(1))),Qe=We((t=>{const e=t?`on${Je(t)}`:"";return e})),ts=(t,e)=>!Object.is(t,e),es=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},ss=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},is=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ns=t=>{const e=Pe(t)?Number(t):NaN;return isNaN(e)?t:e};let rs;const os=()=>rs||(rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{});function as(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=Pe(i)?cs(i):as(i);if(n)for(const t in n)e[t]=n[t]}return e}if(Pe(t)||Ve(t))return t}const hs=/;(?![^(]*\))/g,ls=/:([^]+)/,us=/\/\*[^]*?\*\//g;function cs(t){const e={};return t.replace(us,"").split(hs).forEach((t=>{if(t){const s=t.split(ls);s.length>1&&(e[s[0].trim()]=s[1].trim())}})),e}function ps(t){let e="";if(Pe(t))e=t;else if(ke(t))for(let s=0;s<t.length;s++){const i=ps(t[s]);i&&(e+=i+" ")}else if(Ve(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ds="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fs=ye(ds);function ms(t){return!!t||""===t}let _s,gs;class Rs{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_s,!t&&_s&&(this.index=(_s.scopes||(_s.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=_s;try{return _s=this,t()}finally{_s=e}}else 0}on(){_s=this}off(){_s=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function vs(t,e=_s){e&&e.active&&e.effects.push(t)}function Ss(){return _s}class ys{constructor(t,e,s,i){this.fn=t,this.trigger=e,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,vs(this,i)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,Ns();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(bs(e.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),Os()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Is,e=gs;try{return Is=!0,gs=this,this._runnings++,As(this),this.fn()}finally{Cs(this),this._runnings--,gs=e,Is=t}}stop(){this.active&&(As(this),Cs(this),this.onStop&&this.onStop(),this.active=!1)}}function bs(t){return t.value}function As(t){t._trackId++,t._depsLength=0}function Cs(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Es(t.deps[e],t);t.deps.length=t._depsLength}}function Es(t,e){const s=t.get(e);void 0!==s&&e._trackId!==s&&(t.delete(e),0===t.size&&t.cleanup())}let Is=!0,Ds=0;const Ts=[];function Ns(){Ts.push(Is),Is=!1}function Os(){const t=Ts.pop();Is=void 0===t||t}function ws(){Ds++}function ks(){Ds--;while(!Ds&&Ms.length)Ms.shift()()}function Fs(t,e,s){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&Es(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ms=[];function xs(t,e,s){ws();for(const i of t.keys()){let s;i._dirtyLevel<e&&(null!=s?s:s=t.get(i)===i._trackId)&&(i._shouldSchedule||(i._shouldSchedule=0===i._dirtyLevel),i._dirtyLevel=e),i._shouldSchedule&&(null!=s?s:s=t.get(i)===i._trackId)&&(i.trigger(),i._runnings&&!i.allowRecurse||2===i._dirtyLevel||(i._shouldSchedule=!1,i.scheduler&&Ms.push(i.scheduler)))}ks()}const Ls=(t,e)=>{const s=new Map;return s.cleanup=t,s.computed=e,s},Ps=new WeakMap,Bs=Symbol(""),Vs=Symbol("");function Gs(t,e,s){if(Is&&gs){let e=Ps.get(t);e||Ps.set(t,e=new Map);let i=e.get(s);i||e.set(s,i=Ls((()=>e.delete(s)))),Fs(gs,i,void 0)}}function qs(t,e,s,i,n,r){const o=Ps.get(t);if(!o)return;let a=[];if("clear"===e)a=[...o.values()];else if("length"===s&&ke(t)){const t=Number(i);o.forEach(((e,s)=>{("length"===s||!Be(s)&&s>=t)&&a.push(e)}))}else switch(void 0!==s&&a.push(o.get(s)),e){case"add":ke(t)?je(s)&&a.push(o.get("length")):(a.push(o.get(Bs)),Fe(t)&&a.push(o.get(Vs)));break;case"delete":ke(t)||(a.push(o.get(Bs)),Fe(t)&&a.push(o.get(Vs)));break;case"set":Fe(t)&&a.push(o.get(Bs));break}ws();for(const h of a)h&&xs(h,4,void 0);ks()}const Xs=ye("__proto__,__v_isRef,__isVue"),Hs=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(Be)),Ys=js();function js(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const s=Mi(this);for(let e=0,n=this.length;e<n;e++)Gs(s,"get",e+"");const i=s[e](...t);return-1===i||!1===i?s[e](...t.map(Mi)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){Ns(),ws();const s=Mi(this)[e].apply(this,t);return ks(),Os(),s}})),t}function Us(t){Be(t)||(t=String(t));const e=Mi(this);return Gs(e,"has",t),e.hasOwnProperty(t)}class Ws{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){const i=this._isReadonly,n=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return n;if("__v_raw"===e)return s===(i?n?Ai:bi:n?yi:Si).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=ke(t);if(!i){if(r&&we(Ys,e))return Reflect.get(Ys,e,s);if("hasOwnProperty"===e)return Us}const o=Reflect.get(t,e,s);return(Be(e)?Hs.has(e):Xs(e))?o:(i||Gs(t,"get",e),n?o:Xi(o)?r&&je(e)?o:o.value:Ve(o)?i?Ti(o):Ii(o):o)}}class Zs extends Ws{constructor(t=!1){super(!1,t)}set(t,e,s,i){let n=t[e];if(!this._isShallow){const e=wi(n);if(ki(s)||wi(s)||(n=Mi(n),s=Mi(s)),!ke(t)&&Xi(n)&&!Xi(s))return!e&&(n.value=s,!0)}const r=ke(t)&&je(e)?Number(e)<t.length:we(t,e),o=Reflect.set(t,e,s,i);return t===Mi(i)&&(r?ts(s,n)&&qs(t,"set",e,s,n):qs(t,"add",e,s)),o}deleteProperty(t,e){const s=we(t,e),i=t[e],n=Reflect.deleteProperty(t,e);return n&&s&&qs(t,"delete",e,void 0,i),n}has(t,e){const s=Reflect.has(t,e);return Be(e)&&Hs.has(e)||Gs(t,"has",e),s}ownKeys(t){return Gs(t,"iterate",ke(t)?"length":Bs),Reflect.ownKeys(t)}}class $s extends Ws{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const zs=new Zs,Ks=new $s,Js=new Zs(!0),Qs=t=>t,ti=t=>Reflect.getPrototypeOf(t);function ei(t,e,s=!1,i=!1){t=t["__v_raw"];const n=Mi(t),r=Mi(e);s||(ts(e,r)&&Gs(n,"get",e),Gs(n,"get",r));const{has:o}=ti(n),a=i?Qs:s?Pi:Li;return o.call(n,e)?a(t.get(e)):o.call(n,r)?a(t.get(r)):void(t!==n&&t.get(e))}function si(t,e=!1){const s=this["__v_raw"],i=Mi(s),n=Mi(t);return e||(ts(t,n)&&Gs(i,"has",t),Gs(i,"has",n)),t===n?s.has(t):s.has(t)||s.has(n)}function ii(t,e=!1){return t=t["__v_raw"],!e&&Gs(Mi(t),"iterate",Bs),Reflect.get(t,"size",t)}function ni(t){t=Mi(t);const e=Mi(this),s=ti(e),i=s.has.call(e,t);return i||(e.add(t),qs(e,"add",t,t)),this}function ri(t,e){e=Mi(e);const s=Mi(this),{has:i,get:n}=ti(s);let r=i.call(s,t);r||(t=Mi(t),r=i.call(s,t));const o=n.call(s,t);return s.set(t,e),r?ts(e,o)&&qs(s,"set",t,e,o):qs(s,"add",t,e),this}function oi(t){const e=Mi(this),{has:s,get:i}=ti(e);let n=s.call(e,t);n||(t=Mi(t),n=s.call(e,t));const r=i?i.call(e,t):void 0,o=e.delete(t);return n&&qs(e,"delete",t,void 0,r),o}function ai(){const t=Mi(this),e=0!==t.size,s=void 0,i=t.clear();return e&&qs(t,"clear",void 0,void 0,s),i}function hi(t,e){return function(s,i){const n=this,r=n["__v_raw"],o=Mi(r),a=e?Qs:t?Pi:Li;return!t&&Gs(o,"iterate",Bs),r.forEach(((t,e)=>s.call(i,a(t),a(e),n)))}}function li(t,e,s){return function(...i){const n=this["__v_raw"],r=Mi(n),o=Fe(r),a="entries"===t||t===Symbol.iterator&&o,h="keys"===t&&o,l=n[t](...i),u=s?Qs:e?Pi:Li;return!e&&Gs(r,"iterate",h?Vs:Bs),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:a?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function ui(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function ci(){const t={get(t){return ei(this,t)},get size(){return ii(this)},has:si,add:ni,set:ri,delete:oi,clear:ai,forEach:hi(!1,!1)},e={get(t){return ei(this,t,!1,!0)},get size(){return ii(this)},has:si,add:ni,set:ri,delete:oi,clear:ai,forEach:hi(!1,!0)},s={get(t){return ei(this,t,!0)},get size(){return ii(this,!0)},has(t){return si.call(this,t,!0)},add:ui("add"),set:ui("set"),delete:ui("delete"),clear:ui("clear"),forEach:hi(!0,!1)},i={get(t){return ei(this,t,!0,!0)},get size(){return ii(this,!0)},has(t){return si.call(this,t,!0)},add:ui("add"),set:ui("set"),delete:ui("delete"),clear:ui("clear"),forEach:hi(!0,!0)},n=["keys","values","entries",Symbol.iterator];return n.forEach((n=>{t[n]=li(n,!1,!1),s[n]=li(n,!0,!1),e[n]=li(n,!1,!0),i[n]=li(n,!0,!0)})),[t,s,e,i]}const[pi,di,fi,mi]=ci();function _i(t,e){const s=e?t?mi:fi:t?di:pi;return(e,i,n)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(we(s,i)&&i in e?s:e,i,n)}const gi={get:_i(!1,!1)},Ri={get:_i(!1,!0)},vi={get:_i(!0,!1)};const Si=new WeakMap,yi=new WeakMap,bi=new WeakMap,Ai=new WeakMap;function Ci(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ei(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Ci(He(t))}function Ii(t){return wi(t)?t:Ni(t,!1,zs,gi,Si)}function Di(t){return Ni(t,!1,Js,Ri,yi)}function Ti(t){return Ni(t,!0,Ks,vi,bi)}function Ni(t,e,s,i,n){if(!Ve(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const r=n.get(t);if(r)return r;const o=Ei(t);if(0===o)return t;const a=new Proxy(t,2===o?i:s);return n.set(t,a),a}function Oi(t){return wi(t)?Oi(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function wi(t){return!(!t||!t["__v_isReadonly"])}function ki(t){return!(!t||!t["__v_isShallow"])}function Fi(t){return!!t&&!!t["__v_raw"]}function Mi(t){const e=t&&t["__v_raw"];return e?Mi(e):t}function xi(t){return Object.isExtensible(t)&&ss(t,"__v_skip",!0),t}const Li=t=>Ve(t)?Ii(t):t,Pi=t=>Ve(t)?Ti(t):t;class Bi{constructor(t,e,s,i){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this.effect=new ys((()=>t(this._value)),(()=>qi(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=s}get value(){const t=Mi(this);return t._cacheable&&!t.effect.dirty||!ts(t._value,t._value=t.effect.run())||qi(t,4),Gi(t),t.effect._dirtyLevel>=2&&qi(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Vi(t,e,s=!1){let i,n;const r=Le(t);r?(i=t,n=Ce):(i=t.get,n=t.set);const o=new Bi(i,n,r||!n,s);return o}function Gi(t){var e;Is&&gs&&(t=Mi(t),Fs(gs,null!=(e=t.dep)?e:t.dep=Ls((()=>t.dep=void 0),t instanceof Bi?t:void 0),void 0))}function qi(t,e=4,s,i){t=Mi(t);const n=t.dep;n&&xs(n,e,void 0)}function Xi(t){return!(!t||!0!==t.__v_isRef)}function Hi(t){return Yi(t,!1)}function Yi(t,e){return Xi(t)?t:new ji(t,e)}class ji{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Mi(t),this._value=e?t:Li(t)}get value(){return Gi(this),this._value}set value(t){const e=this.__v_isShallow||ki(t)||wi(t);if(t=e?t:Mi(t),ts(t,this._rawValue)){const s=this._rawValue;this._rawValue=t,this._value=e?t:Li(t),qi(this,4,t,s)}}}function Ui(t){return Xi(t)?t.value:t}const Wi={get:(t,e,s)=>Ui(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return Xi(n)&&!Xi(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Zi(t){return Oi(t)?t:new Proxy(t,Wi)}function $i(t,e,s,i){try{return i?t(...i):t()}catch(n){Ki(n,e,s)}}function zi(t,e,s,i){if(Le(t)){const n=$i(t,e,s,i);return n&&Ge(n)&&n.catch((t=>{Ki(t,e,s)})),n}if(ke(t)){const n=[];for(let r=0;r<t.length;r++)n.push(zi(t[r],e,s,i));return n}}function Ki(t,e,s,i=!0){const n=e?e.vnode:null;if(e){let i=e.parent;const n=e.proxy,r=`https://vuejs.org/error-reference/#runtime-${s}`;while(i){const e=i.ec;if(e)for(let s=0;s<e.length;s++)if(!1===e[s](t,n,r))return;i=i.parent}const o=e.appContext.config.errorHandler;if(o)return Ns(),$i(o,null,10,[t,n,r]),void Os()}Ji(t,s,n,i)}function Ji(t,e,s,i=!0){console.error(t)}let Qi=!1,tn=!1;const en=[];let sn=0;const nn=[];let rn=null,on=0;const an=Promise.resolve();let hn=null;function ln(t){const e=hn||an;return t?e.then(this?t.bind(this):t):e}function un(t){let e=sn+1,s=en.length;while(e<s){const i=e+s>>>1,n=en[i],r=gn(n);r<t||r===t&&n.pre?e=i+1:s=i}return e}function cn(t){en.length&&en.includes(t,Qi&&t.allowRecurse?sn+1:sn)||(null==t.id?en.push(t):en.splice(un(t.id),0,t),pn())}function pn(){Qi||tn||(tn=!0,hn=an.then(vn))}function dn(t){const e=en.indexOf(t);e>sn&&en.splice(e,1)}function fn(t){ke(t)?nn.push(...t):rn&&rn.includes(t,t.allowRecurse?on+1:on)||nn.push(t),pn()}function mn(t,e,s=(Qi?sn+1:0)){for(0;s<en.length;s++){const e=en[s];if(e&&e.pre){if(t&&e.id!==t.uid)continue;0,en.splice(s,1),s--,e()}}}function _n(t){if(nn.length){const t=[...new Set(nn)].sort(((t,e)=>gn(t)-gn(e)));if(nn.length=0,rn)return void rn.push(...t);for(rn=t,on=0;on<rn.length;on++){const t=rn[on];0,!1!==t.active&&t()}rn=null,on=0}}const gn=t=>null==t.id?1/0:t.id,Rn=(t,e)=>{const s=gn(t)-gn(e);if(0===s){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return s};function vn(t){tn=!1,Qi=!0,en.sort(Rn);try{for(sn=0;sn<en.length;sn++){const t=en[sn];t&&!1!==t.active&&$i(t,null,14)}}finally{sn=0,en.length=0,_n(t),Qi=!1,hn=null,(en.length||nn.length)&&vn(t)}}function Sn(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||be;let n=s;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const t=`${"modelValue"===o?"model":o}Modifiers`,{number:e,trim:r}=i[t]||be;r&&(n=s.map((t=>Pe(t)?t.trim():t))),e&&(n=s.map(is))}let a;let h=i[a=Qe(e)]||i[a=Qe($e(e))];!h&&r&&(h=i[a=Qe(Ke(e))]),h&&zi(h,t,6,n);const l=i[a+"Once"];if(l){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,zi(l,t,6,n)}}function yn(t,e,s=!1){const i=e.emitsCache,n=i.get(t);if(void 0!==n)return n;const r=t.emits;let o={},a=!1;if(!Le(t)){const i=t=>{const s=yn(t,e,!0);s&&(a=!0,Te(o,s))};!s&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return r||a?(ke(r)?r.forEach((t=>o[t]=null)):Te(o,r),Ve(t)&&i.set(t,o),o):(Ve(t)&&i.set(t,null),null)}function bn(t,e){return!(!t||!Ie(e))&&(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,Ke(e))||we(t,e))}let An=null,Cn=null;function En(t){const e=An;return An=t,Cn=t&&t.type.__scopeId||null,e}function In(t,e=An,s){if(!e)return t;if(t._n)return t;const i=(...s)=>{i._d&&zo(-1);const n=En(e);let r;try{r=t(...s)}finally{En(n),i._d&&zo(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Dn(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:h,render:l,renderCache:u,props:c,data:p,setupState:d,ctx:f,inheritAttrs:m}=t,_=En(t);let g,R;try{if(4&s.shapeFlag){const t=n||i,e=t;g=aa(l.call(e,t,u,c,d,p,f)),R=a}else{const t=e;0,g=aa(t.length>1?t(c,{attrs:a,slots:o,emit:h}):t(c,null)),R=e.props?a:Tn(a)}}catch(S){Wo.length=0,Ki(S,t,1),g=sa(jo)}let v=g;if(R&&!1!==m){const t=Object.keys(R),{shapeFlag:e}=v;t.length&&7&e&&(r&&t.some(De)&&(R=Nn(R,r)),v=ra(v,R,!1,!0))}return s.dirs&&(v=ra(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&(v.transition=s.transition),g=v,En(_),g}const Tn=t=>{let e;for(const s in t)("class"===s||"style"===s||Ie(s))&&((e||(e={}))[s]=t[s]);return e},Nn=(t,e)=>{const s={};for(const i in t)De(i)&&i.slice(9)in e||(s[i]=t[i]);return s};function On(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:a,patchFlag:h}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(s&&h>=0))return!(!n&&!a||a&&a.$stable)||i!==o&&(i?!o||wn(i,o,l):!!o);if(1024&h)return!0;if(16&h)return i?wn(i,o,l):!!o;if(8&h){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const s=t[e];if(o[s]!==i[s]&&!bn(l,s))return!0}}return!1}function wn(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!bn(s,r))return!0}return!1}function kn({vnode:t,parent:e},s){while(e){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i!==t)break;(t=e.vnode).el=s,e=e.parent}}const Fn=Symbol.for("v-ndc");const Mn=t=>t.__isSuspense;function xn(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):fn(t)}function Ln(t,e,s=ma,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...i)=>{Ns();const n=va(s),r=zi(e,s,t,i);return n(),Os(),r});return i?n.unshift(r):n.push(r),r}}const Pn=t=>(e,s=ma)=>{Ca&&"sp"!==t||Ln(t,((...t)=>e(...t)),s)},Bn=Pn("bm"),Vn=Pn("m"),Gn=Pn("bu"),qn=Pn("u"),Xn=Pn("bum"),Hn=Pn("um"),Yn=Pn("sp"),jn=Pn("rtg"),Un=Pn("rtc");function Wn(t,e=ma){Ln("ec",t,e)}function Zn(t,e){if(null===An)return t;const s=wa(An),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[t,r,o,a=be]=e[n];t&&(Le(t)&&(t={mounted:t,updated:t}),t.deep&&lo(r),i.push({dir:t,instance:s,value:r,oldValue:void 0,arg:o,modifiers:a}))}return t}function $n(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let h=a.dir[i];h&&(Ns(),zi(h,s,8,[t.el,a,t,e]),Os())}}
/*! #__NO_SIDE_EFFECTS__ */
function zn(t,e){return Le(t)?(()=>Te({name:t.name},e,{setup:t}))():t}const Kn=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const Jn=t=>t?ya(t)?wa(t):Jn(t.parent):null,Qn=Te(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Jn(t.parent),$root:t=>Jn(t.root),$emit:t=>t.emit,$options:t=>hr(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,cn(t.update)}),$nextTick:t=>t.n||(t.n=ln.bind(t.proxy)),$watch:t=>ao.bind(t)}),tr=(t,e)=>t!==be&&!t.__isScriptSetup&&we(t,e),er={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:a,appContext:h}=t;let l;if("$"!==e[0]){const a=o[e];if(void 0!==a)switch(a){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(tr(i,e))return o[e]=1,i[e];if(n!==be&&we(n,e))return o[e]=2,n[e];if((l=t.propsOptions[0])&&we(l,e))return o[e]=3,r[e];if(s!==be&&we(s,e))return o[e]=4,s[e];ir&&(o[e]=0)}}const u=Qn[e];let c,p;return u?("$attrs"===e&&Gs(t.attrs,"get",""),u(t)):(c=a.__cssModules)&&(c=c[e])?c:s!==be&&we(s,e)?(o[e]=4,s[e]):(p=h.config.globalProperties,we(p,e)?p[e]:void 0)},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return tr(n,e)?(n[e]=s,!0):i!==be&&we(i,e)?(i[e]=s,!0):!we(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(r[e]=s,!0))},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r}},o){let a;return!!s[o]||t!==be&&we(t,o)||tr(e,o)||(a=r[0])&&we(a,o)||we(i,o)||we(Qn,o)||we(n.config.globalProperties,o)},defineProperty(t,e,s){return null!=s.get?t._.accessCache[e]=0:we(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function sr(t){return ke(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let ir=!0;function nr(t){const e=hr(t),s=t.proxy,i=t.ctx;ir=!1,e.beforeCreate&&or(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:a,provide:h,inject:l,created:u,beforeMount:c,mounted:p,beforeUpdate:d,updated:f,activated:m,deactivated:_,beforeDestroy:g,beforeUnmount:R,destroyed:v,unmounted:S,render:y,renderTracked:b,renderTriggered:A,errorCaptured:C,serverPrefetch:E,expose:I,inheritAttrs:D,components:T,directives:N,filters:O}=e,w=null;if(l&&rr(l,i,w),o)for(const F in o){const t=o[F];Le(t)&&(i[F]=t.bind(s))}if(n){0;const e=n.call(s,s);0,Ve(e)&&(t.data=Ii(e))}if(ir=!0,r)for(const F in r){const t=r[F],e=Le(t)?t.bind(s,s):Le(t.get)?t.get.bind(s,s):Ce;0;const n=!Le(t)&&Le(t.set)?t.set.bind(s):Ce,o=Ma({get:e,set:n});Object.defineProperty(i,F,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t})}if(a)for(const F in a)ar(a[F],i,s,F);if(h){const t=Le(h)?h.call(s):h;Reflect.ownKeys(t).forEach((e=>{br(e,t[e])}))}function k(t,e){ke(e)?e.forEach((e=>t(e.bind(s)))):e&&t(e.bind(s))}if(u&&or(u,t,"c"),k(Bn,c),k(Vn,p),k(Gn,d),k(qn,f),k(po,m),k(fo,_),k(Wn,C),k(Un,b),k(jn,A),k(Xn,R),k(Hn,S),k(Yn,E),ke(I))if(I.length){const e=t.exposed||(t.exposed={});I.forEach((t=>{Object.defineProperty(e,t,{get:()=>s[t],set:e=>s[t]=e})}))}else t.exposed||(t.exposed={});y&&t.render===Ce&&(t.render=y),null!=D&&(t.inheritAttrs=D),T&&(t.components=T),N&&(t.directives=N)}function rr(t,e,s=Ce){ke(t)&&(t=dr(t));for(const i in t){const s=t[i];let n;n=Ve(s)?"default"in s?Ar(s.from||i,s.default,!0):Ar(s.from||i):Ar(s),Xi(n)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:t=>n.value=t}):e[i]=n}}function or(t,e,s){zi(ke(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,s)}function ar(t,e,s,i){const n=i.includes(".")?ho(s,i):()=>s[i];if(Pe(t)){const s=e[t];Le(s)&&ro(n,s)}else if(Le(t))ro(n,t.bind(s));else if(Ve(t))if(ke(t))t.forEach((t=>ar(t,e,s,i)));else{const i=Le(t.handler)?t.handler.bind(s):e[t.handler];Le(i)&&ro(n,i,t)}else 0}function hr(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let h;return a?h=a:n.length||s||i?(h={},n.length&&n.forEach((t=>lr(h,t,o,!0))),lr(h,e,o)):h=e,Ve(e)&&r.set(e,h),h}function lr(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&lr(t,r,s,!0),n&&n.forEach((e=>lr(t,e,s,!0)));for(const o in e)if(i&&"expose"===o);else{const i=ur[o]||s&&s[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const ur={data:cr,props:_r,emits:_r,methods:mr,computed:mr,beforeCreate:fr,created:fr,beforeMount:fr,mounted:fr,beforeUpdate:fr,updated:fr,beforeDestroy:fr,beforeUnmount:fr,destroyed:fr,unmounted:fr,activated:fr,deactivated:fr,errorCaptured:fr,serverPrefetch:fr,components:mr,directives:mr,watch:gr,provide:cr,inject:pr};function cr(t,e){return e?t?function(){return Te(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function pr(t,e){return mr(dr(t),dr(e))}function dr(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function fr(t,e){return t?[...new Set([].concat(t,e))]:e}function mr(t,e){return t?Te(Object.create(null),t,e):e}function _r(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:Te(Object.create(null),sr(t),sr(null!=e?e:{})):e}function gr(t,e){if(!t)return e;if(!e)return t;const s=Te(Object.create(null),t);for(const i in e)s[i]=fr(t[i],e[i]);return s}function Rr(){return{app:null,config:{isNativeTag:Ee,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vr=0;function Sr(t,e){return function(s,i=null){Le(s)||(s=Te({},s)),null==i||Ve(i)||(i=null);const n=Rr(),r=new WeakSet;let o=!1;const a=n.app={_uid:vr++,_component:s,_props:i,_container:null,_context:n,_instance:null,version:La,get config(){return n.config},set config(t){0},use(t,...e){return r.has(t)||(t&&Le(t.install)?(r.add(t),t.install(a,...e)):Le(t)&&(r.add(t),t(a,...e))),a},mixin(t){return n.mixins.includes(t)||n.mixins.push(t),a},component(t,e){return e?(n.components[t]=e,a):n.components[t]},directive(t,e){return e?(n.directives[t]=e,a):n.directives[t]},mount(r,h,l){if(!o){0;const u=sa(s,i);return u.appContext=n,!0===l?l="svg":!1===l&&(l=void 0),h&&e?e(u,r):t(u,r,l),o=!0,a._container=r,r.__vue_app__=a,wa(u.component)}},unmount(){o&&(t(null,a._container),delete a._container.__vue_app__)},provide(t,e){return n.provides[t]=e,a},runWithContext(t){const e=yr;yr=a;try{return t()}finally{yr=e}}};return a}}let yr=null;function br(t,e){if(ma){let s=ma.provides;const i=ma.parent&&ma.parent.provides;i===s&&(s=ma.provides=Object.create(i)),s[t]=e}else 0}function Ar(t,e,s=!1){const i=ma||An;if(i||yr){const n=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:yr._context.provides;if(n&&t in n)return n[t];if(arguments.length>1)return s&&Le(e)?e.call(i&&i.proxy):e}else 0}const Cr={},Er=()=>Object.create(Cr),Ir=t=>Object.getPrototypeOf(t)===Cr;function Dr(t,e,s,i=!1){const n={},r=Er();t.propsDefaults=Object.create(null),Nr(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:Di(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function Tr(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,a=Mi(n),[h]=t.propsOptions;let l=!1;if(!(i||o>0)||16&o){let i;Nr(t,e,n,r)&&(l=!0);for(const r in a)e&&(we(e,r)||(i=Ke(r))!==r&&we(e,i))||(h?!s||void 0===s[r]&&void 0===s[i]||(n[r]=Or(h,a,r,void 0,t,!0)):delete n[r]);if(r!==a)for(const t in r)e&&we(e,t)||(delete r[t],l=!0)}else if(8&o){const s=t.vnode.dynamicProps;for(let i=0;i<s.length;i++){let o=s[i];if(bn(t.emitsOptions,o))continue;const u=e[o];if(h)if(we(r,o))u!==r[o]&&(r[o]=u,l=!0);else{const e=$e(o);n[e]=Or(h,a,e,u,t,!1)}else u!==r[o]&&(r[o]=u,l=!0)}}l&&qs(t.attrs,"set","")}function Nr(t,e,s,i){const[n,r]=t.propsOptions;let o,a=!1;if(e)for(let h in e){if(Ue(h))continue;const l=e[h];let u;n&&we(n,u=$e(h))?r&&r.includes(u)?(o||(o={}))[u]=l:s[u]=l:bn(t.emitsOptions,h)||h in i&&l===i[h]||(i[h]=l,a=!0)}if(r){const e=Mi(s),i=o||be;for(let o=0;o<r.length;o++){const a=r[o];s[a]=Or(n,e,a,i[a],t,!we(i,a))}}return a}function Or(t,e,s,i,n,r){const o=t[s];if(null!=o){const t=we(o,"default");if(t&&void 0===i){const t=o.default;if(o.type!==Function&&!o.skipFactory&&Le(t)){const{propsDefaults:r}=n;if(s in r)i=r[s];else{const o=va(n);i=r[s]=t.call(null,e),o()}}else i=t}o[0]&&(r&&!t?i=!1:!o[1]||""!==i&&i!==Ke(s)||(i=!0))}return i}function wr(t,e,s=!1){const i=e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},a=[];let h=!1;if(!Le(t)){const i=t=>{h=!0;const[s,i]=wr(t,e,!0);Te(o,s),i&&a.push(...i)};!s&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!r&&!h)return Ve(t)&&i.set(t,Ae),Ae;if(ke(r))for(let u=0;u<r.length;u++){0;const t=$e(r[u]);kr(t)&&(o[t]=be)}else if(r){0;for(const t in r){const e=$e(t);if(kr(e)){const s=r[t],i=o[e]=ke(s)||Le(s)?{type:s}:Te({},s);if(i){const t=xr(Boolean,i.type),s=xr(String,i.type);i[0]=t>-1,i[1]=s<0||t<s,(t>-1||we(i,"default"))&&a.push(e)}}}}const l=[o,a];return Ve(t)&&i.set(t,l),l}function kr(t){return"$"!==t[0]&&!Ue(t)}function Fr(t){if(null===t)return"null";if("function"===typeof t)return t.name||"";if("object"===typeof t){const e=t.constructor&&t.constructor.name;return e||""}return""}function Mr(t,e){return Fr(t)===Fr(e)}function xr(t,e){return ke(e)?e.findIndex((e=>Mr(e,t))):Le(e)&&Mr(e,t)?0:-1}const Lr=t=>"_"===t[0]||"$stable"===t,Pr=t=>ke(t)?t.map(aa):[aa(t)],Br=(t,e,s)=>{if(e._n)return e;const i=In(((...t)=>Pr(e(...t))),s);return i._c=!1,i},Vr=(t,e,s)=>{const i=t._ctx;for(const n in t){if(Lr(n))continue;const s=t[n];if(Le(s))e[n]=Br(n,s,i);else if(null!=s){0;const t=Pr(s);e[n]=()=>t}}},Gr=(t,e)=>{const s=Pr(e);t.slots.default=()=>s},qr=(t,e)=>{const s=t.slots=Er();if(32&t.vnode.shapeFlag){const t=e._;t?(Te(s,e),ss(s,"_",t,!0)):Vr(e,s)}else e&&Gr(t,e)},Xr=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=be;if(32&i.shapeFlag){const t=e._;t?s&&1===t?r=!1:(Te(n,e),s||1!==t||delete n._):(r=!e.$stable,Vr(e,n)),o=e}else e&&(Gr(t,e),o={default:1});if(r)for(const a in n)Lr(a)||null!=o[a]||delete n[a]};function Hr(t,e,s,i,n=!1){if(ke(t))return void t.forEach(((t,r)=>Hr(t,e&&(ke(e)?e[r]:e),s,i,n)));if(Kn(i)&&!n)return;const r=4&i.shapeFlag?wa(i.component):i.el,o=n?null:r,{i:a,r:h}=t;const l=e&&e.r,u=a.refs===be?a.refs={}:a.refs,c=a.setupState;if(null!=l&&l!==h&&(Pe(l)?(u[l]=null,we(c,l)&&(c[l]=null)):Xi(l)&&(l.value=null)),Le(h))$i(h,a,12,[o,u]);else{const e=Pe(h),i=Xi(h);if(e||i){const a=()=>{if(t.f){const s=e?we(c,h)?c[h]:u[h]:h.value;n?ke(s)&&Ne(s,r):ke(s)?s.includes(r)||s.push(r):e?(u[h]=[r],we(c,h)&&(c[h]=u[h])):(h.value=[r],t.k&&(u[t.k]=h.value))}else e?(u[h]=o,we(c,h)&&(c[h]=o)):i&&(h.value=o,t.k&&(u[t.k]=o))};o?(a.id=-1,jr(a,s)):a()}else 0}}function Yr(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&(os().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const jr=xn;function Ur(t){return Wr(t)}function Wr(t,e){Yr();const s=os();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:a,createComment:h,setText:l,setElementText:u,parentNode:c,nextSibling:p,setScopeId:d=Ce,insertStaticContent:f}=t,m=(t,e,s,i=null,n=null,r=null,o=void 0,a=null,h=!!e.dynamicChildren)=>{if(t===e)return;t&&!Jo(t,e)&&(i=H(t),B(t,n,r,!0),t=null),-2===e.patchFlag&&(h=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:c}=e;switch(l){case Yo:_(t,e,s,i);break;case jo:g(t,e,s,i);break;case Uo:null==t&&R(e,s,i,o);break;case Ho:T(t,e,s,i,n,r,o,a,h);break;default:1&c?y(t,e,s,i,n,r,o,a,h):6&c?N(t,e,s,i,n,r,o,a,h):(64&c||128&c)&&l.process(t,e,s,i,n,r,o,a,h,U)}null!=u&&n&&Hr(u,t&&t.ref,r,e||t,!e)},_=(t,e,s,n)=>{if(null==t)i(e.el=a(e.children),s,n);else{const s=e.el=t.el;e.children!==t.children&&l(s,e.children)}},g=(t,e,s,n)=>{null==t?i(e.el=h(e.children||""),s,n):e.el=t.el},R=(t,e,s,i)=>{[t.el,t.anchor]=f(t.children,e,s,i,t.el,t.anchor)},v=({el:t,anchor:e},s,n)=>{let r;while(t&&t!==e)r=p(t),i(t,s,n),t=r;i(e,s,n)},S=({el:t,anchor:e})=>{let s;while(t&&t!==e)s=p(t),n(t),t=s;n(e)},y=(t,e,s,i,n,r,o,a,h)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?b(e,s,i,n,r,o,a,h):E(t,e,n,r,o,a,h)},b=(t,e,s,n,a,h,l,c)=>{let p,d;const{props:f,shapeFlag:m,transition:_,dirs:g}=t;if(p=t.el=o(t.type,h,f&&f.is,f),8&m?u(p,t.children):16&m&&C(t.children,p,null,n,a,Zr(t,h),l,c),g&&$n(t,null,n,"created"),A(p,t,t.scopeId,l,n),f){for(const e in f)"value"===e||Ue(e)||r(p,e,null,f[e],h,t.children,n,a,X);"value"in f&&r(p,"value",null,f.value,h),(d=f.onVnodeBeforeMount)&&ca(d,n,t)}g&&$n(t,null,n,"beforeMount");const R=zr(a,_);R&&_.beforeEnter(p),i(p,e,s),((d=f&&f.onVnodeMounted)||R||g)&&jr((()=>{d&&ca(d,n,t),R&&_.enter(p),g&&$n(t,null,n,"mounted")}),a)},A=(t,e,s,i,n)=>{if(s&&d(t,s),i)for(let r=0;r<i.length;r++)d(t,i[r]);if(n){let s=n.subTree;if(e===s){const e=n.vnode;A(t,e,e.scopeId,e.slotScopeIds,n.parent)}}},C=(t,e,s,i,n,r,o,a,h=0)=>{for(let l=h;l<t.length;l++){const h=t[l]=a?ha(t[l]):aa(t[l]);m(null,h,e,s,i,n,r,o,a)}},E=(t,e,s,i,n,o,a)=>{const h=e.el=t.el;let{patchFlag:l,dynamicChildren:c,dirs:p}=e;l|=16&t.patchFlag;const d=t.props||be,f=e.props||be;let m;if(s&&$r(s,!1),(m=f.onVnodeBeforeUpdate)&&ca(m,s,e,t),p&&$n(e,t,s,"beforeUpdate"),s&&$r(s,!0),c?I(t.dynamicChildren,c,h,s,i,Zr(e,n),o):a||M(t,e,h,null,s,i,Zr(e,n),o,!1),l>0){if(16&l)D(h,e,d,f,s,i,n);else if(2&l&&d.class!==f.class&&r(h,"class",null,f.class,n),4&l&&r(h,"style",d.style,f.style,n),8&l){const o=e.dynamicProps;for(let e=0;e<o.length;e++){const a=o[e],l=d[a],u=f[a];u===l&&"value"!==a||r(h,a,l,u,n,t.children,s,i,X)}}1&l&&t.children!==e.children&&u(h,e.children)}else a||null!=c||D(h,e,d,f,s,i,n);((m=f.onVnodeUpdated)||p)&&jr((()=>{m&&ca(m,s,e,t),p&&$n(e,t,s,"updated")}),i)},I=(t,e,s,i,n,r,o)=>{for(let a=0;a<e.length;a++){const h=t[a],l=e[a],u=h.el&&(h.type===Ho||!Jo(h,l)||70&h.shapeFlag)?c(h.el):s;m(h,l,u,null,i,n,r,o,!0)}},D=(t,e,s,i,n,o,a)=>{if(s!==i){if(s!==be)for(const h in s)Ue(h)||h in i||r(t,h,s[h],null,a,e.children,n,o,X);for(const h in i){if(Ue(h))continue;const l=i[h],u=s[h];l!==u&&"value"!==h&&r(t,h,u,l,a,e.children,n,o,X)}"value"in i&&r(t,"value",s.value,i.value,a)}},T=(t,e,s,n,r,o,h,l,u)=>{const c=e.el=t?t.el:a(""),p=e.anchor=t?t.anchor:a("");let{patchFlag:d,dynamicChildren:f,slotScopeIds:m}=e;m&&(l=l?l.concat(m):m),null==t?(i(c,s,n),i(p,s,n),C(e.children||[],s,p,r,o,h,l,u)):d>0&&64&d&&f&&t.dynamicChildren?(I(t.dynamicChildren,f,s,r,o,h,l),(null!=e.key||r&&e===r.subTree)&&Kr(t,e,!0)):M(t,e,s,p,r,o,h,l,u)},N=(t,e,s,i,n,r,o,a,h)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?n.ctx.activate(e,s,i,o,h):O(e,s,i,n,r,o,h):w(t,e,h)},O=(t,e,s,i,n,r,o)=>{const a=t.component=fa(t,i,n);if(uo(t)&&(a.ctx.renderer=U),Ea(a),a.asyncDep){if(n&&n.registerDep(a,k,o),!t.el){const t=a.subTree=sa(jo);g(null,t,e,s)}}else k(a,t,e,s,n,r,o)},w=(t,e,s)=>{const i=e.component=t.component;if(On(t,e,s)){if(i.asyncDep&&!i.asyncResolved)return void F(i,e,s);i.next=e,dn(i.update),i.effect.dirty=!0,i.update()}else e.el=t.el,i.vnode=e},k=(t,e,s,i,n,r,o)=>{const a=()=>{if(t.isMounted){let{next:e,bu:s,u:i,parent:h,vnode:l}=t;{const s=Qr(t);if(s)return e&&(e.el=l.el,F(t,e,o)),void s.asyncDep.then((()=>{t.isUnmounted||a()}))}let u,p=e;0,$r(t,!1),e?(e.el=l.el,F(t,e,o)):e=l,s&&es(s),(u=e.props&&e.props.onVnodeBeforeUpdate)&&ca(u,h,e,l),$r(t,!0);const d=Dn(t);0;const f=t.subTree;t.subTree=d,m(f,d,c(f.el),H(f),t,n,r),e.el=d.el,null===p&&kn(t,d.el),i&&jr(i,n),(u=e.props&&e.props.onVnodeUpdated)&&jr((()=>ca(u,h,e,l)),n)}else{let o;const{el:a,props:h}=e,{bm:l,m:u,parent:c}=t,p=Kn(e);if($r(t,!1),l&&es(l),!p&&(o=h&&h.onVnodeBeforeMount)&&ca(o,c,e),$r(t,!0),a&&Z){const s=()=>{t.subTree=Dn(t),Z(a,t.subTree,t,n,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&s())):s()}else{0;const o=t.subTree=Dn(t);0,m(null,o,s,i,t,n,r),e.el=o.el}if(u&&jr(u,n),!p&&(o=h&&h.onVnodeMounted)){const t=e;jr((()=>ca(o,c,t)),n)}(256&e.shapeFlag||c&&Kn(c.vnode)&&256&c.vnode.shapeFlag)&&t.a&&jr(t.a,n),t.isMounted=!0,e=s=i=null}},h=t.effect=new ys(a,Ce,(()=>cn(l)),t.scope),l=t.update=()=>{h.dirty&&h.run()};l.id=t.uid,$r(t,!0),l()},F=(t,e,s)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,Tr(t,e.props,i,s),Xr(t,e.children,s),Ns(),mn(t),Os()},M=(t,e,s,i,n,r,o,a,h=!1)=>{const l=t&&t.children,c=t?t.shapeFlag:0,p=e.children,{patchFlag:d,shapeFlag:f}=e;if(d>0){if(128&d)return void L(l,p,s,i,n,r,o,a,h);if(256&d)return void x(l,p,s,i,n,r,o,a,h)}8&f?(16&c&&X(l,n,r),p!==l&&u(s,p)):16&c?16&f?L(l,p,s,i,n,r,o,a,h):X(l,n,r,!0):(8&c&&u(s,""),16&f&&C(p,s,i,n,r,o,a,h))},x=(t,e,s,i,n,r,o,a,h)=>{t=t||Ae,e=e||Ae;const l=t.length,u=e.length,c=Math.min(l,u);let p;for(p=0;p<c;p++){const i=e[p]=h?ha(e[p]):aa(e[p]);m(t[p],i,s,null,n,r,o,a,h)}l>u?X(t,n,r,!0,!1,c):C(e,s,i,n,r,o,a,h,c)},L=(t,e,s,i,n,r,o,a,h)=>{let l=0;const u=e.length;let c=t.length-1,p=u-1;while(l<=c&&l<=p){const i=t[l],u=e[l]=h?ha(e[l]):aa(e[l]);if(!Jo(i,u))break;m(i,u,s,null,n,r,o,a,h),l++}while(l<=c&&l<=p){const i=t[c],l=e[p]=h?ha(e[p]):aa(e[p]);if(!Jo(i,l))break;m(i,l,s,null,n,r,o,a,h),c--,p--}if(l>c){if(l<=p){const t=p+1,c=t<u?e[t].el:i;while(l<=p)m(null,e[l]=h?ha(e[l]):aa(e[l]),s,c,n,r,o,a,h),l++}}else if(l>p)while(l<=c)B(t[l],n,r,!0),l++;else{const d=l,f=l,_=new Map;for(l=f;l<=p;l++){const t=e[l]=h?ha(e[l]):aa(e[l]);null!=t.key&&_.set(t.key,l)}let g,R=0;const v=p-f+1;let S=!1,y=0;const b=new Array(v);for(l=0;l<v;l++)b[l]=0;for(l=d;l<=c;l++){const i=t[l];if(R>=v){B(i,n,r,!0);continue}let u;if(null!=i.key)u=_.get(i.key);else for(g=f;g<=p;g++)if(0===b[g-f]&&Jo(i,e[g])){u=g;break}void 0===u?B(i,n,r,!0):(b[u-f]=l+1,u>=y?y=u:S=!0,m(i,e[u],s,null,n,r,o,a,h),R++)}const A=S?Jr(b):Ae;for(g=A.length-1,l=v-1;l>=0;l--){const t=f+l,c=e[t],p=t+1<u?e[t+1].el:i;0===b[l]?m(null,c,s,p,n,r,o,a,h):S&&(g<0||l!==A[g]?P(c,s,p,2):g--)}}},P=(t,e,s,n,r=null)=>{const{el:o,type:a,transition:h,children:l,shapeFlag:u}=t;if(6&u)return void P(t.component.subTree,e,s,n);if(128&u)return void t.suspense.move(e,s,n);if(64&u)return void a.move(t,e,s,U);if(a===Ho){i(o,e,s);for(let t=0;t<l.length;t++)P(l[t],e,s,n);return void i(t.anchor,e,s)}if(a===Uo)return void v(t,e,s);const c=2!==n&&1&u&&h;if(c)if(0===n)h.beforeEnter(o),i(o,e,s),jr((()=>h.enter(o)),r);else{const{leave:t,delayLeave:n,afterLeave:r}=h,a=()=>i(o,e,s),l=()=>{t(o,(()=>{a(),r&&r()}))};n?n(o,a,l):l()}else i(o,e,s)},B=(t,e,s,i=!1,n=!1)=>{const{type:r,props:o,ref:a,children:h,dynamicChildren:l,shapeFlag:u,patchFlag:c,dirs:p,memoIndex:d}=t;if(-2===c&&(n=!1),null!=a&&Hr(a,null,s,t,!0),null!=d&&(e.renderCache[d]=void 0),256&u)return void e.ctx.deactivate(t);const f=1&u&&p,m=!Kn(t);let _;if(m&&(_=o&&o.onVnodeBeforeUnmount)&&ca(_,e,t),6&u)q(t.component,s,i);else{if(128&u)return void t.suspense.unmount(s,i);f&&$n(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,s,U,i):l&&(r!==Ho||c>0&&64&c)?X(l,e,s,!1,!0):(r===Ho&&384&c||!n&&16&u)&&X(h,e,s),i&&V(t)}(m&&(_=o&&o.onVnodeUnmounted)||f)&&jr((()=>{_&&ca(_,e,t),f&&$n(t,null,e,"unmounted")}),s)},V=t=>{const{type:e,el:s,anchor:i,transition:r}=t;if(e===Ho)return void G(s,i);if(e===Uo)return void S(t);const o=()=>{n(s),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:i}=r,n=()=>e(s,o);i?i(t.el,o,n):n()}else o()},G=(t,e)=>{let s;while(t!==e)s=p(t),n(t),t=s;n(e)},q=(t,e,s)=>{const{bum:i,scope:n,update:r,subTree:o,um:a,m:h,a:l}=t;to(h),to(l),i&&es(i),n.stop(),r&&(r.active=!1,B(o,t,e,s)),a&&jr(a,e),jr((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},X=(t,e,s,i=!1,n=!1,r=0)=>{for(let o=r;o<t.length;o++)B(t[o],e,s,i,n)},H=t=>6&t.shapeFlag?H(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el);let Y=!1;const j=(t,e,s)=>{null==t?e._vnode&&B(e._vnode,null,null,!0):m(e._vnode||null,t,e,null,null,null,s),Y||(Y=!0,mn(),_n(),Y=!1),e._vnode=t},U={p:m,um:B,m:P,r:V,mt:O,mc:C,pc:M,pbc:I,n:H,o:t};let W,Z;return e&&([W,Z]=e(U)),{render:j,hydrate:W,createApp:Sr(j,W)}}function Zr({type:t,props:e},s){return"svg"===s&&"foreignObject"===t||"mathml"===s&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function $r({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function zr(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Kr(t,e,s=!1){const i=t.children,n=e.children;if(ke(i)&&ke(n))for(let r=0;r<i.length;r++){const t=i[r];let e=n[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=n[r]=ha(n[r]),e.el=t.el),s||-2===e.patchFlag||Kr(t,e)),e.type===Yo&&(e.el=t.el)}}function Jr(t){const e=t.slice(),s=[0];let i,n,r,o,a;const h=t.length;for(i=0;i<h;i++){const h=t[i];if(0!==h){if(n=s[s.length-1],t[n]<h){e[i]=n,s.push(i);continue}r=0,o=s.length-1;while(r<o)a=r+o>>1,t[s[a]]<h?r=a+1:o=a;h<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}r=s.length,o=s[r-1];while(r-- >0)s[r]=o,o=e[o];return s}function Qr(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Qr(e)}function to(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const eo=Symbol.for("v-scx"),so=()=>{{const t=Ar(eo);return t}};function io(t,e){return oo(t,null,e)}const no={};function ro(t,e,s){return oo(t,e,s)}function oo(t,e,{immediate:s,deep:i,flush:n,once:r,onTrack:o,onTrigger:a}=be){if(e&&r){const t=e;e=(...e)=>{t(...e),y()}}const h=ma,l=t=>!0===i?t:lo(t,!1===i?1:void 0);let u,c,p=!1,d=!1;if(Xi(t)?(u=()=>t.value,p=ki(t)):Oi(t)?(u=()=>l(t),p=!0):ke(t)?(d=!0,p=t.some((t=>Oi(t)||ki(t))),u=()=>t.map((t=>Xi(t)?t.value:Oi(t)?l(t):Le(t)?$i(t,h,2):void 0))):u=Le(t)?e?()=>$i(t,h,2):()=>(c&&c(),zi(t,h,3,[m])):Ce,e&&i){const t=u;u=()=>lo(t())}let f,m=t=>{c=v.onStop=()=>{$i(t,h,4),c=v.onStop=void 0}};if(Ca){if(m=Ce,e?s&&zi(e,h,3,[u(),d?[]:void 0,m]):u(),"sync"!==n)return Ce;{const t=so();f=t.__watcherHandles||(t.__watcherHandles=[])}}let _=d?new Array(t.length).fill(no):no;const g=()=>{if(v.active&&v.dirty)if(e){const t=v.run();(i||p||(d?t.some(((t,e)=>ts(t,_[e]))):ts(t,_)))&&(c&&c(),zi(e,h,3,[t,_===no?void 0:d&&_[0]===no?[]:_,m]),_=t)}else v.run()};let R;g.allowRecurse=!!e,"sync"===n?R=g:"post"===n?R=()=>jr(g,h&&h.suspense):(g.pre=!0,h&&(g.id=h.uid),R=()=>cn(g));const v=new ys(u,Ce,R),S=Ss(),y=()=>{v.stop(),S&&Ne(S.effects,v)};return e?s?g():_=v.run():"post"===n?jr(v.run.bind(v),h&&h.suspense):v.run(),f&&f.push(y),y}function ao(t,e,s){const i=this.proxy,n=Pe(t)?t.includes(".")?ho(i,t):()=>i[t]:t.bind(i,i);let r;Le(e)?r=e:(r=e.handler,s=e);const o=va(this),a=oo(n,r.bind(i),s);return o(),a}function ho(t,e){const s=e.split(".");return()=>{let e=t;for(let t=0;t<s.length&&e;t++)e=e[s[t]];return e}}function lo(t,e=1/0,s){if(e<=0||!Ve(t)||t["__v_skip"])return t;if(s=s||new Set,s.has(t))return t;if(s.add(t),e--,Xi(t))lo(t.value,e,s);else if(ke(t))for(let i=0;i<t.length;i++)lo(t[i],e,s);else if(Me(t)||Fe(t))t.forEach((t=>{lo(t,e,s)}));else if(Ye(t)){for(const i in t)lo(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&lo(t[i],e,s)}return t}const uo=t=>t.type.__isKeepAlive;RegExp,RegExp;function co(t,e){return ke(t)?t.some((t=>co(t,e))):Pe(t)?t.split(",").includes(e):!!xe(t)&&t.test(e)}function po(t,e){mo(t,"a",e)}function fo(t,e){mo(t,"da",e)}function mo(t,e,s=ma){const i=t.__wdc||(t.__wdc=()=>{let e=s;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Ln(e,i,s),s){let t=s.parent;while(t&&t.parent)uo(t.parent.vnode)&&_o(i,e,s,t),t=t.parent}}function _o(t,e,s,i){const n=Ln(e,t,i,!0);Hn((()=>{Ne(i[e],n)}),s)}function go(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ro(t){return 128&t.shapeFlag?t.ssContent:t}const vo=Symbol("_leaveCb"),So=Symbol("_enterCb");function yo(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Vn((()=>{t.isMounted=!0})),Xn((()=>{t.isUnmounting=!0})),t}const bo=[Function,Array],Ao={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bo,onEnter:bo,onAfterEnter:bo,onEnterCancelled:bo,onBeforeLeave:bo,onLeave:bo,onAfterLeave:bo,onLeaveCancelled:bo,onBeforeAppear:bo,onAppear:bo,onAfterAppear:bo,onAppearCancelled:bo},Co=t=>{const e=t.subTree;return e.component?Co(e.component):e},Eo={name:"BaseTransition",props:Ao,setup(t,{slots:e}){const s=_a(),i=yo();return()=>{const n=e.default&&ko(e.default(),!0);if(!n||!n.length)return;let r=n[0];if(n.length>1){let t=!1;for(const e of n)if(e.type!==jo){0,r=e,t=!0;break}}const o=Mi(t),{mode:a}=o;if(i.isLeaving)return No(r);const h=Oo(r);if(!h)return No(r);let l=To(h,o,i,s,(t=>l=t));wo(h,l);const u=s.subTree,c=u&&Oo(u);if(c&&c.type!==jo&&!Jo(h,c)&&Co(s).type!==jo){const t=To(c,o,i,s);if(wo(c,t),"out-in"===a&&h.type!==jo)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==s.update.active&&(s.effect.dirty=!0,s.update())},No(r);"in-out"===a&&h.type!==jo&&(t.delayLeave=(t,e,s)=>{const n=Do(i,c);n[String(c.key)]=c,t[vo]=()=>{e(),t[vo]=void 0,delete l.delayedLeave},l.delayedLeave=s})}return r}}},Io=Eo;function Do(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function To(t,e,s,i,n){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:h,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:p,onLeave:d,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:_,onAppear:g,onAfterAppear:R,onAppearCancelled:v}=e,S=String(t.key),y=Do(s,t),b=(t,e)=>{t&&zi(t,i,9,e)},A=(t,e)=>{const s=e[1];b(t,e),ke(t)?t.every((t=>t.length<=1))&&s():t.length<=1&&s()},C={mode:o,persisted:a,beforeEnter(e){let i=h;if(!s.isMounted){if(!r)return;i=_||h}e[vo]&&e[vo](!0);const n=y[S];n&&Jo(t,n)&&n.el[vo]&&n.el[vo](),b(i,[e])},enter(t){let e=l,i=u,n=c;if(!s.isMounted){if(!r)return;e=g||l,i=R||u,n=v||c}let o=!1;const a=t[So]=e=>{o||(o=!0,b(e?n:i,[t]),C.delayedLeave&&C.delayedLeave(),t[So]=void 0)};e?A(e,[t,a]):a()},leave(e,i){const n=String(t.key);if(e[So]&&e[So](!0),s.isUnmounting)return i();b(p,[e]);let r=!1;const o=e[vo]=s=>{r||(r=!0,i(),b(s?m:f,[e]),e[vo]=void 0,y[n]===t&&delete y[n])};y[n]=t,d?A(d,[e,o]):o()},clone(t){const r=To(t,e,s,i,n);return n&&n(r),r}};return C}function No(t){if(uo(t))return t=ra(t),t.children=null,t}function Oo(t){if(!uo(t))return t;const{shapeFlag:e,children:s}=t;if(s){if(16&e)return s[0];if(32&e&&Le(s.default))return s.default()}}function wo(t,e){6&t.shapeFlag&&t.component?wo(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ko(t,e=!1,s){let i=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const a=null==s?o.key:String(s)+String(null!=o.key?o.key:r);o.type===Ho?(128&o.patchFlag&&n++,i=i.concat(ko(o.children,e,a))):(e||o.type!==jo)&&i.push(null!=a?ra(o,{key:a}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}const Fo=t=>t.__isTeleport,Mo=t=>t&&(t.disabled||""===t.disabled),xo=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,Lo=t=>"function"===typeof MathMLElement&&t instanceof MathMLElement,Po=(t,e)=>{const s=t&&t.to;if(Pe(s)){if(e){const t=e(s);return t}return null}return s},Bo={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,r,o,a,h,l){const{mc:u,pc:c,pbc:p,o:{insert:d,querySelector:f,createText:m,createComment:_}}=l,g=Mo(e.props);let{shapeFlag:R,children:v,dynamicChildren:S}=e;if(null==t){const t=e.el=m(""),l=e.anchor=m("");d(t,s,i),d(l,s,i);const c=e.target=Po(e.props,f),p=e.targetAnchor=m("");c&&(d(p,c),"svg"===o||xo(c)?o="svg":("mathml"===o||Lo(c))&&(o="mathml"));const _=(t,e)=>{16&R&&u(v,t,e,n,r,o,a,h)};g?_(s,l):c&&_(c,p)}else{e.el=t.el;const i=e.anchor=t.anchor,u=e.target=t.target,d=e.targetAnchor=t.targetAnchor,m=Mo(t.props),_=m?s:u,R=m?i:d;if("svg"===o||xo(u)?o="svg":("mathml"===o||Lo(u))&&(o="mathml"),S?(p(t.dynamicChildren,S,_,n,r,o,a),Kr(t,e,!0)):h||c(t,e,_,R,n,r,o,a,!1),g)m?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Vo(e,s,i,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=Po(e.props,f);t&&Vo(e,t,null,l,0)}else m&&Vo(e,u,d,l,1)}Xo(e)},remove(t,e,s,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:a,anchor:h,targetAnchor:l,target:u,props:c}=t;if(u&&n(l),r&&n(h),16&o){const t=r||!Mo(c);for(let n=0;n<a.length;n++){const r=a[n];i(r,e,s,t,!!r.dynamicChildren)}}},move:Vo,hydrate:Go};function Vo(t,e,s,{o:{insert:i},m:n},r=2){0===r&&i(t.targetAnchor,e,s);const{el:o,anchor:a,shapeFlag:h,children:l,props:u}=t,c=2===r;if(c&&i(o,e,s),(!c||Mo(u))&&16&h)for(let p=0;p<l.length;p++)n(l[p],e,s,2);c&&i(a,e,s)}function Go(t,e,s,i,n,r,{o:{nextSibling:o,parentNode:a,querySelector:h}},l){const u=e.target=Po(e.props,h);if(u){const h=u._lpa||u.firstChild;if(16&e.shapeFlag)if(Mo(e.props))e.anchor=l(o(t),e,a(t),s,i,n,r),e.targetAnchor=h;else{e.anchor=o(t);let a=h;while(a)if(a=o(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}l(h,e,u,s,i,n,r)}Xo(e)}return e.anchor&&o(e.anchor)}const qo=Bo;function Xo(t){const e=t.ctx;if(e&&e.ut){let s=t.children[0].el;while(s&&s!==t.targetAnchor)1===s.nodeType&&s.setAttribute("data-v-owner",e.uid),s=s.nextSibling;e.ut()}}const Ho=Symbol.for("v-fgt"),Yo=Symbol.for("v-txt"),jo=Symbol.for("v-cmt"),Uo=Symbol.for("v-stc"),Wo=[];let Zo=null;let $o=1;function zo(t){$o+=t}function Ko(t){return!!t&&!0===t.__v_isVNode}function Jo(t,e){return t.type===e.type&&t.key===e.key}const Qo=({key:t})=>null!=t?t:null,ta=({ref:t,ref_key:e,ref_for:s})=>("number"===typeof t&&(t=""+t),null!=t?Pe(t)||Xi(t)||Le(t)?{i:An,r:t,k:e,f:!!s}:t:null);function ea(t,e=null,s=null,i=0,n=null,r=(t===Ho?0:1),o=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Qo(e),ref:e&&ta(e),scopeId:Cn,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:An};return a?(la(h,s),128&r&&t.normalize(h)):s&&(h.shapeFlag|=Pe(s)?8:16),$o>0&&!o&&Zo&&(h.patchFlag>0||6&r)&&32!==h.patchFlag&&Zo.push(h),h}const sa=ia;function ia(t,e=null,s=null,i=0,n=null,r=!1){if(t&&t!==Fn||(t=jo),Ko(t)){const i=ra(t,e,!0);return s&&la(i,s),$o>0&&!r&&Zo&&(6&i.shapeFlag?Zo[Zo.indexOf(t)]=i:Zo.push(i)),i.patchFlag=-2,i}if(Fa(t)&&(t=t.__vccOpts),e){e=na(e);let{class:t,style:s}=e;t&&!Pe(t)&&(e.class=ps(t)),Ve(s)&&(Fi(s)&&!ke(s)&&(s=Te({},s)),e.style=as(s))}const o=Pe(t)?1:Mn(t)?128:Fo(t)?64:Ve(t)?4:Le(t)?2:0;return ea(t,e,s,i,n,o,r,!0)}function na(t){return t?Fi(t)||Ir(t)?Te({},t):t:null}function ra(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:h}=t,l=e?ua(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Qo(l),ref:e&&e.ref?s&&r?ke(r)?r.concat(ta(e)):[r,ta(e)]:ta(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ho?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ra(t.ssContent),ssFallback:t.ssFallback&&ra(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&i&&wo(u,h.clone(u)),u}function oa(t=" ",e=0){return sa(Yo,null,t,e)}function aa(t){return null==t||"boolean"===typeof t?sa(jo):ke(t)?sa(Ho,null,t.slice()):"object"===typeof t?ha(t):sa(Yo,null,String(t))}function ha(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:ra(t)}function la(t,e){let s=0;const{shapeFlag:i}=t;if(null==e)e=null;else if(ke(e))s=16;else if("object"===typeof e){if(65&i){const s=e.default;return void(s&&(s._c&&(s._d=!1),la(t,s()),s._c&&(s._d=!0)))}{s=32;const i=e._;i||Ir(e)?3===i&&An&&(1===An.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=An}}else Le(e)?(e={default:e,_ctx:An},s=32):(e=String(e),64&i?(s=16,e=[oa(e)]):s=8);t.children=e,t.shapeFlag|=s}function ua(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=ps([e.class,i.class]));else if("style"===t)e.style=as([e.style,i.style]);else if(Ie(t)){const s=e[t],n=i[t];!n||s===n||ke(s)&&s.includes(n)||(e[t]=s?[].concat(s,n):n)}else""!==t&&(e[t]=i[t])}return e}function ca(t,e,s,i=null){zi(t,e,7,[s,i])}const pa=Rr();let da=0;function fa(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||pa,r={uid:da++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wr(i,n),emitsOptions:yn(i,n),emit:null,emitted:null,propsDefaults:be,inheritAttrs:i.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Sn.bind(null,r),t.ce&&t.ce(r),r}let ma=null;const _a=()=>ma||An;let ga,Ra;{const t=os(),e=(e,s)=>{let i;return(i=t[e])||(i=t[e]=[]),i.push(s),t=>{i.length>1?i.forEach((e=>e(t))):i[0](t)}};ga=e("__VUE_INSTANCE_SETTERS__",(t=>ma=t)),Ra=e("__VUE_SSR_SETTERS__",(t=>Ca=t))}const va=t=>{const e=ma;return ga(t),t.scope.on(),()=>{t.scope.off(),ga(e)}},Sa=()=>{ma&&ma.scope.off(),ga(null)};function ya(t){return 4&t.vnode.shapeFlag}let ba,Aa,Ca=!1;function Ea(t,e=!1){e&&Ra(e);const{props:s,children:i}=t.vnode,n=ya(t);Dr(t,s,n,e),qr(t,i);const r=n?Ia(t,e):void 0;return e&&Ra(!1),r}function Ia(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,er);const{setup:i}=s;if(i){const s=t.setupContext=i.length>1?Oa(t):null,n=va(t);Ns();const r=$i(i,t,0,[t.props,s]);if(Os(),n(),Ge(r)){if(r.then(Sa,Sa),e)return r.then((s=>{Da(t,s,e)})).catch((e=>{Ki(e,t,0)}));t.asyncDep=r}else Da(t,r,e)}else Ta(t,e)}function Da(t,e,s){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=Zi(e)),Ta(t,s)}function Ta(t,e,s){const i=t.type;if(!t.render){if(!e&&ba&&!i.render){const e=i.template||hr(t).template;if(e){0;const{isCustomElement:s,compilerOptions:n}=t.appContext.config,{delimiters:r,compilerOptions:o}=i,a=Te(Te({isCustomElement:s,delimiters:r},n),o);i.render=ba(e,a)}}t.render=i.render||Ce,Aa&&Aa(t)}{const e=va(t);Ns();try{nr(t)}finally{Os(),e()}}}const Na={get(t,e){return Gs(t,"get",""),t[e]}};function Oa(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,Na),slots:t.slots,emit:t.emit,expose:e}}function wa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Zi(xi(t.exposed)),{get(e,s){return s in e?e[s]:s in Qn?Qn[s](t):void 0},has(t,e){return e in t||e in Qn}})):t.proxy}function ka(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function Fa(t){return Le(t)&&"__vccOpts"in t}const Ma=(t,e)=>{const s=Vi(t,e,Ca);return s};function xa(t,e,s){const i=arguments.length;return 2===i?Ve(e)&&!ke(e)?Ko(e)?sa(t,null,[e]):sa(t,e):sa(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):3===i&&Ko(s)&&(s=[s]),sa(t,e,s))}const La="3.4.31";function Pa(){}const Ba=Object.assign,Va="undefined"!==typeof window,Ga=t=>null!==t&&"object"===typeof t,qa=t=>void 0!==t&&null!==t,Xa=t=>"function"===typeof t,Ha=t=>Ga(t)&&Xa(t.then)&&Xa(t.catch);const Ya=t=>"number"===typeof t||/^\d+(\.\d+)?$/.test(t),ja=()=>!!Va&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function Ua(t,e){const s=e.split(".");let i=t;return s.forEach((t=>{var e;i=Ga(i)&&null!=(e=i[t])?e:""})),i}function Wa(t,e,s){return e.reduce(((e,i)=>(s&&void 0===t[i]||(e[i]=t[i]),e)),{})}const Za="http://www.w3.org/2000/svg",$a="http://www.w3.org/1998/Math/MathML",za="undefined"!==typeof document?document:null,Ka=za&&za.createElement("template"),Ja={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n="svg"===e?za.createElementNS(Za,t):"mathml"===e?za.createElementNS($a,t):s?za.createElement(t,{is:s}):za.createElement(t);return"select"===t&&i&&null!=i.multiple&&n.setAttribute("multiple",i.multiple),n},createText:t=>za.createTextNode(t),createComment:t=>za.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>za.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling)){while(1)if(e.insertBefore(n.cloneNode(!0),s),n===r||!(n=n.nextSibling))break}else{Ka.innerHTML="svg"===i?`<svg>${t}</svg>`:"mathml"===i?`<math>${t}</math>`:t;const n=Ka.content;if("svg"===i||"mathml"===i){const t=n.firstChild;while(t.firstChild)n.appendChild(t.firstChild);n.removeChild(t)}e.insertBefore(n,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Qa="transition",th="animation",eh=Symbol("_vtc"),sh=(t,{slots:e})=>xa(Io,ah(t),e);sh.displayName="Transition";const ih={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nh=sh.props=Te({},Ao,ih),rh=(t,e=[])=>{ke(t)?t.forEach((t=>t(...e))):t&&t(...e)},oh=t=>!!t&&(ke(t)?t.some((t=>t.length>1)):t.length>1);function ah(t){const e={};for(const T in t)T in ih||(e[T]=t[T]);if(!1===t.css)return e;const{name:s="v",type:i,duration:n,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:h=r,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:c=`${s}-leave-from`,leaveActiveClass:p=`${s}-leave-active`,leaveToClass:d=`${s}-leave-to`}=t,f=hh(n),m=f&&f[0],_=f&&f[1],{onBeforeEnter:g,onEnter:R,onEnterCancelled:v,onLeave:S,onLeaveCancelled:y,onBeforeAppear:b=g,onAppear:A=R,onAppearCancelled:C=v}=e,E=(t,e,s)=>{ch(t,e?u:a),ch(t,e?l:o),s&&s()},I=(t,e)=>{t._isLeaving=!1,ch(t,c),ch(t,d),ch(t,p),e&&e()},D=t=>(e,s)=>{const n=t?A:R,o=()=>E(e,t,s);rh(n,[e,o]),ph((()=>{ch(e,t?h:r),uh(e,t?u:a),oh(n)||fh(e,i,m,o)}))};return Te(e,{onBeforeEnter(t){rh(g,[t]),uh(t,r),uh(t,o)},onBeforeAppear(t){rh(b,[t]),uh(t,h),uh(t,l)},onEnter:D(!1),onAppear:D(!0),onLeave(t,e){t._isLeaving=!0;const s=()=>I(t,e);uh(t,c),uh(t,p),Rh(),ph((()=>{t._isLeaving&&(ch(t,c),uh(t,d),oh(S)||fh(t,i,_,s))})),rh(S,[t,s])},onEnterCancelled(t){E(t,!1),rh(v,[t])},onAppearCancelled(t){E(t,!0),rh(C,[t])},onLeaveCancelled(t){I(t),rh(y,[t])}})}function hh(t){if(null==t)return null;if(Ve(t))return[lh(t.enter),lh(t.leave)];{const e=lh(t);return[e,e]}}function lh(t){const e=ns(t);return e}function uh(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t[eh]||(t[eh]=new Set)).add(e)}function ch(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const s=t[eh];s&&(s.delete(e),s.size||(t[eh]=void 0))}function ph(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let dh=0;function fh(t,e,s,i){const n=t._endId=++dh,r=()=>{n===t._endId&&i()};if(s)return setTimeout(r,s);const{type:o,timeout:a,propCount:h}=mh(t,e);if(!o)return i();const l=o+"end";let u=0;const c=()=>{t.removeEventListener(l,p),r()},p=e=>{e.target===t&&++u>=h&&c()};setTimeout((()=>{u<h&&c()}),a+1),t.addEventListener(l,p)}function mh(t,e){const s=window.getComputedStyle(t),i=t=>(s[t]||"").split(", "),n=i(`${Qa}Delay`),r=i(`${Qa}Duration`),o=_h(n,r),a=i(`${th}Delay`),h=i(`${th}Duration`),l=_h(a,h);let u=null,c=0,p=0;e===Qa?o>0&&(u=Qa,c=o,p=r.length):e===th?l>0&&(u=th,c=l,p=h.length):(c=Math.max(o,l),u=c>0?o>l?Qa:th:null,p=u?u===Qa?r.length:h.length:0);const d=u===Qa&&/\b(transform|all)(,|$)/.test(i(`${Qa}Property`).toString());return{type:u,timeout:c,propCount:p,hasTransform:d}}function _h(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,s)=>gh(e)+gh(t[s]))))}function gh(t){return"auto"===t?0:1e3*Number(t.slice(0,-1).replace(",","."))}function Rh(){return document.body.offsetHeight}function vh(t,e,s){const i=t[eh];i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Sh=Symbol("_vod"),yh=Symbol("_vsh"),bh={beforeMount(t,{value:e},{transition:s}){t[Sh]="none"===t.style.display?"":t.style.display,s&&e?s.beforeEnter(t):Ah(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!==!s&&(i?e?(i.beforeEnter(t),Ah(t,!0),i.enter(t)):i.leave(t,(()=>{Ah(t,!1)})):Ah(t,e))},beforeUnmount(t,{value:e}){Ah(t,e)}};function Ah(t,e){t.style.display=e?t[Sh]:"none",t[yh]=!e}const Ch=Symbol("");const Eh=/(^|;)\s*display\s*:/;function Ih(t,e,s){const i=t.style,n=Pe(s);let r=!1;if(s&&!n){if(e)if(Pe(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==s[e]&&Th(i,e,"")}else for(const t in e)null==s[t]&&Th(i,t,"");for(const t in s)"display"===t&&(r=!0),Th(i,t,s[t])}else if(n){if(e!==s){const t=i[Ch];t&&(s+=";"+t),i.cssText=s,r=Eh.test(s)}}else e&&t.removeAttribute("style");Sh in t&&(t[Sh]=r?i.display:"",t[yh]&&(i.display="none"))}const Dh=/\s*!important$/;function Th(t,e,s){if(ke(s))s.forEach((s=>Th(t,e,s)));else if(null==s&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=wh(t,e);Dh.test(s)?t.setProperty(Ke(i),s.replace(Dh,""),"important"):t[i]=s}}const Nh=["Webkit","Moz","ms"],Oh={};function wh(t,e){const s=Oh[e];if(s)return s;let i=$e(e);if("filter"!==i&&i in t)return Oh[e]=i;i=Je(i);for(let n=0;n<Nh.length;n++){const s=Nh[n]+i;if(s in t)return Oh[e]=s}return e}const kh="http://www.w3.org/1999/xlink";function Fh(t,e,s,i,n,r=fs(e)){i&&e.startsWith("xlink:")?null==s?t.removeAttributeNS(kh,e.slice(6,e.length)):t.setAttributeNS(kh,e,s):null==s||r&&!ms(s)?t.removeAttribute(e):t.setAttribute(e,r?"":Be(s)?String(s):s)}function Mh(t,e,s,i,n,r,o){if("innerHTML"===e||"textContent"===e)return i&&o(i,n,r),void(t[e]=null==s?"":s);const a=t.tagName;if("value"===e&&"PROGRESS"!==a&&!a.includes("-")){const i="OPTION"===a?t.getAttribute("value")||"":t.value,n=null==s?"":String(s);return i===n&&"_value"in t||(t.value=n),null==s&&t.removeAttribute(e),void(t._value=s)}let h=!1;if(""===s||null==s){const i=typeof t[e];"boolean"===i?s=ms(s):null==s&&"string"===i?(s="",h=!0):"number"===i&&(s=0,h=!0)}try{t[e]=s}catch(l){0}h&&t.removeAttribute(e)}function xh(t,e,s,i){t.addEventListener(e,s,i)}function Lh(t,e,s,i){t.removeEventListener(e,s,i)}const Ph=Symbol("_vei");function Bh(t,e,s,i,n=null){const r=t[Ph]||(t[Ph]={}),o=r[e];if(i&&o)o.value=i;else{const[s,a]=Gh(e);if(i){const o=r[e]=Yh(i,n);xh(t,s,o,a)}else o&&(Lh(t,s,o,a),r[e]=void 0)}}const Vh=/(?:Once|Passive|Capture)$/;function Gh(t){let e;if(Vh.test(t)){let s;e={};while(s=t.match(Vh))t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}const s=":"===t[2]?t.slice(3):Ke(t.slice(2));return[s,e]}let qh=0;const Xh=Promise.resolve(),Hh=()=>qh||(Xh.then((()=>qh=0)),qh=Date.now());function Yh(t,e){const s=t=>{if(t._vts){if(t._vts<=s.attached)return}else t._vts=Date.now();zi(jh(t,s.value),e,5,[t])};return s.value=t,s.attached=Hh(),s}function jh(t,e){if(ke(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const Uh=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Wh=(t,e,s,i,n,r,o,a,h)=>{const l="svg"===n;"class"===e?vh(t,i,l):"style"===e?Ih(t,s,i):Ie(e)?De(e)||Bh(t,e,s,i,o):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):Zh(t,e,i,l))?(Mh(t,e,i,r,o,a,h),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||Fh(t,e,i,l,o,"value"!==e)):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),Fh(t,e,i,l))};function Zh(t,e,s,i){if(i)return"innerHTML"===e||"textContent"===e||!!(e in t&&Uh(e)&&Le(s));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!Uh(e)||!Pe(s))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;const $h=new WeakMap,zh=new WeakMap,Kh=Symbol("_moveCb"),Jh=Symbol("_enterCb"),Qh={name:"TransitionGroup",props:Te({},nh,{tag:String,moveClass:String}),setup(t,{slots:e}){const s=_a(),i=yo();let n,r;return qn((()=>{if(!n.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!il(n[0].el,s.vnode.el,e))return;n.forEach(tl),n.forEach(el);const i=n.filter(sl);Rh(),i.forEach((t=>{const s=t.el,i=s.style;uh(s,e),i.transform=i.webkitTransform=i.transitionDuration="";const n=s[Kh]=t=>{t&&t.target!==s||t&&!/transform$/.test(t.propertyName)||(s.removeEventListener("transitionend",n),s[Kh]=null,ch(s,e))};s.addEventListener("transitionend",n)}))})),()=>{const o=Mi(t),a=ah(o);let h=o.tag||Ho;if(n=[],r)for(let t=0;t<r.length;t++){const e=r[t];e.el&&e.el instanceof Element&&(n.push(e),wo(e,To(e,a,i,s)),$h.set(e,e.el.getBoundingClientRect()))}r=e.default?ko(e.default()):[];for(let t=0;t<r.length;t++){const e=r[t];null!=e.key&&wo(e,To(e,a,i,s))}return sa(h,null,r)}}};Qh.props;function tl(t){const e=t.el;e[Kh]&&e[Kh](),e[Jh]&&e[Jh]()}function el(t){zh.set(t,t.el.getBoundingClientRect())}function sl(t){const e=$h.get(t),s=zh.get(t),i=e.left-s.left,n=e.top-s.top;if(i||n){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${n}px)`,e.transitionDuration="0s",t}}function il(t,e,s){const i=t.cloneNode(),n=t[eh];n&&n.forEach((t=>{t.split(/\s+/).forEach((t=>t&&i.classList.remove(t)))})),s.split(/\s+/).forEach((t=>t&&i.classList.add(t))),i.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=mh(i);return r.removeChild(i),o}Symbol("_assign");const nl=Te({patchProp:Wh},Ja);let rl;function ol(){return rl||(rl=Ur(nl))}const al=(...t)=>{const e=ol().createApp(...t);const{mount:s}=e;return e.mount=t=>{const i=ll(t);if(!i)return;const n=e._component;Le(n)||n.render||n.template||(n.template=i.innerHTML),i.innerHTML="";const r=s(i,!1,hl(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function hl(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function ll(t){if(Pe(t)){const e=document.querySelector(t);return e}return t}function ul(t){const e=_a();e&&Ba(e.proxy,t)}function cl(){const t=Ii({show:!1}),e=e=>{t.show=e},s=s=>{Ba(t,s,{transitionAppear:!0}),e(!0)},i=()=>e(!1);return ul({open:s,close:i,toggle:e}),{open:s,close:i,state:t,toggle:e}}function pl(t){const e=al(t),s=document.createElement("div");return document.body.appendChild(s),{instance:e.mount(s),unmount(){e.unmount(),document.body.removeChild(s)}}}function dl(t){if(qa(t))return Ya(t)?`${t}px`:String(t)}function fl(t){if(qa(t)){if(Array.isArray(t))return{width:dl(t[0]),height:dl(t[1])};const e=dl(t);return{width:e,height:e}}}function ml(t){const e={};return void 0!==t&&(e.zIndex=+t),e}const _l=/-(\w)/g,gl=t=>t.replace(_l,((t,e)=>e.toUpperCase())),Rl=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");const{hasOwnProperty:vl}=Object.prototype;function Sl(t,e,s){const i=e[s];qa(i)&&(vl.call(t,s)&&Ga(i)?t[s]=yl(Object(t[s]),i):t[s]=i)}function yl(t,e){return Object.keys(e).forEach((s=>{Sl(t,e,s)})),t}var bl={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(t,e)=>`${t}年${e}月`,rangePrompt:t=>`最多选择 ${t} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:t=>`${t}折`,condition:t=>`满${t}元可用`},vanCouponCell:{title:"优惠券",count:t=>`${t}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const Al=Hi("zh-CN"),Cl=Ii({"zh-CN":bl}),El={messages(){return Cl[Al.value]},use(t,e){Al.value=t,this.add({[t]:e})},add(t={}){yl(Cl,t)}};var Il=El;function Dl(t){const e=gl(t)+".";return(t,...s)=>{const i=Il.messages(),n=Ua(i,e+t)||Ua(i,t);return Xa(n)?n(...s):n}}function Tl(t,e){return e?"string"===typeof e?` ${t}--${e}`:Array.isArray(e)?e.reduce(((e,s)=>e+Tl(t,s)),""):Object.keys(e).reduce(((s,i)=>s+(e[i]?Tl(t,i):"")),""):""}function Nl(t){return(e,s)=>(e&&"string"!==typeof e&&(s=e,e=""),e=e?`${t}__${e}`:t,`${e}${Tl(e,s)}`)}function Ol(t){const e=`van-${t}`;return[e,Nl(e),Dl(e)]}const wl=null,kl=[Number,String],Fl={type:Boolean,default:!0},Ml=t=>({type:Number,default:t}),xl=t=>({type:String,default:t});let Ll=0;function Pl(t){t?(Ll||document.body.classList.add("van-toast--unclickable"),Ll++):Ll&&(Ll--,Ll||document.body.classList.remove("van-toast--unclickable"))}function Bl(t){return t.install=e=>{const{name:s}=t;s&&(e.component(s,t),e.component(gl(`-${s}`),t))},t}const[Vl,Gl]=Ol("badge"),ql={dot:Boolean,max:kl,tag:xl("div"),color:String,offset:Array,content:kl,showZero:Fl,position:xl("top-right")};var Xl=zn({name:Vl,props:ql,setup(t,{slots:e}){const s=()=>{if(e.content)return!0;const{content:s,showZero:i}=t;return qa(s)&&""!==s&&(i||0!==s&&"0"!==s)},i=()=>{const{dot:i,max:n,content:r}=t;if(!i&&s())return e.content?e.content():qa(n)&&Ya(r)&&+r>+n?`${n}+`:r},n=t=>t.startsWith("-")?t.replace("-",""):`-${t}`,r=Ma((()=>{const s={background:t.color};if(t.offset){const[i,r]=t.offset,{position:o}=t,[a,h]=o.split("-");e.default?(s[a]="number"===typeof r?dl("top"===a?r:-r):"top"===a?dl(r):n(r),s[h]="number"===typeof i?dl("left"===h?i:-i):"left"===h?dl(i):n(i)):(s.marginTop=dl(r),s.marginLeft=dl(i))}return s})),o=()=>{if(s()||t.dot)return sa("div",{class:Gl([t.position,{dot:t.dot,fixed:!!e.default}]),style:r.value},[i()])};return()=>{if(e.default){const{tag:s}=t;return sa(s,{class:Gl("wrapper")},{default:()=>[e.default(),o()]})}return o()}}});const Hl=Bl(Xl);let Yl=2e3;const jl=()=>++Yl,Ul=t=>{Yl=t},[Wl,Zl]=Ol("config-provider"),$l=Symbol(Wl),zl={tag:xl("div"),theme:xl("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function Kl(t){const e={};return Object.keys(t).forEach((s=>{e[`--van-${Rl(s)}`]=t[s]})),e}zn({name:Wl,props:zl,setup(t,{slots:e}){const s=Ma((()=>Kl(Ba({},t.themeVars,"dark"===t.theme?t.themeVarsDark:t.themeVarsLight))));if(Va){const e=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},s=(e=t.theme)=>{document.documentElement.classList.remove(`van-theme-${e}`)};ro((()=>t.theme),((t,i)=>{i&&s(i),e()}),{immediate:!0}),po(e),fo(s),Xn(s)}return br($l,t),io((()=>{void 0!==t.zIndex&&Ul(t.zIndex)})),()=>sa(t.tag,{class:Zl(),style:s.value},{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e)]}})}});const[Jl,Ql]=Ol("icon"),tu=t=>null==t?void 0:t.includes("/"),eu={dot:Boolean,tag:xl("i"),name:String,size:kl,badge:kl,color:String,badgeProps:Object,classPrefix:String};var su=zn({name:Jl,props:eu,setup(t,{slots:e}){const s=Ar($l,null),i=Ma((()=>t.classPrefix||(null==s?void 0:s.iconPrefix)||Ql()));return()=>{const{tag:s,dot:n,name:r,size:o,badge:a,color:h}=t,l=tu(r);return sa(Hl,ua({dot:n,tag:s,class:[i.value,l?"":`${i.value}-${r}`],style:{color:h,fontSize:dl(o)},content:a},t.badgeProps),{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e),l&&sa("img",{class:Ql("image"),src:r},null)]}})}}});const iu=Bl(su);const nu={show:Boolean,zIndex:kl,overlay:Fl,duration:kl,teleport:[String,Object],lockScroll:Fl,lazyRender:Fl,beforeClose:Function,overlayStyle:Object,overlayClass:wl,transitionAppear:Boolean,closeOnClickOverlay:Fl};Object.keys(nu);function ru(t,{args:e=[],done:s,canceled:i}){if(t){const n=t.apply(null,e);Ha(n)?n.then((t=>{t?s():i&&i()})).catch(Pa):n?s():i&&i()}else s()}const ou="van-haptics-feedback",au=(Symbol("van-form"),5);var hu="undefined"!==typeof window;var lu,uu;function cu(t){let e;Vn((()=>{t(),ln((()=>{e=!0}))})),po((()=>{e&&t()}))}function pu(t,e,s={}){if(!hu)return;const{target:i=window,passive:n=!1,capture:r=!1}=s;let o,a=!1;const h=s=>{if(a)return;const i=Ui(s);i&&!o&&(i.addEventListener(t,e,{capture:r,passive:n}),o=!0)},l=s=>{if(a)return;const i=Ui(s);i&&o&&(i.removeEventListener(t,e,r),o=!1)};let u;return Hn((()=>l(i))),fo((()=>l(i))),cu((()=>h(i))),Xi(i)&&(u=ro(i,((t,e)=>{l(e),h(t)}))),()=>{null==u||u(),l(i),a=!0}}function du(){if(!lu&&(lu=Hi(0),uu=Hi(0),hu)){const t=()=>{lu.value=window.innerWidth,uu.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:lu,height:uu}}var fu=/scroll|auto|overlay/i,mu=hu?window:void 0;function _u(t){const e=1;return"HTML"!==t.tagName&&"BODY"!==t.tagName&&t.nodeType===e}function gu(t,e=mu){let s=t;while(s&&s!==e&&_u(s)){const{overflowY:t}=window.getComputedStyle(s);if(fu.test(t))return s;s=s.parentNode}return e}Symbol("van-field");function Ru(t,e){return t>e?"horizontal":e>t?"vertical":""}function vu(){const t=Hi(0),e=Hi(0),s=Hi(0),i=Hi(0),n=Hi(0),r=Hi(0),o=Hi(""),a=Hi(!0),h=()=>"vertical"===o.value,l=()=>"horizontal"===o.value,u=()=>{s.value=0,i.value=0,n.value=0,r.value=0,o.value="",a.value=!0},c=s=>{u(),t.value=s.touches[0].clientX,e.value=s.touches[0].clientY},p=h=>{const l=h.touches[0];s.value=(l.clientX<0?0:l.clientX)-t.value,i.value=l.clientY-e.value,n.value=Math.abs(s.value),r.value=Math.abs(i.value);const u=10;(!o.value||n.value<u&&r.value<u)&&(o.value=Ru(n.value,r.value)),a.value&&(n.value>au||r.value>au)&&(a.value=!1)};return{move:p,start:c,reset:u,startX:t,startY:e,deltaX:s,deltaY:i,offsetX:n,offsetY:r,direction:o,isVertical:h,isHorizontal:l,isTap:a}}ja();const Su=t=>t.stopPropagation();function yu(t,e){("boolean"!==typeof t.cancelable||t.cancelable)&&t.preventDefault(),e&&Su(t)}const{width:bu,height:Au}=du();let Cu=0;const Eu="van-overflow-hidden";function Iu(t,e){const s=vu(),i="01",n="10",r=e=>{s.move(e);const r=s.deltaY.value>0?n:i,o=gu(e.target,t.value),{scrollHeight:a,offsetHeight:h,scrollTop:l}=o;let u="11";0===l?u=h>=a?"00":"01":l+h>=a&&(u="10"),"11"===u||!s.isVertical()||parseInt(u,2)&parseInt(r,2)||yu(e,!0)},o=()=>{document.addEventListener("touchstart",s.start),document.addEventListener("touchmove",r,{passive:!1}),Cu||document.body.classList.add(Eu),Cu++},a=()=>{Cu&&(document.removeEventListener("touchstart",s.start),document.removeEventListener("touchmove",r),Cu--,Cu||document.body.classList.remove(Eu))},h=()=>e()&&o(),l=()=>e()&&a();cu(h),fo(l),Xn(l),ro(e,(t=>{t?o():a()}))}function Du(t){const e=Hi(!1);return ro(t,(t=>{t&&(e.value=t)}),{immediate:!0}),t=>()=>e.value?t():null}const Tu=Symbol();const[Nu,Ou]=Ol("overlay"),wu={show:Boolean,zIndex:kl,duration:kl,className:wl,lockScroll:Fl,lazyRender:Fl,customStyle:Object};var ku=zn({name:Nu,props:wu,setup(t,{slots:e}){const s=Hi(),i=Du((()=>t.show||!t.lazyRender)),n=e=>{t.lockScroll&&yu(e,!0)},r=i((()=>{var i;const n=Ba(ml(t.zIndex),t.customStyle);return qa(t.duration)&&(n.animationDuration=`${t.duration}s`),Zn(sa("div",{ref:s,style:n,class:[Ou(),t.className]},[null==(i=e.default)?void 0:i.call(e)]),[[bh,t.show]])}));return pu("touchmove",n,{target:s}),()=>sa(sh,{name:"van-fade",appear:!0},{default:r})}});const Fu=Bl(ku);const Mu=Ba({},nu,{round:Boolean,position:xl("center"),closeIcon:xl("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:xl("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[xu,Lu]=Ol("popup");var Pu=zn({name:xu,inheritAttrs:!1,props:Mu,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(t,{emit:e,attrs:s,slots:i}){let n,r;const o=Hi(),a=Hi(),h=Du((()=>t.show||!t.lazyRender)),l=Ma((()=>{const e={zIndex:o.value};if(qa(t.duration)){const s="center"===t.position?"animationDuration":"transitionDuration";e[s]=`${t.duration}s`}return e})),u=()=>{n||(n=!0,o.value=void 0!==t.zIndex?+t.zIndex:jl(),e("open"))},c=()=>{n&&ru(t.beforeClose,{done(){n=!1,e("close"),e("update:show",!1)}})},p=s=>{e("clickOverlay",s),t.closeOnClickOverlay&&c()},d=()=>{if(t.overlay)return sa(Fu,{show:t.show,class:t.overlayClass,zIndex:o.value,duration:t.duration,customStyle:t.overlayStyle,role:t.closeOnClickOverlay?"button":void 0,tabindex:t.closeOnClickOverlay?0:void 0,onClick:p},{default:i["overlay-content"]})},f=t=>{e("clickCloseIcon",t),c()},m=()=>{if(t.closeable)return sa(iu,{role:"button",tabindex:0,name:t.closeIcon,class:[Lu("close-icon",t.closeIconPosition),ou],classPrefix:t.iconPrefix,onClick:f},null)};let _;const g=()=>{_&&clearTimeout(_),_=setTimeout((()=>{e("opened")}))},R=()=>e("closed"),v=t=>e("keydown",t),S=h((()=>{var e;const{round:n,position:r,safeAreaInsetTop:o,safeAreaInsetBottom:h}=t;return Zn(sa("div",ua({ref:a,style:l.value,role:"dialog",tabindex:0,class:[Lu({round:n,[r]:r}),{"van-safe-area-top":o,"van-safe-area-bottom":h}],onKeydown:v},s),[null==(e=i.default)?void 0:e.call(i),m()]),[[bh,t.show]])})),y=()=>{const{position:e,transition:s,transitionAppear:i}=t,n="center"===e?"van-fade":`van-popup-slide-${e}`;return sa(sh,{name:s||n,appear:i,onAfterEnter:g,onAfterLeave:R},{default:S})};return ro((()=>t.show),(t=>{t&&!n&&(u(),0===s.tabindex&&ln((()=>{var t;null==(t=a.value)||t.focus()}))),!t&&n&&(n=!1,e("close"))})),ul({popupRef:a}),Iu(a,(()=>t.show&&t.lockScroll)),pu("popstate",(()=>{t.closeOnPopstate&&(c(),r=!1)})),Vn((()=>{t.show&&u()})),po((()=>{r&&(e("update:show",!0),r=!1)})),fo((()=>{t.show&&t.teleport&&(c(),r=!0)})),br(Tu,(()=>t.show)),()=>t.teleport?sa(qo,{to:t.teleport},{default:()=>[d(),y()]}):sa(Ho,null,[d(),y()])}});const Bu=Bl(Pu);const[Vu,Gu]=Ol("loading"),qu=Array(12).fill(null).map(((t,e)=>sa("i",{class:Gu("line",String(e+1))},null))),Xu=sa("svg",{class:Gu("circular"),viewBox:"25 25 50 50"},[sa("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Hu={size:kl,type:xl("circular"),color:String,vertical:Boolean,textSize:kl,textColor:String};var Yu=zn({name:Vu,props:Hu,setup(t,{slots:e}){const s=Ma((()=>Ba({color:t.color},fl(t.size)))),i=()=>{const i="spinner"===t.type?qu:Xu;return sa("span",{class:Gu("spinner",t.type),style:s.value},[e.icon?e.icon():i])},n=()=>{var s;if(e.default)return sa("span",{class:Gu("text"),style:{fontSize:dl(t.textSize),color:null!=(s=t.textColor)?s:t.color}},[e.default()])};return()=>{const{type:e,vertical:s}=t;return sa("div",{class:Gu([e,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[i(),n()])}}});const ju=Bl(Yu);const[Uu,Wu]=Ol("toast"),Zu=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],$u={icon:String,show:Boolean,type:xl("text"),overlay:Boolean,message:kl,iconSize:kl,duration:Ml(2e3),position:xl("middle"),teleport:[String,Object],wordBreak:String,className:wl,iconPrefix:String,transition:xl("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:wl,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var zu=zn({name:Uu,props:$u,emits:["update:show"],setup(t,{emit:e,slots:s}){let i,n=!1;const r=()=>{const e=t.show&&t.forbidClick;n!==e&&(n=e,Pl(n))},o=t=>e("update:show",t),a=()=>{t.closeOnClick&&o(!1)},h=()=>clearTimeout(i),l=()=>{const{icon:e,type:s,iconSize:i,iconPrefix:n,loadingType:r}=t,o=e||"success"===s||"fail"===s;return o?sa(iu,{name:e||s,size:i,class:Wu("icon"),classPrefix:n},null):"loading"===s?sa(ju,{class:Wu("loading"),size:i,type:r},null):void 0},u=()=>{const{type:e,message:i}=t;return s.message?sa("div",{class:Wu("text")},[s.message()]):qa(i)&&""!==i?"html"===e?sa("div",{key:0,class:Wu("text"),innerHTML:String(i)},null):sa("div",{class:Wu("text")},[i]):void 0};return ro((()=>[t.show,t.forbidClick]),r),ro((()=>[t.show,t.type,t.message,t.duration]),(()=>{h(),t.show&&t.duration>0&&(i=setTimeout((()=>{o(!1)}),t.duration))})),Vn(r),Hn(r),()=>sa(Bu,ua({class:[Wu([t.position,"normal"===t.wordBreak?"break-normal":t.wordBreak,{[t.type]:!t.icon}]),t.className],lockScroll:!1,onClick:a,onClosed:h,"onUpdate:show":o},Wa(t,Zu)),{default:()=>[l(),u()]})}});const Ku={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Ju=[],Qu=!1,tc=Ba({},Ku);const ec=new Map;function sc(t){return Ga(t)?t:{message:t}}function ic(){const{instance:t,unmount:e}=pl({setup(){const s=Hi(""),{open:i,state:n,close:r,toggle:o}=cl(),a=()=>{Qu&&(Ju=Ju.filter((e=>e!==t)),e())},h=()=>{const t={onClosed:a,"onUpdate:show":o};return sa(zu,ua(n,t),null)};return ro(s,(t=>{n.message=t})),_a().render=h,{open:i,close:r,message:s}}});return t}function nc(){if(!Ju.length||Qu){const t=ic();Ju.push(t)}return Ju[Ju.length-1]}function rc(t={}){if(!Va)return{};const e=nc(),s=sc(t);return e.open(Ba({},tc,ec.get(s.type||tc.type),s)),e}const oc=t=>e=>rc(Ba({type:t},sc(e)));oc("loading"),oc("success"),oc("fail");const ac={class:"home w-100x h-100x flex-row nes-container justify-center",id:"nes-container"},hc={id:"psp",class:"flex-column h-100x align-center p-absolute lt-0 w-192"},lc=["data-key","data-key2"],uc=["data-key","data-key2"],cc=["data-key","data-key2"],pc=["data-key","data-key2"],dc=["data-key"],fc=["data-key"],mc=["data-key"],_c=["data-key"],gc={class:"p-absolute rt-0 w-192 mt-10 flex-column align-center h-100x space-between"},Rc={class:"joystickpad flex-column align-center w-100x pb-10 lh-62 mb-10"},vc={class:"flex-row mt-14"},Sc={class:"flex-row mt-14"};var yc=(0,i.pM)({__name:"HomeView",setup(t){const e=(0,r.KR)(100),s=(0,r.KR)("107vmin"),a=(0,r.KR)("100vmin"),h=(0,r.KR)(!1),l=((0,r.KR)(null),(0,r.KR)(null)),u=(0,r.KR)([]),c=(0,r.KR)(!1),p=(0,me.u)(),d=(0,r.KR)(p.url),f=(0,r.KR)(p.gameName);(0,i.wB)((()=>p.url),(t=>{console.log(t,342334234),d.value=t,f.value=p.gameName}),{immediate:!0});const m=()=>{l.value.reset()},_={UP:"KeyW",DOWN:"KeyS",LEFT:"KeyA",RIGHT:"KeyD",A:"KeyK",B:"KeyJ",C:"KeyI",D:"KeyU",SELECT:"Digit2",START:"Digit1"},g={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",A:"Numpad2",B:"Numpad1",C:"Numpad5",D:"Numpad4"},R=(0,r.KR)({..._}),v=(0,r.KR)({...g});function S(){h.value=!h.value}function y(){l.value.pause(),fe.vq.getData().showList()}function b(){Se.isEnabled?(Se.toggle(),c.value=!c.value):rc("当前浏览器不支持全屏")}function A(t){let e=t.targetTouches[0],s=document.elementFromPoint(e.pageX,e.pageY);const i=s?.getAttribute("data-key"),n=s?.getAttribute("data-key2");i&&(u.value=[i],document.dispatchEvent(new KeyboardEvent("keydown",{code:i}))),n&&(u.value=[i,n],document.dispatchEvent(new KeyboardEvent("keydown",{code:n})))}function C(t){u.value.forEach((t=>{document.dispatchEvent(new KeyboardEvent("keyup",{code:t}))}))}function E(t){let e=t.targetTouches[0],s=document.elementFromPoint(e.pageX,e.pageY);const i=s?.getAttribute("data-key"),n=s?.getAttribute("data-key2");u.value.forEach((t=>{[i,n].includes(t)||document.dispatchEvent(new KeyboardEvent("keyup",{code:t}))})),i&&(u.value=[i],document.dispatchEvent(new KeyboardEvent("keydown",{code:i}))),n&&(u.value=[i,n],document.dispatchEvent(new KeyboardEvent("keydown",{code:n})))}function I(t){let e=t.targetTouches[0],s=document.elementFromPoint(e.pageX+e.radiusX,e.pageY);const i=document.getElementById("joystick_btn_A");s==i?(u.value.push(_.A),document.dispatchEvent(new KeyboardEvent("keydown",{code:_.A}))):u.value.includes(_.A)&&document.dispatchEvent(new KeyboardEvent("keyup",{code:_.A}))}function D(t){u.value=[t],document.dispatchEvent(new KeyboardEvent("keydown",{code:t}))}function T(t){u.value.forEach((t=>{document.dispatchEvent(new KeyboardEvent("keyup",{code:t}))})),u.value=[]}function N(){document.dispatchEvent(new KeyboardEvent("keydown",{code:_.A})),document.dispatchEvent(new KeyboardEvent("keydown",{code:_.B}))}function O(){document.dispatchEvent(new KeyboardEvent("keyup",{code:_.A})),document.dispatchEvent(new KeyboardEvent("keyup",{code:_.B}))}return(t,u)=>((0,i.uX)(),(0,i.CE)("div",ac,[(0,i.Lk)("div",hc,[(0,i.Lk)("div",{id:"joystick_btn_menu",onClick:y,class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mt-5"}," 返回列表 "),(0,i.Lk)("div",{id:"joystick_btn_menu",onClick:m,class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mt-10"}," 重新开始 "),(0,i.Lk)("div",{id:"joystick_btn_choice",class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mt-10",onTouchstart:u[0]||(u[0]=(0,n.D$)((t=>D(_.SELECT)),["prevent"])),onTouchend:u[1]||(u[1]=(0,n.D$)((t=>T(_.SELECT)),["prevent"]))}," 选择 ",32),(0,i.Lk)("div",{id:"joystick_btn_start",class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mt-10",onTouchstart:u[2]||(u[2]=(0,n.D$)((t=>D(_.START)),["prevent"])),onTouchend:u[3]||(u[3]=(0,n.D$)((t=>T(_.START)),["prevent"]))}," 开始 ",32),(0,i.Lk)("div",{class:"interaction-area w-172 h-172 lb-0 ml-10 mb-10",id:"steeringWheel",onTouchstart:(0,n.D$)(A,["prevent"]),onTouchend:(0,n.D$)(C,["prevent"]),onTouchmove:(0,n.D$)(E,["prevent"]),style:{opacity:"0.8"}},[(0,i.Lk)("div",{class:"darrow w-52 h-62 ml-112",id:"joystick_rightup","data-key":_.RIGHT,"data-key2":_.UP},null,8,lc),(0,i.Lk)("div",{class:"darrow w-52 h-62 ml-10",id:"joystick_leftup","data-key":_.LEFT,"data-key2":_.UP},null,8,uc),(0,i.Lk)("div",{class:"darrow w-52 h-62 mt-10 ml-10 mt-106",id:"joystick_leftdown","data-key":_.LEFT,"data-key2":_.DOWN},null,8,cc),(0,i.Lk)("div",{class:"darrow w-52 h-62 mt-10 ml-108 mt-110",id:"joystick_rightdown","data-key":_.RIGHT,"data-key2":_.DOWN},null,8,pc),(0,i.Lk)("button",{id:"joystick_up",class:"arrow w-52 h-60 ml-8 mt-2","data-key":_.UP}," ▵ ",8,dc),(0,i.Lk)("button",{id:"joystick_left",class:"arrow w-52 h-60 mt-10","data-key":_.LEFT}," ▵ ",8,fc),(0,i.Lk)("button",{id:"joystick_right","data-key":_.RIGHT,class:"arrow w-52 h-60 mt-10"}," ▵ ",8,mc),(0,i.Lk)("button",{id:"joystick_down","data-key":_.DOWN,class:"arrow w-52 h-60 ml-8"}," ▵ ",8,_c)],32)]),d.value?((0,i.uX)(),(0,i.Wv)((0,r.R1)(de),{key:0,width:s.value,height:a.value,gain:h.value?0:e.value,ref_key:"nes",ref:l,label:"点击开始游戏",p1:R.value,p2:v.value,url:d.value},null,8,["width","height","gain","p1","p2","url"])):(0,i.Q3)("",!0),(0,i.Lk)("div",gc,[(0,i.Lk)("div",null,[(0,i.Lk)("div",{id:"joystick_btn_start",onClick:b,class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mb-20"},(0,o.v_)(c.value?"退出全屏":"全屏"),1),(0,i.Lk)("div",{id:"joystick_btn_start",onClick:S,class:"left pspbutton joystick_btn_op_1 text-align-center w-100 h-36 mb-10"},(0,o.v_)(h.value?"打开声音":"关闭声音"),1)]),(0,i.Lk)("div",Rc,[(0,i.Lk)("div",vc,[(0,i.Lk)("div",{id:"joystick_btn_Y",class:"xbutton joystick_btn_op_2 w-62 h-62 mr-10",onTouchstart:u[4]||(u[4]=(0,n.D$)((t=>D(_.D)),["prevent"])),onTouchend:u[5]||(u[5]=(0,n.D$)((t=>T(_.D)),["prevent","prevent"]))}," Y ",32),(0,i.Lk)("div",{id:"joystick_btn_X",class:"xbutton joystick_btn_op_2 w-62 h-62",onTouchstart:u[6]||(u[6]=(0,n.D$)((t=>D(_.C)),["prevent"])),onTouchend:u[7]||(u[7]=(0,n.D$)((t=>T(_.C)),["prevent"]))}," X ",32)]),(0,i.Lk)("div",Sc,[(0,i.Lk)("div",{id:"joystick_btn_B",class:"xbutton joystick_btn_op_2 w-62 h-62 mr-10",onTouchstart:u[8]||(u[8]=(0,n.D$)((t=>D(_.B)),["prevent"])),onTouchend:u[9]||(u[9]=(0,n.D$)((t=>T(_.B)),["prevent"])),onTouchmove:(0,n.D$)(I,["prevent"])}," B ",32),(0,i.Lk)("div",{id:"joystick_btn_A",class:"xbutton joystick_btn_op_2 w-62 h-62",onTouchstart:u[10]||(u[10]=(0,n.D$)((t=>D(_.A)),["prevent"])),onTouchend:u[11]||(u[11]=(0,n.D$)((t=>T(_.A)),["prevent"]))}," A ",32)]),(0,i.Lk)("div",{id:"joystick_btn_AB",class:"xbutton joystick_btn_op_2 w-62 h-62 mt-10",onTouchstart:u[12]||(u[12]=(0,n.D$)((t=>N()),["prevent"])),onTouchend:u[13]||(u[13]=(0,n.D$)((t=>O()),["prevent"]))}," AB ",32)])])]))}}),bc=s(3083);const Ac=(0,bc.A)(yc,[["__scopeId","data-v-0f3231dc"]]);var Cc=Ac},11:function(t,e,s){var i=s(9058),n=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r("Can't set "+n(t)+" as a prototype")}},9202:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9411:function(t,e,s){var i=s(6671),n=s(7759),r=TypeError;t.exports=i(ArrayBuffer.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==n(t))throw new r("ArrayBuffer expected");return t.byteLength}},9611:function(t,e,s){var i=s(6947),n=s(9411),r=i(ArrayBuffer.prototype.slice);t.exports=function(t){if(0!==n(t))return!1;try{return r(t,0,0),!1}catch(e){return!0}}},2307:function(t,e,s){var i=s(6002),n=s(6947),r=s(6671),o=s(9593),a=s(9611),h=s(9411),l=s(2568),u=s(4789),c=i.structuredClone,p=i.ArrayBuffer,d=i.DataView,f=i.TypeError,m=Math.min,_=p.prototype,g=d.prototype,R=n(_.slice),v=r(_,"resizable","get"),S=r(_,"maxByteLength","get"),y=n(g.getInt8),b=n(g.setInt8);t.exports=(u||l)&&function(t,e,s){var i,n=h(t),r=void 0===e?n:o(e),_=!v||!v(t);if(a(t))throw new f("ArrayBuffer is detached");if(u&&(t=c(t,{transfer:[t]}),n===r&&(s||_)))return t;if(n>=r&&(!s||_))i=R(t,0,r);else{var g=s&&!_&&S?{maxByteLength:S(t)}:void 0;i=new p(r,g);for(var A=new d(t),C=new d(i),E=m(r,n),I=0;I<E;I++)b(C,I,y(A,I))}return u||l(t),i}},8809:function(t,e,s){var i,n,r,o=s(9202),a=s(1399),h=s(6002),l=s(4202),u=s(621),c=s(6668),p=s(764),d=s(2544),f=s(6426),m=s(679),_=s(5251),g=s(728),R=s(9972),v=s(3192),S=s(9544),y=s(3875),b=s(2820),A=b.enforce,C=b.get,E=h.Int8Array,I=E&&E.prototype,D=h.Uint8ClampedArray,T=D&&D.prototype,N=E&&R(E),O=I&&R(I),w=Object.prototype,k=h.TypeError,F=S("toStringTag"),M=y("TYPED_ARRAY_TAG"),x="TypedArrayConstructor",L=o&&!!v&&"Opera"!==p(h.opera),P=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},G=function(t){if(!u(t))return!1;var e=p(t);return"DataView"===e||c(B,e)||c(V,e)},q=function(t){var e=R(t);if(u(e)){var s=C(e);return s&&c(s,x)?s[x]:q(e)}},X=function(t){if(!u(t))return!1;var e=p(t);return c(B,e)||c(V,e)},H=function(t){if(X(t))return t;throw new k("Target is not a typed array")},Y=function(t){if(l(t)&&(!v||g(N,t)))return t;throw new k(d(t)+" is not a typed array constructor")},j=function(t,e,s,i){if(a){if(s)for(var n in B){var r=h[n];if(r&&c(r.prototype,t))try{delete r.prototype[t]}catch(o){try{r.prototype[t]=e}catch(l){}}}O[t]&&!s||m(O,t,s?e:L&&I[t]||e,i)}},U=function(t,e,s){var i,n;if(a){if(v){if(s)for(i in B)if(n=h[i],n&&c(n,t))try{delete n[t]}catch(r){}if(N[t]&&!s)return;try{return m(N,t,s?e:L&&N[t]||e)}catch(r){}}for(i in B)n=h[i],!n||n[t]&&!s||m(n,t,e)}};for(i in B)n=h[i],r=n&&n.prototype,r?A(r)[x]=n:L=!1;for(i in V)n=h[i],r=n&&n.prototype,r&&(A(r)[x]=n);if((!L||!l(N)||N===Function.prototype)&&(N=function(){throw new k("Incorrect invocation")},L))for(i in B)h[i]&&v(h[i],N);if((!L||!O||O===w)&&(O=N.prototype,L))for(i in B)h[i]&&v(h[i].prototype,O);if(L&&R(T)!==O&&v(T,O),a&&!c(O,F))for(i in P=!0,_(O,F,{configurable:!0,get:function(){return u(this)?this[M]:void 0}}),B)h[i]&&f(h[i],M,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:P&&M,aTypedArray:H,aTypedArrayConstructor:Y,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:U,getTypedArrayConstructor:q,isView:G,isTypedArray:X,TypedArray:N,TypedArrayPrototype:O}},821:function(t,e,s){var i=s(543);t.exports=function(t,e,s){var n=0,r=arguments.length>2?s:i(e),o=new t(r);while(r>n)o[n]=e[n++];return o}},5599:function(t,e,s){var i=s(543);t.exports=function(t,e){for(var s=i(t),n=new e(s),r=0;r<s;r++)n[r]=t[s-r-1];return n}},229:function(t,e,s){var i=s(543),n=s(1578),r=RangeError;t.exports=function(t,e,s,o){var a=i(t),h=n(s),l=h<0?a+h:h;if(l>=a||l<0)throw new r("Incorrect index");for(var u=new e(a),c=0;c<a;c++)u[c]=c===l?o:t[c];return u}},3382:function(t,e,s){var i=s(4492);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2568:function(t,e,s){var i,n,r,o,a=s(6002),h=s(4235),l=s(4789),u=a.structuredClone,c=a.ArrayBuffer,p=a.MessageChannel,d=!1;if(l)d=function(t){u(t,{transfer:[t]})};else if(c)try{p||(i=h("worker_threads"),i&&(p=i.MessageChannel)),p&&(n=new p,r=new c(2),o=function(t){n.port1.postMessage(null,[t])},2===r.byteLength&&(o(r),0===r.byteLength&&(d=o)))}catch(f){}t.exports=d},5165:function(t,e,s){var i=s(9129),n=s(2389);t.exports=!i&&!n&&"object"==typeof window&&"object"==typeof document},9129:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},2389:function(t,e,s){var i=s(6002),n=s(7759);t.exports="process"===n(i.process)},7054:function(t,e,s){var i=s(764);t.exports=function(t){var e=i(t);return"BigInt64Array"===e||"BigUint64Array"===e}},9058:function(t,e,s){var i=s(621);t.exports=function(t){return i(t)||null===t}},9972:function(t,e,s){var i=s(6668),n=s(4202),r=s(7282),o=s(7258),a=s(3382),h=o("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=r(t);if(i(e,h))return e[h];var s=e.constructor;return n(s)&&e instanceof s?s.prototype:e instanceof l?u:null}},3192:function(t,e,s){var i=s(6671),n=s(621),r=s(6591),o=s(11);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,s={};try{t=i(Object.prototype,"__proto__","set"),t(s,[]),e=s instanceof Array}catch(a){}return function(s,i){return r(s),o(i),n(s)?(e?t(s,i):s.__proto__=i,s):s}}():void 0)},4789:function(t,e,s){var i=s(6002),n=s(4492),r=s(8963),o=s(5165),a=s(9129),h=s(2389),l=i.structuredClone;t.exports=!!l&&!n((function(){if(a&&r>92||h&&r>94||o&&r>97)return!1;var t=new ArrayBuffer(8),e=l(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},9755:function(t,e,s){var i=s(5308),n=TypeError;t.exports=function(t){var e=i(t,"number");if("number"==typeof e)throw new n("Can't convert number to bigint");return BigInt(e)}},9593:function(t,e,s){var i=s(1578),n=s(1105),r=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=i(t),s=n(e);if(e!==s)throw new r("Wrong length or index");return s}},4235:function(t,e,s){var i=s(2389);t.exports=function(t){try{if(i)return Function('return require("'+t+'")')()}catch(e){}}},6432:function(t,e,s){var i=s(1399),n=s(5251),r=s(9611),o=ArrayBuffer.prototype;i&&!("detached"in o)&&n(o,"detached",{configurable:!0,get:function(){return r(this)}})},8657:function(t,e,s){var i=s(9731),n=s(2307);n&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},977:function(t,e,s){var i=s(9731),n=s(2307);n&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},1994:function(t,e,s){var i=s(5599),n=s(8809),r=n.aTypedArray,o=n.exportTypedArrayMethod,a=n.getTypedArrayConstructor;o("toReversed",(function(){return i(r(this),a(this))}))},4765:function(t,e,s){var i=s(8809),n=s(6947),r=s(6895),o=s(821),a=i.aTypedArray,h=i.getTypedArrayConstructor,l=i.exportTypedArrayMethod,u=n(i.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&r(t);var e=a(this),s=o(h(e),e);return u(s,t)}))},5178:function(t,e,s){var i=s(229),n=s(8809),r=s(7054),o=s(1578),a=s(9755),h=n.aTypedArray,l=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,c=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var s=h(this),n=o(t),u=r(s)?a(e):+e;return i(s,l(s),n,u)}}["with"],!c)},5988:function(t,e,s){var i=s(1167),n=s(2677),r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(n(t)+" is not a function")}},4601:function(t,e,s){var i=s(9380),n=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(n(t)+" is not an object")}},4447:function(t,e,s){var i=s(4299),n=s(6636),r=s(1364),o=function(t){return function(e,s,o){var a=i(e),h=r(a);if(0===h)return!t&&-1;var l,u=n(o,h);if(t&&s!==s){while(h>u)if(l=a[u++],l!==l)return!0}else for(;h>u;u++)if((t||u in a)&&a[u]===s)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},9205:function(t,e,s){var i=s(7386),n=s(2510),r=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(n(t)&&!o(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},8450:function(t,e,s){var i=s(7782),n=i({}.toString),r=i("".slice);t.exports=function(t){return r(n(t),8,-1)}},6538:function(t,e,s){var i=s(5839),n=s(7957),r=s(8565),o=s(4775);t.exports=function(t,e,s){for(var a=n(e),h=o.f,l=r.f,u=0;u<a.length;u++){var c=a[u];i(t,c)||s&&i(s,c)||h(t,c,l(e,c))}}},5817:function(t,e,s){var i=s(7386),n=s(4775),r=s(6238);t.exports=i?function(t,e,s){return n.f(t,e,r(1,s))}:function(t,e,s){return t[e]=s,t}},6238:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5454:function(t,e,s){var i=s(1167),n=s(4775),r=s(6277),o=s(3667);t.exports=function(t,e,s,a){a||(a={});var h=a.enumerable,l=void 0!==a.name?a.name:e;if(i(s)&&r(s,l,a),a.global)h?t[e]=s:o(e,s);else{try{a.unsafe?t[e]&&(h=!0):delete t[e]}catch(u){}h?t[e]=s:n.f(t,e,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3667:function(t,e,s){var i=s(9065),n=Object.defineProperty;t.exports=function(t,e){try{n(i,t,{value:e,configurable:!0,writable:!0})}catch(s){i[t]=e}return e}},7386:function(t,e,s){var i=s(4325);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2125:function(t,e,s){var i=s(9065),n=s(9380),r=i.document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},9135:function(t){var e=TypeError,s=9007199254740991;t.exports=function(t){if(t>s)throw e("Maximum allowed index exceeded");return t}},1474:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3158:function(t,e,s){var i,n,r=s(9065),o=s(1474),a=r.process,h=r.Deno,l=a&&a.versions||h&&h.version,u=l&&l.v8;u&&(i=u.split("."),n=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(n=+i[1]))),t.exports=n},1689:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},928:function(t,e,s){var i=s(9065),n=s(8565).f,r=s(5817),o=s(5454),a=s(3667),h=s(6538),l=s(6878);t.exports=function(t,e){var s,u,c,p,d,f,m=t.target,_=t.global,g=t.stat;if(u=_?i:g?i[m]||a(m,{}):i[m]&&i[m].prototype,u)for(c in e){if(d=e[c],t.dontCallGetSet?(f=n(u,c),p=f&&f.value):p=u[c],s=l(_?c:m+(g?".":"#")+c,t.forced),!s&&void 0!==p){if(typeof d==typeof p)continue;h(d,p)}(t.sham||p&&p.sham)&&r(d,"sham",!0),o(u,c,d,t)}}},4325:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},7622:function(t,e,s){var i=s(4325);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9955:function(t,e,s){var i=s(7622),n=Function.prototype.call;t.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},6220:function(t,e,s){var i=s(7386),n=s(5839),r=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=n(r,"name"),h=a&&"something"===function(){}.name,l=a&&(!i||i&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:h,CONFIGURABLE:l}},7782:function(t,e,s){var i=s(7622),n=Function.prototype,r=n.call,o=i&&n.bind.bind(r,r);t.exports=i?o:function(t){return function(){return r.apply(t,arguments)}}},2461:function(t,e,s){var i=s(9065),n=s(1167),r=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(i[t]):i[t]&&i[t][e]}},8032:function(t,e,s){var i=s(5988),n=s(755);t.exports=function(t,e){var s=t[e];return n(s)?void 0:i(s)}},9065:function(t,e,s){var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof s.g&&s.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},5839:function(t,e,s){var i=s(7782),n=s(439),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(n(t),e)}},8207:function(t){t.exports={}},1203:function(t,e,s){var i=s(7386),n=s(4325),r=s(2125);t.exports=!i&&!n((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},2725:function(t,e,s){var i=s(7782),n=s(4325),r=s(8450),o=Object,a=i("".split);t.exports=n((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?a(t,""):o(t)}:o},4704:function(t,e,s){var i=s(7782),n=s(1167),r=s(7275),o=i(Function.toString);n(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource},4031:function(t,e,s){var i,n,r,o=s(2560),a=s(9065),h=s(9380),l=s(5817),u=s(5839),c=s(7275),p=s(7061),d=s(8207),f="Object already initialized",m=a.TypeError,_=a.WeakMap,g=function(t){return r(t)?n(t):i(t,{})},R=function(t){return function(e){var s;if(!h(e)||(s=n(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return s}};if(o||c.state){var v=c.state||(c.state=new _);v.get=v.get,v.has=v.has,v.set=v.set,i=function(t,e){if(v.has(t))throw new m(f);return e.facade=t,v.set(t,e),e},n=function(t){return v.get(t)||{}},r=function(t){return v.has(t)}}else{var S=p("state");d[S]=!0,i=function(t,e){if(u(t,S))throw new m(f);return e.facade=t,l(t,S,e),e},n=function(t){return u(t,S)?t[S]:{}},r=function(t){return u(t,S)}}t.exports={set:i,get:n,has:r,enforce:g,getterFor:R}},2510:function(t,e,s){var i=s(8450);t.exports=Array.isArray||function(t){return"Array"===i(t)}},1167:function(t){var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},6878:function(t,e,s){var i=s(4325),n=s(1167),r=/#|\.prototype\./,o=function(t,e){var s=h[a(t)];return s===u||s!==l&&(n(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},h=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},755:function(t){t.exports=function(t){return null===t||void 0===t}},9380:function(t,e,s){var i=s(1167);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},5321:function(t){t.exports=!1},4827:function(t,e,s){var i=s(2461),n=s(1167),r=s(3387),o=s(5034),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return n(e)&&r(e.prototype,a(t))}},1364:function(t,e,s){var i=s(5184);t.exports=function(t){return i(t.length)}},6277:function(t,e,s){var i=s(7782),n=s(4325),r=s(1167),o=s(5839),a=s(7386),h=s(6220).CONFIGURABLE,l=s(4704),u=s(4031),c=u.enforce,p=u.get,d=String,f=Object.defineProperty,m=i("".slice),_=i("".replace),g=i([].join),R=a&&!n((function(){return 8!==f((function(){}),"length",{value:8}).length})),v=String(String).split("String"),S=t.exports=function(t,e,s){"Symbol("===m(d(e),0,7)&&(e="["+_(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),s&&s.getter&&(e="get "+e),s&&s.setter&&(e="set "+e),(!o(t,"name")||h&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),R&&s&&o(s,"arity")&&t.length!==s.arity&&f(t,"length",{value:s.arity});try{s&&o(s,"constructor")&&s.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(n){}var i=c(t);return o(i,"source")||(i.source=g(v,"string"==typeof e?e:"")),t};Function.prototype.toString=S((function(){return r(this)&&p(this).source||l(this)}),"toString")},1883:function(t){var e=Math.ceil,s=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?s:e)(i)}},4775:function(t,e,s){var i=s(7386),n=s(1203),r=s(9668),o=s(4601),a=s(4963),h=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",p="configurable",d="writable";e.f=i?r?function(t,e,s){if(o(t),e=a(e),o(s),"function"===typeof t&&"prototype"===e&&"value"in s&&d in s&&!s[d]){var i=u(t,e);i&&i[d]&&(t[e]=s.value,s={configurable:p in s?s[p]:i[p],enumerable:c in s?s[c]:i[c],writable:!1})}return l(t,e,s)}:l:function(t,e,s){if(o(t),e=a(e),o(s),n)try{return l(t,e,s)}catch(i){}if("get"in s||"set"in s)throw new h("Accessors not supported");return"value"in s&&(t[e]=s.value),t}},8565:function(t,e,s){var i=s(7386),n=s(9955),r=s(2583),o=s(6238),a=s(4299),h=s(4963),l=s(5839),u=s(1203),c=Object.getOwnPropertyDescriptor;e.f=i?c:function(t,e){if(t=a(t),e=h(e),u)try{return c(t,e)}catch(s){}if(l(t,e))return o(!n(r.f,t,e),t[e])}},538:function(t,e,s){var i=s(770),n=s(1689),r=n.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},8959:function(t,e){e.f=Object.getOwnPropertySymbols},3387:function(t,e,s){var i=s(7782);t.exports=i({}.isPrototypeOf)},770:function(t,e,s){var i=s(7782),n=s(5839),r=s(4299),o=s(4447).indexOf,a=s(8207),h=i([].push);t.exports=function(t,e){var s,i=r(t),l=0,u=[];for(s in i)!n(a,s)&&n(i,s)&&h(u,s);while(e.length>l)n(i,s=e[l++])&&(~o(u,s)||h(u,s));return u}},2583:function(t,e){var s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!s.call({1:2},1);e.f=n?function(t){var e=i(this,t);return!!e&&e.enumerable}:s},2784:function(t,e,s){var i=s(9955),n=s(1167),r=s(9380),o=TypeError;t.exports=function(t,e){var s,a;if("string"===e&&n(s=t.toString)&&!r(a=i(s,t)))return a;if(n(s=t.valueOf)&&!r(a=i(s,t)))return a;if("string"!==e&&n(s=t.toString)&&!r(a=i(s,t)))return a;throw new o("Can't convert object to primitive value")}},7957:function(t,e,s){var i=s(2461),n=s(7782),r=s(538),o=s(8959),a=s(4601),h=n([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(a(t)),s=o.f;return s?h(e,s(t)):e}},852:function(t,e,s){var i=s(755),n=TypeError;t.exports=function(t){if(i(t))throw new n("Can't call method on "+t);return t}},7061:function(t,e,s){var i=s(1355),n=s(2598),r=i("keys");t.exports=function(t){return r[t]||(r[t]=n(t))}},7275:function(t,e,s){var i=s(5321),n=s(9065),r=s(3667),o="__core-js_shared__",a=t.exports=n[o]||r(o,{});(a.versions||(a.versions=[])).push({version:"3.37.1",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1355:function(t,e,s){var i=s(7275);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},1153:function(t,e,s){var i=s(3158),n=s(4325),r=s(9065),o=r.String;t.exports=!!Object.getOwnPropertySymbols&&!n((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6636:function(t,e,s){var i=s(2569),n=Math.max,r=Math.min;t.exports=function(t,e){var s=i(t);return s<0?n(s+e,0):r(s,e)}},4299:function(t,e,s){var i=s(2725),n=s(852);t.exports=function(t){return i(n(t))}},2569:function(t,e,s){var i=s(1883);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},5184:function(t,e,s){var i=s(2569),n=Math.min;t.exports=function(t){var e=i(t);return e>0?n(e,9007199254740991):0}},439:function(t,e,s){var i=s(852),n=Object;t.exports=function(t){return n(i(t))}},5199:function(t,e,s){var i=s(9955),n=s(9380),r=s(4827),o=s(8032),a=s(2784),h=s(1093),l=TypeError,u=h("toPrimitive");t.exports=function(t,e){if(!n(t)||r(t))return t;var s,h=o(t,u);if(h){if(void 0===e&&(e="default"),s=i(h,t,e),!n(s)||r(s))return s;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4963:function(t,e,s){var i=s(5199),n=s(4827);t.exports=function(t){var e=i(t,"string");return n(e)?e:e+""}},2677:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(s){return"Object"}}},2598:function(t,e,s){var i=s(7782),n=0,r=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++n+r,36)}},5034:function(t,e,s){var i=s(1153);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},9668:function(t,e,s){var i=s(7386),n=s(4325);t.exports=i&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2560:function(t,e,s){var i=s(9065),n=s(1167),r=i.WeakMap;t.exports=n(r)&&/native code/.test(String(r))},1093:function(t,e,s){var i=s(9065),n=s(1355),r=s(5839),o=s(2598),a=s(1153),h=s(5034),l=i.Symbol,u=n("wks"),c=h?l["for"]||l:l&&l.withoutSetter||o;t.exports=function(t){return r(u,t)||(u[t]=a&&r(l,t)?l[t]:c("Symbol."+t)),u[t]}},6800:function(t,e,s){var i=s(928),n=s(439),r=s(1364),o=s(9205),a=s(9135),h=s(4325),l=h((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},c=l||!u();i({target:"Array",proto:!0,arity:1,forced:c},{push:function(t){var e=n(this),s=r(e),i=arguments.length;a(s+i);for(var h=0;h<i;h++)e[s]=arguments[h],s++;return o(e,s),s}})}}]);
//# sourceMappingURL=586.0d7b3a1b.js.map